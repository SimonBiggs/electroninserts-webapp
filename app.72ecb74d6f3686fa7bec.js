webpackJsonp([0],{0:function(e,t,n){"use strict";var o=n(1),i=n(3),r=n(23);i.enableProdMode(),o.platformBrowserDynamic().bootstrapModule(r.AppModule)},23:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=n(3),a=n(21),s=n(24),l=n(28),c=n(21),p=n(29),d=n(75),m=n(126),h=n(128),u=n(58),f=n(65),g=n(132),y=n(134),v=n(67),b=n(69),S=n(73),C=n(135),j=n(59),I=n(61),w=n(63),R=n(70),k=function(){function AppModule(){}return AppModule=o([r.NgModule({imports:[a.BrowserModule,s.FormsModule,l.HttpModule,d.MdlModule,p.routing],declarations:[m.AppComponent,u.ParameteriseComponent,h.PlotComponent,f.PageNotFoundComponent,g.WidthLengthTableComponent,y.JsonInputComponent,C.MyJsonPipe,v.NotYetImplimentedComponent,b.HomeComponent,S.DicomComponent],providers:[j.ElectronApiService,I.DataService,w.TitleService,c.Title,R.LocalStorageService],bootstrap:[m.AppComponent]}),i("design:paramtypes",[])],AppModule)}();t.AppModule=k},29:function(e,t,n){"use strict";var o=n(30),i=n(58),r=n(65),a=n(67),s=n(69),l=n(73),c=[{path:"home",component:s.HomeComponent,data:{title:"Home"}},{path:"export-import",component:a.NotYetImplimentedComponent},{path:"specifications",component:a.NotYetImplimentedComponent},{path:"dicom",component:l.DicomComponent},{path:"parameterise",component:i.ParameteriseComponent},{path:"model",component:a.NotYetImplimentedComponent},{path:"",component:s.HomeComponent},{path:"**",component:r.PageNotFoundComponent}];t.appRoutingProviders=[],t.routing=o.RouterModule.forRoot(c)},58:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=n(3),a=n(59),s=n(61),l=n(63),c=n(62),p=function(){function ParameteriseComponent(e,t,n){this.electronApiService=e,this.dataService=t,this.myTitleService=n,this.parameterisation={insert:{x:[0],y:[0]},width:null,length:null,circle:null,ellipse:null},this.jsonValid=!0,this.serverResponseValid=!0,this.dataInFlight=!1,this.submitDisabled=!1,this.refreshJsonInput=!1}return ParameteriseComponent.prototype.getData=function(){var e=localStorage.last_parameterisation;e?this.parameterisationFromLocalStorage(e):this.loadDemoData()},ParameteriseComponent.prototype.loadDemoData=function(){var e=JSON.parse(JSON.stringify(c.DEMO_PARAMETERISE_INPUT));this.insertUpdated(e.insert),this.jsonInputComponent.refresh=!0},ParameteriseComponent.prototype.onSubmit=function(){var e=this;this.dataInFlight=!0,this.checkSubmitButton(),this.electronApiService.parameteriseInsert(JSON.stringify(this.parameterisation.insert)).then(function(t){e.parameterisation.circle=t.circle,e.parameterisation.ellipse=t.ellipse,e.parameterisation.width=t.width,e.parameterisation.length=t.length,e.dataInFlight=!1,e.serverResponseValid=!0,e.checkSubmitButton(),localStorage.setItem(JSON.stringify(e.parameterisation.insert),JSON.stringify(e.parameterisation)),localStorage.setItem("last_parameterisation",JSON.stringify(e.parameterisation))})},ParameteriseComponent.prototype.parameterisationFromLocalStorage=function(e){var t=JSON.parse(e);this.parameterisation.insert=t.insert,this.parameterisation.width=t.width,this.parameterisation.length=t.length,this.parameterisation.circle=t.circle,this.parameterisation.ellipse=t.ellipse},ParameteriseComponent.prototype.insertUpdated=function(e){var t=localStorage.getItem(JSON.stringify(e));t?this.parameterisationFromLocalStorage(t):(this.parameterisation.insert=e,this.parameterisation.width=null,this.parameterisation.length=null,this.parameterisation.circle=null,this.parameterisation.ellipse=null)},ParameteriseComponent.prototype.onJsonStatusChange=function(e){this.jsonValid=e,this.checkSubmitButton()},ParameteriseComponent.prototype.checkSubmitButton=function(){this.dataInFlight||!this.jsonValid?this.submitDisabled=!0:this.submitDisabled=!1},ParameteriseComponent.prototype.ngOnInit=function(){this.getData(),this.myTitleService.setTitle("Parameterisation")},o([r.ViewChild("jsonInput"),i("design:type",Object)],ParameteriseComponent.prototype,"jsonInputComponent",void 0),ParameteriseComponent=o([r.Component({selector:"my-parameterise",template:n(64)}),i("design:paramtypes",[a.ElectronApiService,s.DataService,l.TitleService])],ParameteriseComponent)}();t.ParameteriseComponent=p},59:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=n(3),a=n(28);n(60);var s=function(){function ElectronApiService(e){this.http=e,this.parameteriseURL="http://electronapi.simonbiggs.net/parameterise",this.wakeUpURL="http://electronapi.simonbiggs.net/wakeup"}return ElectronApiService.prototype.wakeUpServer=function(){return this.http.get(this.wakeUpURL).toPromise()},ElectronApiService.prototype.parameteriseInsert=function(e){return this.http.post(this.parameteriseURL,e).toPromise().then(function(e){return e.json()})["catch"](this.handleError)},ElectronApiService.prototype.handleError=function(e){return console.error("An error occurred",e),Promise.reject(e.message||e)},ElectronApiService=o([r.Injectable(),i("design:paramtypes",[a.Http])],ElectronApiService)}();t.ElectronApiService=s},61:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=n(3),a=n(62),s=function(){function DataService(){}return DataService.prototype.getParameterisationData=function(){return Promise.resolve(a.DEMO_PARAMETERISE_INPUT)},DataService=o([r.Injectable(),i("design:paramtypes",[])],DataService)}();t.DataService=s},62:function(e,t){"use strict";var n={x:[.99,-.14,-1,-1.73,-2.56,-3.17,-3.49,-3.57,-3.17,-2.52,-1.76,-1.04,-.17,.77,1.63,2.36,2.79,2.91,3.04,3.22,3.34,3.37,3.08,2.54,1.88,1.02,.99],y:[5.05,4.98,4.42,3.24,1.68,.6,-.64,-1.48,-2.38,-3.77,-4.81,-5.26,-5.51,-5.58,-5.23,-4.64,-3.77,-2.77,-1.68,-.29,1.23,2.68,3.8,4.6,5.01,5.08,5.05]};t.DEMO_PARAMETERISE_INPUT={insert:n,circle:null,ellipse:null,width:null,length:null}},63:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=n(3),a=function(){function TitleService(){this.title="Home"}return TitleService.prototype.getTitle=function(){return this.title},TitleService.prototype.setTitle=function(e){this.title=e},TitleService=o([r.Injectable(),i("design:paramtypes",[])],TitleService)}();t.TitleService=a},64:function(e,t){e.exports='<div class="mdl-grid">\n  <div class="mdl-cell mdl-cell--12-col">\n    <p>Parameterisations are saved within your browser\'s local storage.</p>\n  </div>\n</div>\n<div class="mdl-grid">\n    <div class="mdl-cell mdl-cell--6-col">\n    <my-json-input #jsonInput\n      [insert]="parameterisation.insert"\n      [jsonDisabled]="dataInFlight"\n      (insertUpdated)="insertUpdated($event)"\n      (jsonStatus)="onJsonStatusChange($event)">\n    </my-json-input>\n\n    <div class="mdl-grid">\n      <div class="mdl-cell mdl-cell--6-col">\n        <button\n          mdl-button mdl-button-type="raised" \n          mdl-colored="primary" \n          mdl-ripple\n          [disabled]="dataInFlight"\n          (click)="loadDemoData()">Load Demo Data            \n        </button>\n        <button\n          mdl-button mdl-button-type="raised" \n          mdl-colored="primary" \n          mdl-ripple\n          [disabled]="submitDisabled"\n          (click)="onSubmit()">Submit            \n        </button>\n        <div [hidden]="serverResponseValid">\n          {{serverErrorMessage}}\n        </div>\n      </div>\n      <div class="mdl-cell mdl-cell--6-col">\n        <my-width-length-table\n          [width]="parameterisation.width"\n          [length]="parameterisation.length"\n          [enabled]="jsonValid">\n        </my-width-length-table>\n      </div>\n    </div>\n\n    </div>\n    <div class="mdl-cell mdl-cell--6-col">\n      <my-plot \n        [insert]="parameterisation.insert"\n        [circle]="parameterisation.circle"\n        [ellipse]="parameterisation.ellipse"\n        [enabled]="jsonValid">\n      </my-plot>\n\n    </div>\n</div>\n'},65:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=n(3),a=function(){function PageNotFoundComponent(){}return PageNotFoundComponent=o([r.Component({selector:"my-page-not-found",template:n(66)}),i("design:paramtypes",[])],PageNotFoundComponent)}();t.PageNotFoundComponent=a},66:function(e,t){e.exports='<div class="mdl-grid">\n  <div class="mdl-cell mdl-cell--12-col">\n    This page has not been found. Please provide feedback ...\n  </div>\n</div>'},67:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=n(3),a=function(){function NotYetImplimentedComponent(){}return NotYetImplimentedComponent=o([r.Component({selector:"my-not-yet-implimented",template:n(68)}),i("design:paramtypes",[])],NotYetImplimentedComponent)}();t.NotYetImplimentedComponent=a},68:function(e,t){e.exports='<div class="mdl-grid">\n  <div class="mdl-cell mdl-cell--12-col">\n    Due to this web app being a work in progress this page is not yet implimented.\n  </div>\n</div>'},69:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=n(3),a=n(63),s=n(70),l=function(){function HomeComponent(e,t){this.myTitleService=e,this.myLocalStorageService=t}return HomeComponent.prototype.ngOnInit=function(){this.myTitleService.setTitle("Home"),this.testLocalStorage=this.myLocalStorageService.isSupported,this.usedLocalStorageSpace=this.myLocalStorageService.getUsedSpace()},HomeComponent.prototype.testRemainingStorage=function(){this.remainingLocalStorageSpace=this.myLocalStorageService.getRemainingSpace()},HomeComponent=o([r.Component({selector:"my-home",template:n(72)}),i("design:paramtypes",[a.TitleService,s.LocalStorageService])],HomeComponent)}();t.HomeComponent=l},70:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=n(3),a=n(71),s=function(){function LocalStorageService(){this.isSupported=a.LocalStorage.isSupported,this.hasItem=a.LocalStorage.hasItem,this.getRemainingSpace=a.LocalStorage.getRemainingSpace,this.getMaximumSpace=a.LocalStorage.getMaximumSpace,this.getUsedSpace=a.LocalStorage.getUsedSpace,this.getItemUsedSpace=a.LocalStorage.getItemUsedSpace,this.getBackup=a.LocalStorage.getBackup,this.applyBackup=a.LocalStorage.applyBackup,this.consoleInfo=a.LocalStorage.consoleInfo}return LocalStorageService=o([r.Injectable(),i("design:paramtypes",[])],LocalStorageService)}();t.LocalStorageService=s},71:function(e,t){"use strict";var n;!function(e){function hasItem(e){return null!==localStorage.getItem(e)}function getRemainingSpace(){for(var e=localStorage.getItem(""),t=!0,n="1",o="",i="";;)try{i=o+n,localStorage.setItem("",i),o=i,t&&(n+=n)}catch(r){if(n.length<2)break;t=!1,n=n.substr(n.length/2)}return null===e?localStorage.removeItem(""):localStorage.setItem("",e),o.length}function getMaximumSpace(){var e=getBackup();localStorage.clear();var t=getRemainingSpace();return applyBackup(e),t}function getUsedSpace(){for(var e=0,t=0;t<localStorage.length;++t){var n=localStorage.key(t),o=localStorage.getItem(n);e+=n.length+o.length}return e}function getItemUsedSpace(e){var t=localStorage.getItem(e);return null===t?NaN:e.length+t.length}function getBackup(){for(var e={},t=0;t<localStorage.length;++t){var n=localStorage.key(t),o=localStorage.getItem(n);e[n]=o}return e}function applyBackup(e,t,n){void 0===t&&(t=!0),void 0===n&&(n=!0),1==t&&localStorage.clear();for(var o in e)if(n!==!1||void 0===e[o]){var i=e[o];localStorage.setItem(o,i)}}function consoleInfo(e){void 0===e&&(e=!1);for(var t=0,n=0,o=0;o<localStorage.length;++o){var i=localStorage.key(o),r=localStorage.getItem(i);console.log(t,i,r),n+=i.length+r.length,t++}if(console.log("Total entries:",t),console.log("Total size:",n),e===!0){var a=getMaximumSpace();console.log("Total size:",a)}}e.isSupported=function(){try{var e=localStorage.getItem("");return localStorage.removeItem(""),localStorage.setItem("",e),null===e?localStorage.removeItem(""):localStorage.setItem("",e),!0}catch(t){return!1}}(),e.hasItem=hasItem,e.getRemainingSpace=getRemainingSpace,e.getMaximumSpace=getMaximumSpace,e.getUsedSpace=getUsedSpace,e.getItemUsedSpace=getItemUsedSpace,e.getBackup=getBackup,e.applyBackup=applyBackup,e.consoleInfo=consoleInfo}(n=t.LocalStorage||(t.LocalStorage={}))},72:function(e,t){e.exports='<div class="mdl-grid">\n  <div class="mdl-cell mdl-cell--6-col">\n    <h4>Currently implemented</h4>\n    Currently the loading of shapes from Dicom and parameterising them have been implemented. They are still a work in progress\n    however they do have basic functionality. Please navigate to these sections using the navigation menu.\n\n    <h4>Local storage tests</h4>\n    <p></p>\n\n    <div *ngIf="testLocalStorage">\n      <p>Your browser supports local storage. You currently have {{usedLocalStorageSpace}} B of used space. Most browsers support\n        5 MB.\n      </p>\n\n      <p>To check your remaining storage press the button below. Warning, this might be slow.</p>\n      <button mdl-button mdl-button-type="raised" mdl-colored="primary" mdl-ripple (click)="testRemainingStorage()">Test remaining local storage           \n      </button>\n      <div *ngIf="remainingLocalStorageSpace">\n        <p>You have {{remainingLocalStorageSpace}} B of local storage remaining which is available for use by this webapp.</p>\n      </div>\n    </div>\n    <div *ngIf="!testLocalStorage">\n      <p>\n        This webapp relies upon local storage working within your browser. Your browser does not support local storage. Please download\n        and use a modern standards compliant browser such as\n        <a href="https://www.google.com.au/chrome/browser/desktop/">Chrome</a> or\n        <a href="https://www.mozilla.org/en-GB/firefox/new/">Firefox</a> to use this webapp.\n      </p>\n    </div>\n\n\n    <h4>Brief overview</h4>\n\n    <h4>Paper(s?)</h4>\n\n\n    <h4>Detailed instructions</h4>\n\n  </div>\n  <div class="mdl-cell mdl-cell--6-col">\n\n    <h4>Source code</h4>\n    <p>\n      For the purpose of coding transparency and to enable the user to take responsibility for the code themselves any redistribution\n      or derivative works of this web app need to include the source code of any additions made and need to include a way\n      for users to easily access the source code of each of the components used or linked to.\n    </p>\n\n    <h5>Server Code</h5>\n\n    <h6>Base Electron Insert Factor Source Code</h6>\n    <p>\n      The python file which does the shape parameterisation and insert factor modelling which is used by the server is found here:\n      <a href="https://github.com/SimonBiggs/electronfactor-server/blob/master/electroninserts.py">\n              https://github.com/SimonBiggs/electronfactor-server/blob/master/electroninserts.py</a>\n    </p>\n\n    <h6>Tornado REST API</h6>\n    <p>\n      The Tornado REST API is found here:\n      <a href="https://github.com/SimonBiggs/electronfactor-server/blob/master/main.py">\n              https://github.com/SimonBiggs/electronfactor-server/blob/master/main.py</a>\n    </p>\n\n    <h6>Heroku App code</h6>\n    <p>\n      The code to make the heroku app is found here:\n      <a href="https://github.com/SimonBiggs/electronfactor-server">\n              https://github.com/SimonBiggs/electronfactor-server</a>\n    </p>\n\n    <h5>Web App Code</h5>\n    <p>\n      The source code for this web app is found here:\n      <a href="https://github.com/SimonBiggs/electroninserts-webapp">\n            https://github.com/SimonBiggs/electroninserts-webapp</a>\n    </p>\n\n    <h5>Libraries used</h5>\n    <h6>Bokehjs</h6>\n    <p>\n      The bokehjs library is used for plots. Documentation can be found here:\n      <a href="http://bokeh.pydata.org/en/latest/docs/user_guide/bokehjs.html#userguide-bokehjs">\n              http://bokeh.pydata.org/en/latest/docs/user_guide/bokehjs.html#userguide-bokehjs</a>\n    </p>\n    <p>\n      Source code can be found here:\n      <a href="https://github.com/bokeh/bokeh/tree/master/bokehjs">\n              https://github.com/bokeh/bokeh/tree/master/bokehjs</a>\n    </p>\n\n    <h6>dcmjs</h6>\n    <p>\n      The dcmjs library is used for reading dicom files within javascript. Website can be found here:\n      <a href="http://dcmjs.org/">\n              http://dcmjs.org/</a>\n    </p>\n    <p>\n      Source code can be found here:\n      <a href="https://github.com/commontk/dcmjs">\n              https://github.com/commontk/dcmjs</a>\n    </p>\n\n    <h6>Angular2</h6>\n    <p>\n      This interface was built using Angular2. Documentation can be found here:\n      <a href="https://angular.io/docs/ts/latest/">\n              https://angular.io/docs/ts/latest/</a>\n    </p>\n    <p>\n      Source code can be found here:\n      <a href="https://github.com/angular/angular">\n              https://github.com/angular/angular</a>\n    </p>\n    <h6>Remaining libraries</h6>\n    <p>\n      For all remaining libraries used please see the npm package.json file:\n      <a href="https://github.com/SimonBiggs/electroninserts-webapp/blob/master/package.json">\n              https://github.com/SimonBiggs/electroninserts-webapp/blob/master/package.json</a>\n    </p>\n    <p>\n      And the index file for various imports:\n      <a href="https://github.com/SimonBiggs/electroninserts-webapp/blob/master/src/public/index.html">\n              https://github.com/SimonBiggs/electroninserts-webapp/blob/master/src/public/index.html</a>\n    </p>\n  </div>\n\n\n</div>'},73:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=n(3),a=n(63),s=function(){function DicomComponent(e){this.myTitleService=e,this.parameterisation={insert:{x:[0],y:[0]},width:null,length:null,circle:null,ellipse:null},this.rawBlockData="",this.vectorData="",this.parseDataString="",this.dicomExitCode=1,this.header="",this.reader=new FileReader,this.firstLoad=!0}return DicomComponent.prototype.ngOnInit=function(){var e=this;this.reader.onload=function(){return e.onceFileIsLoaded()},localStorage.removeItem("dicomPrint"),Module.print=this.sendDicomDumpToLocalStorage,this.myTitleService.setTitle("Dicom")},DicomComponent.prototype.sendDicomDumpToLocalStorage=function(e){var t=localStorage.getItem("dicomPrint");localStorage.setItem("dicomPrint",t+e)},DicomComponent.prototype.updateDicomWarning=function(){var e=Number(localStorage.getItem("dicomLoadStatus"));0==e?(this.getBlockDataButton.disabled=!1,this.dicomWarning=null):(this.getBlockDataButton.disabled=!0,this.dicomWarning="An error occured while trying to find the block data within the provided Dicom file.")},DicomComponent.prototype.onceFileIsLoaded=function(){var e=new Int8Array(this.reader.result);console.log(e.length);var t="dicomfile";FS.isFile(t)&&FS.unlink(t),FS.writeFile(t,e,{encoding:"binary"});var n=Module.exit;Module.exit=function(e){localStorage.setItem("dicomLoadStatus",e),n(e)},Module.callMain(["dcmdump",t,"--print-all"]),Module.exit=n,console.log(Module),this.updateDicomWarning(),FS.unlink(t)},DicomComponent.prototype.openFile=function(e){console.log(e.srcElement.files);var t=e.srcElement.files[0];localStorage.removeItem("dicomPrint"),localStorage.setItem("dicomPrint"," "),this.reader.readAsArrayBuffer(t)},DicomComponent.prototype.getBlockData=function(){var e=localStorage.getItem("dicomPrint");this.rawBlockData=/\(300a,0106\) DS \[[\\\d\.-]*\]/.exec(e).toString(),this.parseDataString=/\[[\\\d\.-]*\]/.exec(this.rawBlockData).toString(),this.parseDataString=this.parseDataString.replace(/\\/g,", "),console.log(this.parseDataString);for(var t=JSON.parse('{ "data": '+this.parseDataString+"}"),n=[],o=[],i=0,r=0,a=t.data;r<a.length;r++){var s=a[r];i%2==0?n.push(parseFloat((s/10).toFixed(2))):o.push(parseFloat((s/10).toFixed(2))),i++}this.dicomX=n,this.dicomY=o,this.dicomInsert={x:this.dicomX,y:this.dicomY}},DicomComponent.prototype.sendToParameterisation=function(){this.insertUpdated(this.dicomInsert),localStorage.setItem("last_parameterisation",JSON.stringify(this.parameterisation))},DicomComponent.prototype.parameterisationFromLocalStorage=function(e){var t=JSON.parse(e);this.parameterisation.insert=t.insert,this.parameterisation.width=t.width,this.parameterisation.length=t.length,this.parameterisation.circle=t.circle,this.parameterisation.ellipse=t.ellipse},DicomComponent.prototype.insertUpdated=function(e){var t=localStorage.getItem(JSON.stringify(e));t?this.parameterisationFromLocalStorage(t):(this.parameterisation.insert=e,this.parameterisation.width=null,this.parameterisation.length=null,this.parameterisation.circle=null,this.parameterisation.ellipse=null)},o([r.ViewChild("dicomOutput"),i("design:type",Object)],DicomComponent.prototype,"dicomOutputDir",void 0),o([r.ViewChild("getBlockDataButton"),i("design:type",Object)],DicomComponent.prototype,"getBlockDataButton",void 0),DicomComponent=o([r.Component({selector:"my-dicom",template:n(74),styles:["./dicom.component.css"]}),i("design:paramtypes",[a.TitleService])],DicomComponent)}();t.DicomComponent=s},74:function(e,t){e.exports='<div class="mdl-grid">\n  <div class="mdl-cell mdl-cell--12-col">\n    <p>This Dicom loader does not send the Dicom file off to a server. The entire reading of the dicom file is done within javascript.\n    You can confirm this yourself by using the chrome web browser, pressing \'Ctrl + Shift + I\'\n    and then clicking on the network tab. When the file is chosen, then the block data is pulled and sent to parameterisation,\n    at no point in this interaction is there network traffic.</p>\n\n    <p>The only data that will be sent to the server will be on either the paremeterisation tab or the model tab, and this data will\n      just consist of x and y coordinates or widths, lengths, and factors.\n    </p>\n  <div>\n</div>\n<div class="mdl-grid">\n  <div class="mdl-cell mdl-cell--6-col">\n    <div>At this current point in time only one shape can be loaded from a Dicom file.</div>\n    <input type=\'file\' (change)=\'openFile($event)\'>\n    <div *ngIf="dicomWarning">{{dicomWarning}}</div>\n  </div>\n\n  <div class="mdl-cell mdl-cell--6-col">\n    <button #getBlockDataButton\n      mdl-button mdl-button-type="raised" \n      mdl-colored="primary" \n      mdl-ripple\n      [disabled]="true"\n      (click)="getBlockData()">Get Dicom Block Data            \n    </button>\n\n    \n  </div>\n\n  <div class="mdl-cell mdl-cell--6-col">\n    <div>{{rawBlockData}}</div>\n    <!--<div *ngIf="parseDataString">{{parseDataString}}</div>-->\n    <div *ngIf="dicomInsert">{{dicomInsert | json}}\n\n      <button\n        mdl-button mdl-button-type="raised" \n        mdl-colored="primary" \n        mdl-ripple\n        (click)="sendToParameterisation()">Send to parameterisation           \n      </button>\n    </div>\n  </div>\n\n\n\n\n</div>'},126:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=n(3),a=n(30),s=n(21),l=n(59),c=n(63),p=function(){function AppComponent(e,t,n,o){var i=this;this.electronApiService=e,this.myTitleService=t,this.router=n,this.title=o,n.events.filter(function(e){return e instanceof a.NavigationEnd}).subscribe(function(){i.pageTitle=i.myTitleService.getTitle(),i.title.setTitle(i.myTitleService.getTitle()+" | Electron Insert Factor Modelling")})}return AppComponent.prototype.ngOnInit=function(){var e=sessionStorage.redirect;delete sessionStorage.redirect,e&&e!=location.href&&(history.replaceState(null,null,e),this.router.navigate([e])),this.electronApiService.wakeUpServer(),this.pageTitle=this.myTitleService.getTitle(),this.title.setTitle(this.myTitleService.getTitle()+" | Electron Insert Factor Modelling")},AppComponent=o([r.Component({selector:"my-app",template:n(127)}),i("design:paramtypes",[l.ElectronApiService,c.TitleService,a.Router,s.Title])],AppComponent)}();t.AppComponent=p},127:function(e,t){e.exports='<mdl-layout mdl-layout-fixed-drawer mdl-layout-fixed-header>\n  <mdl-layout-header>\n    <mdl-layout-header-row>\n      <mdl-layout-title>{{pageTitle}}</mdl-layout-title>\n    </mdl-layout-header-row>\n  </mdl-layout-header>\n  <mdl-layout-drawer>\n    <mdl-layout-title>Electron Factors</mdl-layout-title>\n    <nav class="mdl-navigation">\n      <a class="mdl-navigation__link" routerLink="/home" routerLinkActive="active" href>Home</a>\n      <a class="mdl-navigation__link" routerLink="/export-import" routerLinkActive="active" href>Export / Import</a>\n      <a class="mdl-navigation__link" routerLink="/specifications" routerLinkActive="active" href>Machine specifications</a>\n      <a class="mdl-navigation__link" routerLink="/dicom" routerLinkActive="active" href>Dicom shape extraction</a>\n      <a class="mdl-navigation__link" routerLink="/parameterise" routerLinkActive="active" href>Parameterise inserts</a>\n      <a class="mdl-navigation__link" routerLink="/model" routerLinkActive="active" href>Model insert factors</a>\n    </nav>\n  </mdl-layout-drawer>\n  <mdl-layout-content>\n\n    <router-outlet></router-outlet>\n\n  </mdl-layout-content>\n</mdl-layout>'},128:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=n(3),a=n(129),s=function(){function PlotComponent(){this.jsonValid=!0,this.plt=Bokeh.Plotting,this.tools="pan,crosshair,wheel_zoom,box_zoom,reset,save",this.xrange=Bokeh.Range1d(-6,6),this.yrange=Bokeh.Range1d(-6,6),this.fig=this.plt.figure({title:"Electron Insert Plot",tools:this.tools,x_range:this.xrange,y_range:this.yrange,plot_width:300,plot_height:300}),this.source=new Bokeh.ColumnDataSource,this.doc=new Bokeh.Document}return PlotComponent.prototype.ngOnChanges=function(){this.jsonValid=!1,this.tempSource={xs:[[0],[0],[0]],ys:[[0],[0],[0]],colour:["navy","firebrick","green"]};var e=[],t=[];this.enabled&&(this.insert&&"x"in this.insert&&"y"in this.insert&&(this.tempSource.xs[0]=this.insert.x.concat(this.insert.x[0]),this.tempSource.ys[0]=this.insert.y.concat(this.insert.y[0]),e=e.concat(this.tempSource.xs[0]),t=t.concat(this.tempSource.ys[0])),this.circle&&"x"in this.circle&&"y"in this.circle&&(this.tempSource.xs[1]=this.circle.x,this.tempSource.ys[1]=this.circle.y,e=e.concat(this.tempSource.xs[1]),t=t.concat(this.tempSource.ys[1])),this.ellipse&&"x"in this.ellipse&&"y"in this.ellipse&&(this.tempSource.xs[2]=this.ellipse.x,this.tempSource.ys[2]=this.ellipse.y,e=e.concat(this.tempSource.xs[2]),t=t.concat(this.tempSource.ys[2])));var n=Math.max.apply(Math,e),o=Math.min.apply(Math,e),i=Math.max.apply(Math,t),r=Math.min.apply(Math,t),a=1.1*Math.max(n-o,i-r),s=(n+o)/2+a/2,l=(n+o)/2-a/2,c=(i+r)/2+a/2,p=(i+r)/2-a/2;this.fig.attributes.x_range.start=l,this.fig.attributes.x_range.end=s,this.fig.attributes.y_range.start=p,this.fig.attributes.y_range.end=c,this.source.data=this.tempSource},PlotComponent.prototype.ngAfterViewInit=function(){this.fig.multi_line({field:"xs"},{field:"ys"},{source:this.source,line_width:2,color:{field:"colour"}}),this.doc.add_root(this.fig),Bokeh.embed.add_document_standalone(this.doc,this.bokehplot.nativeElement);
},o([r.Input(),i("design:type",a.Coordinates)],PlotComponent.prototype,"insert",void 0),o([r.Input(),i("design:type",a.Coordinates)],PlotComponent.prototype,"circle",void 0),o([r.Input(),i("design:type",a.Coordinates)],PlotComponent.prototype,"ellipse",void 0),o([r.Input(),i("design:type",Boolean)],PlotComponent.prototype,"enabled",void 0),o([r.ViewChild("bokehplot"),i("design:type",Object)],PlotComponent.prototype,"bokehplot",void 0),PlotComponent=o([r.Component({selector:"my-plot",template:n(130),styles:[n(131)]}),i("design:paramtypes",[])],PlotComponent)}();t.PlotComponent=s},129:function(e,t){"use strict";var n=function(){function Coordinates(e,t){this.x=e,this.y=t}return Coordinates}();t.Coordinates=n},130:function(e,t){e.exports='\n  <div class="bk-root" style="height:300px">\n    <div #bokehplot></div>\n  </div>\n\n\n  <div [hidden]="jsonValid" class="alert alert-danger">\n      {{jsonErrorMessage}}\n  </div>\n'},131:function(e,t){e.exports=""},132:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=n(3),a=n(75),s=function(){function WidthLengthTableComponent(){this.tableData=[{width:null,length:null}],this.tableModel=new a.MdlDefaultTableModel([{key:"width",name:"Width",sortable:!0,numeric:!0},{key:"length",name:"Length",sortable:!0,numeric:!0}])}return WidthLengthTableComponent.prototype.ngOnChanges=function(){this.enabled?(this.tableData[0].width=this.width,this.tableData[0].length=this.length):(this.tableData[0].width=null,this.tableData[0].length=null)},WidthLengthTableComponent.prototype.ngOnInit=function(){this.tableModel.addAll(this.tableData)},o([r.Input(),i("design:type",Number)],WidthLengthTableComponent.prototype,"width",void 0),o([r.Input(),i("design:type",Number)],WidthLengthTableComponent.prototype,"length",void 0),o([r.Input(),i("design:type",Boolean)],WidthLengthTableComponent.prototype,"enabled",void 0),WidthLengthTableComponent=o([r.Component({selector:"my-width-length-table",template:n(133)}),i("design:paramtypes",[])],WidthLengthTableComponent)}();t.WidthLengthTableComponent=s},133:function(e,t){e.exports='<mdl-table mdl-shadow="2"\n  [table-model]="tableModel">\n</mdl-table>'},134:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=n(3),a=n(135),s=n(129),l=function(){function JsonInputComponent(){this.insertUpdated=new r.EventEmitter,this.jsonStatus=new r.EventEmitter,this.jsonValid=!0}return JsonInputComponent.prototype.onInput=function(e){this.parseAndCheckJSON(e),this.insertUpdated.emit(this.insert)},JsonInputComponent.prototype.ngOnChanges=function(){this.refresh&&(this.jsonInputDir.value=(new a.MyJsonPipe).transform(this.insert),this.parseAndCheckJSON(this.jsonInputDir.value),this.refresh=!1)},JsonInputComponent.prototype.parseAndCheckJSON=function(e){var t=this.jsonValid;this.jsonValid=!1;try{var n=JSON.parse(e);if("x"in n&&"y"in n)if(n.x.length===n.y.length){var o=n.x,i=n.y,r={x:o,y:i};this.insert=r,this.jsonValid=!0}else this.jsonErrorMessage="The length of x doesn't match the length of y.";else this.jsonErrorMessage="Either x or y is missing."}catch(a){this.jsonErrorMessage="Error in JSON input. "+a}finally{this.jsonValid!=t&&this.jsonStatus.emit(this.jsonValid)}},o([r.Input(),i("design:type",s.Coordinates)],JsonInputComponent.prototype,"insert",void 0),o([r.Input(),i("design:type",Boolean)],JsonInputComponent.prototype,"jsonDisabled",void 0),o([r.Input(),i("design:type",Boolean)],JsonInputComponent.prototype,"refresh",void 0),o([r.Output(),i("design:type",Object)],JsonInputComponent.prototype,"insertUpdated",void 0),o([r.Output(),i("design:type",Object)],JsonInputComponent.prototype,"jsonStatus",void 0),o([r.ViewChild("jsonInput"),i("design:type",Object)],JsonInputComponent.prototype,"jsonInputDir",void 0),JsonInputComponent=o([r.Component({selector:"my-json-input",template:n(136)}),i("design:paramtypes",[])],JsonInputComponent)}();t.JsonInputComponent=l},135:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=n(3),a=function(){function MyJsonPipe(){}return MyJsonPipe.prototype.transform=function(e){var t=JSON.stringify(e);return t=t.replace(/,/g,", ")},MyJsonPipe=o([r.Pipe({name:"myJson",pure:!1}),i("design:paramtypes",[])],MyJsonPipe)}();t.MyJsonPipe=a},136:function(e,t){e.exports='<mdl-textfield #jsonInput\n  [value]="insert | myJson"\n  (input)="onInput($event.target.value)"\n  rows="8" \n  style="width:100%"\n  [disabled]=jsonDisabled>\n</mdl-textfield>\n<div *ngIf="!jsonValid">\n  {{jsonErrorMessage}}\n</div>'}});
//# sourceMappingURL=app.72ecb74d6f3686fa7bec.js.map