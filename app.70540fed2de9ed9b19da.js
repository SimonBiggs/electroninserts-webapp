webpackJsonp([0],{0:function(t,e,n){"use strict";var o=n(1),i=n(3),l=n(24);i.enableProdMode(),o.platformBrowserDynamic().bootstrapModule(l.AppModule)},24:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var i,l=arguments.length,r=l<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(r=(l<3?i(r):l>3?i(e,n,r):i(e,n))||r);return l>3&&r&&Object.defineProperty(e,n,r),r},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},l=n(3),r=n(22),a=n(25),s=n(29),p=n(30),c=n(81),d=n(86),h=n(82),m=function(){function AppModule(){}return AppModule=o([l.NgModule({imports:[r.BrowserModule,a.FormsModule,s.HttpModule,p.MdlModule],declarations:[c.AppComponent,d.PlotComponent],providers:[h.ElectronApiService],bootstrap:[c.AppComponent]}),i("design:paramtypes",[])],AppModule)}();e.AppModule=m},81:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var i,l=arguments.length,r=l<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(r=(l<3?i(r):l>3?i(e,n,r):i(e,n))||r);return l>3&&r&&Object.defineProperty(e,n,r),r},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},l=n(3),r=n(30),a=n(82),s=function(){function AppComponent(t){this.electronApiService=t,this.parameteriseInput='{\n  "x": [\n    0.99, -0.14, -1.0, -1.73, -2.56, -3.17, -3.49,\n    -3.57, -3.17, -2.52, -1.76, -1.04, -0.17,\n    0.77, 1.63, 2.36, 2.79, 2.91, 3.04, 3.22,\n    3.34, 3.37, 3.08, 2.54, 1.88, 1.02, 0.99],\n  "y": [\n    5.05, 4.98, 4.42, 3.24, 1.68, 0.6, -0.64,\n    -1.48, -2.38, -3.77, -4.81,  -5.26, -5.51,\n    -5.58, -5.23, -4.64, -3.77, -2.77, -1.68,\n    -0.29, 1.23, 2.68, 3.8, 4.6, 5.01, 5.08, \n    5.05]\n}',this.jsonValid=!0,this.circle={},this.ellipse={},this.dataInFlight=!1,this.tableData=[{width:NaN,length:NaN}],this.tableModel=new r.MdlDefaultTableModel([{key:"width",name:"Width",sortable:!0,numeric:!0},{key:"length",name:"Length",sortable:!0,numeric:!0}])}return AppComponent.prototype.onSubmit=function(){var t=this;this.dataInFlight=!0,this.electronApiService.parameteriseInsert(this.parameteriseInput).then(function(e){t.parameterisationResult=e,t.addResultToTable(e),t.convertResultToDisplayCoords(e),t.dataInFlight=!1})},AppComponent.prototype.addResultToTable=function(t){this.tableData[0].width=t.width,this.tableData[0].length=t.length},AppComponent.prototype.convertResultToDisplayCoords=function(t){this.circle=t.circle,this.ellipse=t.ellipse},AppComponent.prototype.checkJSON=function(){this.jsonValid=!1;try{var t=JSON.parse(this.parameteriseInput);"x"in t&&"y"in t?(this.parsedJSON=t,this.parsedJSON.x.length===this.parsedJSON.y.length?this.jsonValid=!0:this.jsonErrorMessage="The length of x doesn't match the length of y."):this.jsonErrorMessage="Either x or y is missing."}catch(e){this.jsonErrorMessage="Error in JSON input. "+e}finally{}},AppComponent.prototype.ngOnInit=function(){this.electronApiService.wakeUpServer(),this.tableModel.addAll(this.tableData)},AppComponent=o([l.Component({selector:"my-app",styles:[n(84)],template:n(85)}),i("design:paramtypes",[a.ElectronApiService])],AppComponent)}();e.AppComponent=s},82:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var i,l=arguments.length,r=l<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(r=(l<3?i(r):l>3?i(e,n,r):i(e,n))||r);return l>3&&r&&Object.defineProperty(e,n,r),r},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},l=n(3),r=n(29);n(83);var a=function(){function ElectronApiService(t){this.http=t,this.parameteriseURL="http://electronapi.simonbiggs.net/parameterise",this.wakeUpURL="http://electronapi.simonbiggs.net/wakeup"}return ElectronApiService.prototype.wakeUpServer=function(){return this.http.get(this.wakeUpURL).toPromise()},ElectronApiService.prototype.parameteriseInsert=function(t){return this.http.post(this.parameteriseURL,t).toPromise().then(function(t){return t.json()})["catch"](this.handleError)},ElectronApiService.prototype.handleError=function(t){return console.error("An error occurred",t),Promise.reject(t.message||t)},ElectronApiService=o([l.Injectable(),i("design:paramtypes",[r.Http])],ElectronApiService)}();e.ElectronApiService=a},84:function(t,e){t.exports=".selected {\n  background-color: #CFD8DC !important;\n  color: white;\n}\n.heroes {\n  margin: 0 0 2em 0;\n  list-style-type: none;\n  padding: 0;\n  width: 15em;\n}\n.heroes li {\n  cursor: pointer;\n  position: relative;\n  left: 0;\n  background-color: #EEE;\n  margin: .5em;\n  padding: .3em 0;\n  height: 1.6em;\n  border-radius: 4px;\n}\n.heroes li.selected:hover {\n  background-color: #BBD8DC !important;\n  color: white;\n}\n.heroes li:hover {\n  color: #607D8B;\n  background-color: #DDD;\n  left: .1em;\n}\n.heroes .text {\n  position: relative;\n  top: -3px;\n}\n.heroes .badge {\n  display: inline-block;\n  font-size: small;\n  color: white;\n  padding: 0.8em 0.7em 0 0.7em;\n  background-color: #607D8B;\n  line-height: 1em;\n  position: relative;\n  left: -1px;\n  top: -4px;\n  height: 1.8em;\n  margin-right: .8em;\n  border-radius: 4px 0 0 4px;\n}\n"},85:function(t,e){t.exports='<!--\n  \n<mdl-layout mdl-layout-fixed-header mdl-layout-tab-active-index="1">\n      <mdl-layout-header>\n         <mdl-layout-header-row>\n            <mdl-layout-title>Title</mdl-layout-title>\n         </mdl-layout-header-row>\n      </mdl-layout-header>\n      <mdl-layout-drawer>\n         <mdl-layout-title>Title</mdl-layout-title>\n      </mdl-layout-drawer>\n\n\n\n  <mdl-layout-content>\n    <mdl-layout-tab-panel mdl-layout-tab-panel-title="Dicom">\n\n    </mdl-layout-tab-panel>\n    <mdl-layout-tab-panel mdl-layout-tab-panel-title="Parameterise">\n      <div class="row">\n        <div class="col-xs-12 col-md-6">\n\n          <mdl-textfield \n            label="Parameterisation input" \n            [(ngModel)]="parameteriseInput" \n            rows="13" maxrows="13" \n            floating-label style="width:100%">\n          </mdl-textfield>\n\n          <button mdl-button mdl-button-type="raised" mdl-colored="primary" mdl-ripple (click)="onSubmit()">\n            Submit\n          </button>\n\n          <div *ngIf="parameterisationResult">\n            <p>Width: {{parameterisationResult.width}}</p>\n            <p>Length: {{parameterisationResult.length}}</p>\n          </div>\n\n        </div>\n        <div class="col-xs-12 col-md-6">\n          <div class="bk-root" style="height:300px">\n          <my-plot \n            [parameteriseInput]="parameteriseInput">\n          </my-plot>\n          </div>\n\n        </div>\n\n      </div>\n    </mdl-layout-tab-panel>\n    <mdl-layout-tab-panel mdl-layout-tab-panel-title="Model">\n\n    </mdl-layout-tab-panel>\n\n  </mdl-layout-content>\n</mdl-layout>\n\n\n-->\n\n<mdl-tabs mdl-ripple mdl-tab-active-index="1">\n\n    <mdl-tab-panel mdl-tab-panel-title="Dicom">\n    </mdl-tab-panel>\n\n    <mdl-tab-panel mdl-tab-panel-title="Parameterise">\n      <div class="row">\n        <div class="col-xs-12 col-sm-6">\n\n          <mdl-textfield \n            label="Parameterisation input" \n            [(ngModel)]="parameteriseInput" \n            rows="13" maxrows="13" \n            floating-label style="width:100%">\n          </mdl-textfield>\n\n          <button style="float: right;"\n            mdl-button mdl-button-type="raised" \n            mdl-colored="primary" \n            mdl-ripple\n            [disabled]="dataInFlight"\n            (click)="onSubmit()">Submit            \n          </button>\n\n          <mdl-table mdl-shadow="2"\n              [table-model]="tableModel">\n          </mdl-table>\n\n        </div>\n        <div class="col-xs-12 col-sm-6">\n          <div class="bk-root" style="height:300px">\n          <my-plot \n            [parameteriseInput]="parameteriseInput"\n            [circle]="circle"\n            [ellipse]="ellipse">\n          </my-plot>\n          </div>\n\n        </div>\n\n      </div>\n    </mdl-tab-panel>\n\n    <mdl-tab-panel mdl-tab-panel-title="Model">\n    </mdl-tab-panel>\n\n </mdl-tabs>'},86:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var i,l=arguments.length,r=l<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(r=(l<3?i(r):l>3?i(e,n,r):i(e,n))||r);return l>3&&r&&Object.defineProperty(e,n,r),r},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},l=n(3),r=function(){function PlotComponent(){this.jsonValid=!0,this.plt=Bokeh.Plotting,this.tools="pan,crosshair,wheel_zoom,box_zoom,reset,save",this.xrange=Bokeh.Range1d(-6,6),this.yrange=Bokeh.Range1d(-6,6),this.fig=this.plt.figure({title:"Electron Insert Plot",tools:this.tools,plot_width:300,plot_height:300,x_range:this.xrange,y_range:this.yrange}),this.source=new Bokeh.ColumnDataSource,this.doc=new Bokeh.Document}return PlotComponent.prototype.ngOnChanges=function(){this.jsonValid=!1,this.tempSource={xs:[[0],[0],[0]],ys:[[0],[0],[0]],colour:["navy","firebrick","green"]};try{var t=JSON.parse(this.parameteriseInput);"x"in t&&"y"in t?(this.parsedJSON=t,this.parsedJSON.x.length===this.parsedJSON.y.length?(this.tempSource.xs[0]=this.parsedJSON.x,this.tempSource.ys[0]=this.parsedJSON.y,this.jsonValid=!0):this.jsonErrorMessage="The length of x doesn't match the length of y."):this.jsonErrorMessage="Either x or y is missing."}catch(e){this.jsonErrorMessage="Error in JSON input. "+e}finally{}"x"in this.circle&&"y"in this.circle&&(this.tempSource.xs[1]=this.circle.x,this.tempSource.ys[1]=this.circle.y),"x"in this.ellipse&&"y"in this.ellipse&&(this.tempSource.xs[2]=this.ellipse.x,this.tempSource.ys[2]=this.ellipse.y),this.source.data=this.tempSource},PlotComponent.prototype.ngAfterViewInit=function(){this.ngOnChanges(),this.fig.multi_line({field:"xs"},{field:"ys"},{source:this.source,line_width:2,color:{field:"colour"}}),this.doc.add_root(this.fig),Bokeh.embed.add_document_standalone(this.doc,this.bokehplot.nativeElement)},o([l.Input(),i("design:type",String)],PlotComponent.prototype,"parameteriseInput",void 0),o([l.Input(),i("design:type",Object)],PlotComponent.prototype,"circle",void 0),o([l.Input(),i("design:type",Object)],PlotComponent.prototype,"ellipse",void 0),o([l.ViewChild("bokehplot"),i("design:type",Object)],PlotComponent.prototype,"bokehplot",void 0),PlotComponent=o([l.Component({selector:"my-plot",template:n(87),styles:[n(88)]}),i("design:paramtypes",[])],PlotComponent)}();e.PlotComponent=r},87:function(t,e){t.exports='\n  <div class="bk-root" style="height:300px">\n    <div #bokehplot></div>\n  </div>\n\n\n  <div [hidden]="jsonValid" class="alert alert-danger">\n      {{jsonErrorMessage}}\n  </div>\n'},88:function(t,e){t.exports=""}});
//# sourceMappingURL=app.70540fed2de9ed9b19da.js.map