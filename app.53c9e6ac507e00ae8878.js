webpackJsonp([0],{0:function(e,t,n){"use strict";var i=n(1),o=n(3),a=n(23);o.enableProdMode(),i.platformBrowserDynamic().bootstrapModule(a.AppModule)},23:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),r=n(21),l=n(24),s=n(28),c=n(21),d=n(29),p=n(114),m=n(169),h=n(171),u=n(58),f=n(65),g=n(175),y=n(177),b=n(180),v=n(67),S=n(71),w=n(73),C=n(75),I=n(77),k=n(182),D=n(184),M=n(186),x=n(178),R=n(59),j=n(61),_=n(63),P=n(68),O=function(){function AppModule(){}return AppModule=i([a.NgModule({imports:[r.BrowserModule,l.FormsModule,s.HttpModule,p.MdlModule,d.routing],declarations:[m.AppComponent,u.ParameteriseComponent,h.PlotComponent,f.PageNotFoundComponent,g.WidthLengthTableComponent,y.JsonInputComponent,x.MyJsonPipe,b.NotYetImplimentedComponent,v.HomeComponent,S.ModelComponent,w.ExportImportComponent,C.SpecificationsComponent,I.DicomComponent,D.SendToParameterisationComponent,k.JsonEditComponent,M.BokehPcolourComponent],providers:[R.ElectronApiService,j.DataService,_.TitleService,c.Title,P.LocalStorageService],bootstrap:[m.AppComponent]}),o("design:paramtypes",[])],AppModule)}();t.AppModule=O},29:function(e,t,n){"use strict";var i=n(30),o=n(58),a=n(65),r=n(67),l=n(71),s=n(73),c=n(75),d=n(77),p=[{path:"home",component:r.HomeComponent,data:{title:"Home"}},{path:"export-import",component:s.ExportImportComponent},{path:"specifications",component:c.SpecificationsComponent},{path:"dicom",component:d.DicomComponent},{path:"parameterise",component:o.ParameteriseComponent},{path:"model",component:l.ModelComponent},{path:"",component:r.HomeComponent},{path:"**",component:a.PageNotFoundComponent}];t.appRoutingProviders=[],t.routing=i.RouterModule.forRoot(p)},58:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),r=n(59),l=n(61),s=n(63),c=n(62),d=function(){function ParameteriseComponent(e,t,n){this.electronApiService=e,this.dataService=t,this.myTitleService=n,this.parameterisation={insert:{x:[0],y:[0]},width:null,length:null,circle:null,ellipse:null},this.jsonValid=!0,this.serverResponseValid=!0,this.dataInFlight=!1,this.submitDisabled=!1,this.refreshJsonInput=!1,this.insertData={machine:null,parameterisation:this.parameterisation,energy:null,applicator:null,ssd:null},this.machineExists=!1,this.machineSettingsExist=!1,this.modelExists=!1}return ParameteriseComponent.prototype.ngOnInit=function(){this.getData(),this.myTitleService.setTitle("Parameterisation"),this.parameteriseURL=localStorage.getItem("parameteriseURL"),null==this.parameteriseURL&&(this.parameteriseURL="http://electronapi.simonbiggs.net/parameterise"),this.machineSpecifications=JSON.parse(localStorage.getItem("specifications")),null==this.machineSpecifications&&(this.machineSpecifications={}),this.checkMachineSettings()},ParameteriseComponent.prototype.getData=function(){var e=localStorage.last_insertData;if(e){this.insertData=JSON.parse(e);var t=this.insertData.parameterisation.insert;this.insertUpdated(t),this.insertData.parameterisation=this.parameterisation}else this.loadDemoData()},ParameteriseComponent.prototype.loadDemoData=function(){var e=JSON.parse(JSON.stringify(c.DEMO_PARAMETERISE_INPUT));this.insertUpdated(e.insert),this.jsonInputComponent.refresh=!0,this.insertData={machine:null,parameterisation:this.parameterisation,energy:null,applicator:null,ssd:null}},ParameteriseComponent.prototype.sleep=function(e){return new Promise(function(t){return setTimeout(t,e)})},ParameteriseComponent.prototype.recursiveServerSubmit=function(){var e=this;this.electronApiService.sendToServer(this.parameteriseURL,JSON.stringify(this.parameterisation.insert)).then(function(t){e.parameterisation.circle=t.circle,e.parameterisation.ellipse=t.ellipse,e.parameterisation.width=t.width,e.parameterisation.length=t.length;var n=t.complete;n?(e.dataInFlight=!1,e.serverResponseValid=!0,e.checkSubmitButton(),localStorage.setItem(JSON.stringify(e.parameterisation.insert),JSON.stringify(e.parameterisation)),e.insertData.parameterisation=e.parameterisation,localStorage.setItem("last_insertData",JSON.stringify(e.insertData))):e.sleep(500).then(function(){return e.recursiveServerSubmit()})})},ParameteriseComponent.prototype.checkMachineSettings=function(){this.R50=null;var e=this.insertData.machine,t=this.insertData.energy,n=this.insertData.applicator,i=this.insertData.ssd;if(this.machineSpecifications[e]){var o=this.machineSpecifications[e];this.R50=o.R50[t],o.energy.indexOf(Number(t))>-1&&o.applicator.indexOf(String(n))>-1&&o.ssd.indexOf(Number(i))>-1?this.machineSettingsExist=!0:this.machineSettingsExist=!1,this.machineExists=!0}else this.machineExists=!1,this.machineSettingsExist=!1,this.modelExists=!1},ParameteriseComponent.prototype.insertDataChange=function(){localStorage.setItem("last_insertData",JSON.stringify(this.insertData)),this.checkMachineSettings()},ParameteriseComponent.prototype.onSubmit=function(){this.dataInFlight=!0,this.checkSubmitButton(),this.recursiveServerSubmit()},ParameteriseComponent.prototype.insertDataFromLocalStorage=function(e){},ParameteriseComponent.prototype.parameterisationFromLocalStorage=function(e){var t=JSON.parse(e);this.parameterisation.insert=t.insert,this.parameterisation.width=t.width,this.parameterisation.length=t.length,this.parameterisation.circle=t.circle,this.parameterisation.ellipse=t.ellipse},ParameteriseComponent.prototype.insertUpdated=function(e){var t=localStorage.getItem(JSON.stringify(e));t?this.parameterisationFromLocalStorage(t):(this.parameterisation.insert=e,this.parameterisation.width=null,this.parameterisation.length=null,this.parameterisation.circle=null,this.parameterisation.ellipse=null)},ParameteriseComponent.prototype.onJsonStatusChange=function(e){this.jsonValid=e,this.checkSubmitButton()},ParameteriseComponent.prototype.checkSubmitButton=function(){this.dataInFlight||!this.jsonValid?this.submitDisabled=!0:this.submitDisabled=!1},ParameteriseComponent.prototype.parameterisationServerChange=function(e){localStorage.setItem("parameteriseURL",e)},i([a.ViewChild("jsonInput"),o("design:type",Object)],ParameteriseComponent.prototype,"jsonInputComponent",void 0),ParameteriseComponent=i([a.Component({selector:"my-parameterise",template:n(64)}),o("design:paramtypes",[r.ElectronApiService,l.DataService,s.TitleService])],ParameteriseComponent)}();t.ParameteriseComponent=d},59:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),r=n(28);n(60);var l=function(){function ElectronApiService(e){this.http=e,this.wakeUpURL="http://electronapi.simonbiggs.net/wakeup"}return ElectronApiService.prototype.wakeUpServer=function(){return this.http.get(this.wakeUpURL).toPromise()},ElectronApiService.prototype.sendToServer=function(e,t){return this.http.post(e,t).toPromise().then(function(e){return e.json()})["catch"](this.handleError)},ElectronApiService.prototype.handleError=function(e){return console.error("An error occurred",e),Promise.reject(e.message||e)},ElectronApiService=i([a.Injectable(),o("design:paramtypes",[r.Http])],ElectronApiService)}();t.ElectronApiService=l},61:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),r=n(62),l=function(){function DataService(){}return DataService.prototype.getParameterisationData=function(){return Promise.resolve(r.DEMO_PARAMETERISE_INPUT)},DataService=i([a.Injectable(),o("design:paramtypes",[])],DataService)}();t.DataService=l},62:function(e,t){"use strict";var n={x:[.99,-.14,-1,-1.73,-2.56,-3.17,-3.49,-3.57,-3.17,-2.52,-1.76,-1.04,-.17,.77,1.63,2.36,2.79,2.91,3.04,3.22,3.34,3.37,3.08,2.54,1.88,1.02,.99],y:[5.05,4.98,4.42,3.24,1.68,.6,-.64,-1.48,-2.38,-3.77,-4.81,-5.26,-5.51,-5.58,-5.23,-4.64,-3.77,-2.77,-1.68,-.29,1.23,2.68,3.8,4.6,5.01,5.08,5.05]};t.DEMO_PARAMETERISE_INPUT={insert:n,circle:null,ellipse:null,width:null,length:null}},63:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),r=function(){function TitleService(){this.title="Home"}return TitleService.prototype.getTitle=function(){return this.title},TitleService.prototype.setTitle=function(e){this.title=e},TitleService=i([a.Injectable(),o("design:paramtypes",[])],TitleService)}();t.TitleService=r},64:function(e,t){e.exports='<div class="mdl-grid">\n  <div class="mdl-cell mdl-cell--6-col mdl-cell--12-col-tablet">\n    <h4>Equivalent ellipse parameterisation</h4>\n    <p>Provide basic instructions here.</p>\n  </div>\n\n  <div class="mdl-cell mdl-cell--6-col mdl-cell--8-col-tablet"\n    style="display: flex; align-items: center; flex-flow: row wrap;">\n    <my-plot \n      [insert]="parameterisation.insert"\n      [circle]="parameterisation.circle"\n      [ellipse]="parameterisation.ellipse"\n      [enabled]="jsonValid">\n    </my-plot>\n\n    <div style="width:100%; height:30px"></div>\n\n    <button\n      mdl-button mdl-button-type="raised" \n      mdl-colored="primary" \n      mdl-ripple\n      [disabled]="submitDisabled"\n      (click)="onSubmit()">Parameterise Insert          \n    </button>\n\n    <div style="height:20px; width:20px;"></div>\n\n    <my-width-length-table\n      [width]="parameterisation.width"\n      [length]="parameterisation.length"\n      [enabled]="jsonValid">\n    </my-width-length-table>\n\n    <div [hidden]="serverResponseValid">\n      {{serverErrorMessage}}\n    </div>\n  </div>\n  <div class="mdl-cell mdl-cell--12-col mdl-cell--8-col-tablet mdl-cell--6-col-phone">\n\n    <button\n      mdl-button mdl-button-type="raised"\n      mdl-colored="primary" \n      mdl-ripple\n      [disabled]="true"\n      (click)="null">Predict Factor with Model        \n    </button>\n\n    <div style="height:20px; width:20px;"></div>\n\n    <button\n      mdl-button mdl-button-type="raised" \n      mdl-colored="primary" \n      mdl-ripple\n      [disabled]="!machineSettingsExist || measuredFactor.value==null || measuredFactor.value==\'\'"\n      (click)="null">Add Measured Factor to Model            \n    </button>\n\n    <p *ngIf="!machineExists">\n      This machine ID does not exist within your provided machine specifications.\n    </p>\n\n    <p *ngIf="!machineSettingsExist">\n      These specific machine settings do not exist within your provided machine specifications.\n    </p>\n  </div>\n\n  <div class="mdl-cell mdl-cell--3-col mdl-cell--4-col-tablet mdl-cell--6-col-phone">\n    <mdl-textfield\n      type="text"\n      label="Machine (ID)"\n      (input)="insertDataChange()"\n      floating-label\n      [(ngModel)]="insertData.machine"\n      style="width:100%"></mdl-textfield>\n    <mdl-textfield\n      type="text"\n      label="Energy (Nominal)"\n      (input)="insertDataChange()"\n      floating-label\n      [(ngModel)]="insertData.energy"\n      style="width:100%"></mdl-textfield>\n    <mdl-textfield\n      type="text"\n      label="R50 Beam Quality (cm)"\n      floating-label\n      [value]="R50"\n      [disabled]="true"\n      style="width:100%"></mdl-textfield>\n    <mdl-textfield\n      type="text"\n      label="Applicator (ID)"\n      (input)="insertDataChange()"\n      floating-label\n      [(ngModel)]="insertData.applicator"\n      style="width:100%"></mdl-textfield>\n    <mdl-textfield\n      type="text"\n      label="SSD (cm)"\n      (input)="insertDataChange()"\n      floating-label\n      [(ngModel)]="insertData.ssd"\n      style="width:100%"></mdl-textfield>\n\n  </div>\n\n  <div class="mdl-cell mdl-cell--3-col mdl-cell--4-col-tablet mdl-cell--6-col-phone">\n    <mdl-textfield #measuredFactor\n      type="text"\n      label="Measured Factor"\n      (input)="insertDataChange()"\n      floating-label\n      [(ngModel)]="insertData.factor"\n      style="width:100%"></mdl-textfield>\n\n    <mdl-textfield\n      type="text"\n      label="Predicted Factor"\n      floating-label\n      [disabled]=true\n      style="width:100%"></mdl-textfield>\n\n  </div>\n\n\n  <div class="mdl-cell mdl-cell--6-col mdl-cell--8-col-tablet">\n    <p>Change the following address to use your own\n      parameterisation server. The default is: <br>\n      <a>http://electronapi.simonbiggs.net/parameterise</a>       \n    </p>\n    <mdl-textfield\n      type="text"\n      label="Parameterisation Server Address"\n      (input)="parameterisationServerChange($event.target.value)"\n      floating-label\n      [(ngModel)]="parameteriseURL"\n      style="width:100%"></mdl-textfield>\n  </div>\n\n  <div class="mdl-cell mdl-cell--12-col mdl-cell--8-col-tablet">\n    <h5>Edit raw coordinates</h5>\n    <my-json-input #jsonInput\n      [insert]="parameterisation.insert"\n      [jsonDisabled]="dataInFlight"\n      (insertUpdated)="insertUpdated($event)"\n      (jsonStatus)="onJsonStatusChange($event)">\n    </my-json-input>\n  </div>\n\n</div>\n'},65:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),r=function(){function PageNotFoundComponent(){}return PageNotFoundComponent=i([a.Component({selector:"my-page-not-found",template:n(66)}),o("design:paramtypes",[])],PageNotFoundComponent)}();t.PageNotFoundComponent=r},66:function(e,t){e.exports='<div class="mdl-grid">\n  <div class="mdl-cell mdl-cell--12-col">\n    This page has not been found. Please provide feedback ...\n  </div>\n</div>'},67:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),r=n(63),l=n(68),s=function(){function HomeComponent(e,t){this.myTitleService=e,this.myLocalStorageService=t}return HomeComponent.prototype.ngOnInit=function(){this.myTitleService.setTitle("Home"),this.testLocalStorage=this.myLocalStorageService.isSupported,this.usedLocalStorageSpace=this.myLocalStorageService.getUsedSpace()},HomeComponent.prototype.testRemainingStorage=function(){this.remainingLocalStorageSpace=this.myLocalStorageService.getRemainingSpace()},HomeComponent=i([a.Component({selector:"my-home",template:n(70)}),o("design:paramtypes",[r.TitleService,l.LocalStorageService])],HomeComponent)}();t.HomeComponent=s},68:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),r=n(69),l=function(){function LocalStorageService(){this.isSupported=r.LocalStorage.isSupported,this.hasItem=r.LocalStorage.hasItem,this.getRemainingSpace=r.LocalStorage.getRemainingSpace,this.getMaximumSpace=r.LocalStorage.getMaximumSpace,this.getUsedSpace=r.LocalStorage.getUsedSpace,this.getItemUsedSpace=r.LocalStorage.getItemUsedSpace,this.getBackup=r.LocalStorage.getBackup,this.applyBackup=r.LocalStorage.applyBackup,this.consoleInfo=r.LocalStorage.consoleInfo}return LocalStorageService=i([a.Injectable(),o("design:paramtypes",[])],LocalStorageService)}();t.LocalStorageService=l},69:function(e,t){"use strict";var n;!function(e){function hasItem(e){return null!==localStorage.getItem(e)}function getRemainingSpace(){for(var e=localStorage.getItem(""),t=!0,n="1",i="",o="";;)try{o=i+n,localStorage.setItem("",o),i=o,t&&(n+=n)}catch(a){if(n.length<2)break;t=!1,n=n.substr(n.length/2)}return null===e?localStorage.removeItem(""):localStorage.setItem("",e),i.length}function getMaximumSpace(){var e=getBackup();localStorage.clear();var t=getRemainingSpace();return applyBackup(e),t}function getUsedSpace(){for(var e=0,t=0;t<localStorage.length;++t){var n=localStorage.key(t),i=localStorage.getItem(n);e+=n.length+i.length}return e}function getItemUsedSpace(e){var t=localStorage.getItem(e);return null===t?NaN:e.length+t.length}function getBackup(){for(var e={},t=0;t<localStorage.length;++t){var n=localStorage.key(t),i=localStorage.getItem(n);e[n]=i}return e}function applyBackup(e,t,n){void 0===t&&(t=!0),void 0===n&&(n=!0),1==t&&localStorage.clear();for(var i in e)if(n!==!1||void 0===e[i]){var o=e[i];localStorage.setItem(i,o)}}function consoleInfo(e){void 0===e&&(e=!1);for(var t=0,n=0,i=0;i<localStorage.length;++i){var o=localStorage.key(i),a=localStorage.getItem(o);console.log(t,o,a),n+=o.length+a.length,t++}if(console.log("Total entries:",t),console.log("Total size:",n),e===!0){var r=getMaximumSpace();console.log("Total size:",r)}}e.isSupported=function(){try{var e=localStorage.getItem("");return localStorage.removeItem(""),localStorage.setItem("",e),null===e?localStorage.removeItem(""):localStorage.setItem("",e),!0}catch(t){return!1}}(),e.hasItem=hasItem,e.getRemainingSpace=getRemainingSpace,e.getMaximumSpace=getMaximumSpace,e.getUsedSpace=getUsedSpace,e.getItemUsedSpace=getItemUsedSpace,e.getBackup=getBackup,e.applyBackup=applyBackup,e.consoleInfo=consoleInfo}(n=t.LocalStorage||(t.LocalStorage={}))},70:function(e,t){e.exports='<div class="mdl-grid">\n  <div class="mdl-cell mdl-cell--6-col">\n    <h4>Description</h4>\n    <p>\n      This online web app is for the modelling of the portion of the electron output factor that is dependent on the shape of the shielding insert mounted within the applicator. This allows modelling insert factors using only the measured factors already available at a centre. Should all outliers be removed from the data set the user might expect as low as 0.5% standard uncertainty for factor prediction with as little as 8 data points.\n    </p>\n\n\n    <p>If you have any issues or feedback please contact me at <a href="mailto:mail@simonbiggs.net">mail@simonbiggs.net</a>.</p>\n\n    <h4>Disclaimer</h4>\n    <p>\n      Any use of this web app or any of its code has you accepting the AGPL3+ license which includes no warranty that this code is fit for a particular purpose. Attempts have been made to make the code transparent and it is recommended that an experienced python programmer and physicist who understands the procedure outlined in the paper and the requirements of your centre identifies whether or not this method and code is fit for your use.</p>\n\n    <h4>Paper</h4>\n    <p>The paper outlining this method:</p>\n    <p>\n      S. Biggs, M. Sobolewski, R. Murry, J. Kenny, Spline modelling electron insert factors using routine measurements. Physica Medica (2015), <a href="http://dx.doi.org/10.1016/j.ejmp.2015.11.002">doi:10.1016/j.ejmp.2015.11.002</a>.\n    </p>\n\n    <h4>Detailed instructions</h4>\n    <p>Yet to be written</p>\n\n    <h4>Steps required to freeze your own version of this web app</h4>\n      As I make improvements to this web app I will be updating this online version. \n      You may desire to not have the web app you are using day to day change on you.\n      To achieve this you can create your own version of the server and your own version of the web app.\n      \n      For now this will require a bit of your own working out until I provide further instructions.\n\n  </div>\n  <div class="mdl-cell mdl-cell--6-col">\n\n    <h4>Source code</h4>\n    <p>\n      For the purpose of coding transparency and to enable the user to take responsibility for the code themselves any redistribution\n      or derivative works of this web app need to include the source code of any additions made and need to include a way\n      for users to easily access the source code of each of the components used or linked to.\n    </p>\n\n    <h5>Server Code</h5>\n\n    <h6>Base Electron Insert Factor Source Code</h6>\n    <p>\n      The python file which does the shape parameterisation and insert factor modelling which is used by the server is found here:\n      <a href="https://github.com/SimonBiggs/electronfactor-server/blob/master/electroninserts.py">\n              https://github.com/SimonBiggs/electronfactor-server/blob/master/electroninserts.py</a>\n    </p>\n\n    <h6>Tornado REST API</h6>\n    <p>\n      The Tornado REST API is found here:\n      <a href="https://github.com/SimonBiggs/electronfactor-server/blob/master/main.py">\n              https://github.com/SimonBiggs/electronfactor-server/blob/master/main.py</a>\n    </p>\n\n    <h6>Heroku App code</h6>\n    <p>\n      The code to make the heroku app is found here:\n      <a href="https://github.com/SimonBiggs/electronfactor-server">\n              https://github.com/SimonBiggs/electronfactor-server</a>\n    </p>\n\n    <h5>Web App Code</h5>\n    <p>\n      The source code for this web app is found here:\n      <a href="https://github.com/SimonBiggs/electroninserts-webapp">\n            https://github.com/SimonBiggs/electroninserts-webapp</a>\n    </p>\n\n    <h5>Libraries used</h5>\n    <h6>Bokehjs</h6>\n    <p>\n      The bokehjs library is used for plots. Documentation can be found here:\n      <a href="http://bokeh.pydata.org/en/latest/docs/user_guide/bokehjs.html#userguide-bokehjs">\n              http://bokeh.pydata.org/en/latest/docs/user_guide/bokehjs.html#userguide-bokehjs</a>\n    </p>\n    <p>\n      Source code can be found here:\n      <a href="https://github.com/bokeh/bokeh/tree/master/bokehjs">\n              https://github.com/bokeh/bokeh/tree/master/bokehjs</a>\n    </p>\n\n    <h6>dcmjs</h6>\n    <p>\n      The dcmjs library is used for reading dicom files within javascript. Website can be found here:\n      <a href="http://dcmjs.org/">\n              http://dcmjs.org/</a>\n    </p>\n    <p>\n      Source code can be found here:\n      <a href="https://github.com/commontk/dcmjs">\n              https://github.com/commontk/dcmjs</a>\n    </p>\n\n    <h6>Angular2</h6>\n    <p>\n      This interface was built using Angular2. Documentation can be found here:\n      <a href="https://angular.io/docs/ts/latest/">\n              https://angular.io/docs/ts/latest/</a>\n    </p>\n    <p>\n      Source code can be found here:\n      <a href="https://github.com/angular/angular">\n              https://github.com/angular/angular</a>\n    </p>\n    <h6>Remaining libraries</h6>\n    <p>\n      For all remaining libraries used please see the npm package.json file:\n      <a href="https://github.com/SimonBiggs/electroninserts-webapp/blob/master/package.json">\n              https://github.com/SimonBiggs/electroninserts-webapp/blob/master/package.json</a>\n    </p>\n    <p>\n      And the index file for various imports:\n      <a href="https://github.com/SimonBiggs/electroninserts-webapp/blob/master/src/public/index.html">\n              https://github.com/SimonBiggs/electroninserts-webapp/blob/master/src/public/index.html</a>\n    </p>\n  </div>\n\n\n</div>'},71:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),r=n(63),l=n(59),s=function(){function ModelComponent(e,t){this.myTitleService=e,this.electronApiService=t,this.modelData={measurement:{width:[3.15,3.16,3.17,3.17,3.17,3.55,3.66,3.71,4.2,4.21,4.21,4.21,4.21,4.38,4.48,4.59,4.59,4.67,5.21,5.25,5.26,5.26,5.26,5.34,5.43,5.72,5.86,6,6.04,6.08,6.3,6.31,6.41,6.53,6.54,6.64,6.78,6.9,7.08,7.18,7.21,7.36,7.56,7.6,7.64,7.82,8.06,8.4,9.45],length:[3.16,5.25,13.64,6.83,9.43,7.7,5.04,4.36,4.21,10.51,13.65,6.82,8.41,5.47,7.29,5.67,6.54,6.28,11.4,5.26,10.52,13.66,8.41,9.64,11.02,11.6,8.62,7.98,9.22,6.64,6.33,8.24,8.69,10.99,8.41,9.81,10.98,10.25,10.77,11.27,9.03,7.37,10.05,10.26,8.99,10.85,11.85,8.42,9.47],factor:[.9294,.9346,.9533,.9488,.9488,.9443,.9434,.9488,.956,.9709,.9756,.9606,.9709,.9634,.9606,.9588,.9681,.9737,.9881,.9709,.9881,.9872,.9833,.993,.9872,.999,.9891,.9911,.999,.993,.9862,.9921,.999,1,.993,.999,1.007,.999,1.005,.999,1.0101,1.003,1.004,1.0142,1.003,1.002,1.007,1.007,1.0081]},model:{width:[],length:[],factor:[[]]}}}return ModelComponent.prototype.ngOnInit=function(){this.myTitleService.setTitle("Model"),this.modelURL=localStorage.getItem("modelURL"),null==this.modelURL&&(this.modelURL="http://electronapi.simonbiggs.net/model")},ModelComponent.prototype.basicServerSubmit=function(){var e=this;this.electronApiService.sendToServer(this.modelURL,JSON.stringify(this.modelData.measurement)).then(function(t){e.modelData.model.width=t.model_width,e.modelData.model.length=t.model_length,e.modelData.model.factor=t.model_factor})},ModelComponent.prototype.jsonInputUpdated=function(e){this.modelData=e},ModelComponent.prototype.modelServerChange=function(e){localStorage.setItem("modelURL",e)},ModelComponent.prototype.defaultServer=function(){this.modelURL="http://electronapi.simonbiggs.net/model",localStorage.setItem("modelURL",this.modelURL)},ModelComponent=i([a.Component({selector:"my-model",template:n(72)}),o("design:paramtypes",[r.TitleService,l.ElectronApiService])],ModelComponent)}();t.ModelComponent=s},72:function(e,t){e.exports='<div class="mdl-grid">\n  <div class="mdl-cell mdl-cell--12-col">\n    <my-bokeh-pcolour\n      [title]="\'Model Plot\'"\n      [scatter_x]="modelData.measurement.width"\n      [scatter_y]="modelData.measurement.length"\n      [scatter_z]="modelData.measurement.factor"\n      [plot_width]="600"\n      [plot_height]="400">\n\n    </my-bokeh-pcolour>\n    <button\n      mdl-button mdl-button-type="raised" \n      mdl-colored="primary" \n      mdl-ripple\n      [disabled]="false"\n      (click)="basicServerSubmit()">Run Spline Model          \n    </button>\n  </div>\n\n  <div class="mdl-cell mdl-cell--6-col mdl-cell--8-col-tablet">\n    <p>Change the following address to use your own\n      spline modelling server. The default is: <br>\n      <a (click)="defaultServer()">http://electronapi.simonbiggs.net/model</a>        \n    </p>\n    <mdl-textfield\n      type="text"\n      label="Spline model server address"\n      (input)="modelServerChange($event.target.value)"\n      floating-label\n      [(ngModel)]="modelURL"\n      style="width:100%"></mdl-textfield>\n  </div>\n\n  <div class="mdl-cell mdl-cell--12-col">\n    <h5>Edit raw model data</h5>\n    <my-json-edit\n      [input]="modelData"\n      (inputUpdated)="jsonInputUpdated($event)"\n      buttonText="Update Model Data"\n      useMyJsonPipe="true">\n    </my-json-edit>\n  </div>\n\n\n</div>'},73:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),r=n(63),l=n(68),s=function(){function ExportImportComponent(e,t){this.myTitleService=e,this.myLocalStorageService=t}return ExportImportComponent.prototype.ngOnInit=function(){this.myTitleService.setTitle("Export / Import"),this.testLocalStorage=this.myLocalStorageService.isSupported,this.usedLocalStorageSpace=this.myLocalStorageService.getUsedSpace()},ExportImportComponent.prototype.testRemainingStorage=function(){this.remainingLocalStorageSpace=this.myLocalStorageService.getRemainingSpace()},ExportImportComponent=i([a.Component({selector:"my-export-import",template:n(74)}),o("design:paramtypes",[r.TitleService,l.LocalStorageService])],ExportImportComponent)}();t.ExportImportComponent=s},74:function(e,t){e.exports='<div class="mdl-grid">\n  <div class="mdl-cell mdl-cell--12-col">\n    <h4>Local storage tests</h4>\n    <p></p>\n\n    <div *ngIf="testLocalStorage">\n      <p>Your browser supports local storage. You currently have {{usedLocalStorageSpace}} B of used space. Most browsers support\n        5 MB.\n      </p>\n\n      <p>To check your remaining storage press the button below. Warning, this might be slow.</p>\n      <button mdl-button mdl-button-type="raised" mdl-colored="primary" mdl-ripple (click)="testRemainingStorage()">Test remaining local storage           \n      </button>\n      <div *ngIf="remainingLocalStorageSpace">\n        <p>You have {{remainingLocalStorageSpace}} B of local storage remaining which is available for use by this webapp.</p>\n      </div>\n    </div>\n    <div *ngIf="!testLocalStorage">\n      <p>\n        This webapp relies upon local storage working within your browser. Your browser does not support local storage. Please download\n        and use a modern standards compliant browser such as\n        <a href="https://www.google.com.au/chrome/browser/desktop/">Chrome</a> or\n        <a href="https://www.mozilla.org/en-GB/firefox/new/">Firefox</a> to use this webapp.\n      </p>\n    </div>\n  </div>\n</div>';
},75:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),r=n(63),l=function(){function SpecificationsComponent(e){this.myTitleService=e,this.specifications={},this.newMachineIDValid=!1,this.newModelValid=!1,this.newMachineValid=!1,this.edittingMachine=null,this.newEnergyValid=!1,this.newR50Valid=!1,this.newEnergySetValid=!1,this.edittingEnergy=null,this.newApplicatorValid=!1,this.edittingApplicator=null,this.newSSDValid=!1,this.edittingSSD=null}return SpecificationsComponent.prototype.changeCurrentMachine=function(e){this.currentMachine=e,this.updateCurrentMachine()},SpecificationsComponent.prototype.checkNewMachineIDInput=function(){null==this.specifications[this.newMachineID]&&null!=this.newMachineID&&""!=this.newMachineID?this.newMachineIDValid=!0:this.newMachineIDValid=!1,this.checkNewMachineValid()},SpecificationsComponent.prototype.checkNewModelInput=function(){null!=this.newModel&&""!=this.newModel?this.newModelValid=!0:this.newModelValid=!1,this.checkNewMachineValid()},SpecificationsComponent.prototype.checkNewMachineValid=function(){this.newMachineValid=this.newMachineIDValid&&this.newModelValid},SpecificationsComponent.prototype.addMachineID=function(){this.newMachineValid&&(this.machines.push(this.newMachineID),this.specifications[this.newMachineID]={},this.specifications[this.newMachineID].model=this.newModel,this.specifications[this.newMachineID].energy=[],this.specifications[this.newMachineID].R50={},this.specifications[this.newMachineID].applicator=[],this.specifications[this.newMachineID].ssd=[],this.changeCurrentMachine(this.newMachineID),this.newMachineID=null,this.newModel=null,this.newMachineIDValid=!1,this.newModelValid=!1,this.newMachineValid=!1,this.updateSpecifications())},SpecificationsComponent.prototype.checkNewEnergyInput=function(){this.specifications[this.currentMachine].energy.indexOf(Number(this.newEnergy))<0&&null!=this.newEnergy&&!isNaN(Number(this.newEnergy))?this.newEnergyValid=!0:this.newEnergyValid=!1,this.checkNewEnergySetValid()},SpecificationsComponent.prototype.checkNewR50Input=function(){null==this.newR50||isNaN(Number(this.newR50))?this.newR50Valid=!1:this.newR50Valid=!0,this.checkNewEnergySetValid()},SpecificationsComponent.prototype.checkNewEnergySetValid=function(){this.newEnergySetValid=this.newEnergyValid&&this.newR50Valid},SpecificationsComponent.prototype.addEnergy=function(){this.newEnergySetValid&&(this.specifications[this.currentMachine].energy.push(Number(this.newEnergy)),this.specifications[this.currentMachine].R50[this.newEnergy]=Number(this.newR50),this.newEnergy=null,this.newR50=null,this.newEnergyValid=!1,this.newR50Valid=!1,this.newEnergySetValid=!1,this.updateSpecifications())},SpecificationsComponent.prototype.checkNewApplicatorInput=function(){this.specifications[this.currentMachine].applicator.indexOf(this.newApplicator.toLowerCase())<0&&null!=this.newApplicator&&""!=this.newApplicator?this.newApplicatorValid=!0:this.newApplicatorValid=!1},SpecificationsComponent.prototype.addApplicator=function(){this.newApplicatorValid&&(this.specifications[this.currentMachine].applicator.push(this.newApplicator.toLowerCase()),this.newApplicator=null,this.newApplicatorValid=!1,this.updateSpecifications())},SpecificationsComponent.prototype.checkNewSSDInput=function(){this.specifications[this.currentMachine].ssd.indexOf(Number(this.newSSD))<0&&null!=this.newSSD&&!isNaN(Number(this.newSSD))?this.newSSDValid=!0:this.newSSDValid=!1},SpecificationsComponent.prototype.addSSD=function(){this.newSSDValid&&(this.specifications[this.currentMachine].ssd.push(Number(this.newSSD)),this.newSSD=null,this.newSSDValid=!1,this.updateSpecifications())},SpecificationsComponent.prototype.updateSpecifications=function(){localStorage.setItem("specifications",JSON.stringify(this.specifications))},SpecificationsComponent.prototype.updateCurrentMachine=function(){localStorage.setItem("current_machine",JSON.stringify(this.currentMachine))},SpecificationsComponent.prototype.editMachine=function(e){this.currentMachine=null,this.edittingMachine=e},SpecificationsComponent.prototype.finishMachineEdit=function(e,t,n){t!=e&&(this.specifications[t]=this.specifications[e],delete this.specifications[e],this.machines=Object.keys(this.specifications).sort()),this.specifications[t].model=n,this.updateSpecifications(),this.currentMachine=this.edittingMachine,this.edittingMachine=null},SpecificationsComponent.prototype.deleteMachine=function(e){var t=this.machines.indexOf(e);this.machines.splice(t,1),delete this.specifications[e],this.edittingMachine=null,this.updateSpecifications()},SpecificationsComponent.prototype.changeSpecifications=function(e){this.specifications=e,null==this.specifications?(this.specifications={},this.machines=[]):(this.machines=Object.keys(this.specifications).sort(),this.currentMachine=JSON.parse(localStorage.getItem("current_machine")),null!=this.currentMachine&&void 0!==this.specifications[this.currentMachine]||(this.currentMachine=this.machines[0])),this.updateSpecifications()},SpecificationsComponent.prototype.ngOnInit=function(){this.myTitleService.setTitle("Specifications"),this.changeSpecifications(JSON.parse(localStorage.getItem("specifications")))},SpecificationsComponent=i([a.Component({selector:"my-specifications",template:n(76)}),o("design:paramtypes",[r.TitleService])],SpecificationsComponent)}();t.SpecificationsComponent=l},76:function(e,t){e.exports='<div class="mdl-grid">\n\n  <div class="mdl-cell mdl-cell--12-col mdl-cell--8-col-tablet mdl-cell--6-col-phone">\n    \n  </div>\n\n  <div class="mdl-cell mdl-cell--12-col mdl-cell--8-col-tablet mdl-cell--6-col-phone">\n    <h5>Machine specifications editing</h5>\n    <p>Currently the editing and deleting of energy, applicator, and SSD entries is not yet implimented.</p>\n  </div>\n  <div class="mdl-cell mdl-cell--4-col mdl-cell--4-col-tablet mdl-cell--6-col-phone">\n    <mdl-card mdl-shadow="6" style="width:100%">\n      <mdl-card-title>\n        <h2 mdl-card-title-text>Machine IDs</h2>\n      </mdl-card-title>\n\n      <mdl-list>\n        \n        <div *ngFor="let machine of machines">\n        \n          <div *ngIf="machine!=edittingMachine">\n            <mdl-list-item lines="3">\n              <mdl-list-item-primary-content>\n                <div (click)="editMachine(machine)">\n                  <span>{{machine}}</span>\n                  <mdl-list-item-text-body>{{specifications[machine].model}}</mdl-list-item-text-body>\n                </div>\n              </mdl-list-item-primary-content>\n              <mdl-list-item-secondary-action>\n                <button\n                  mdl-button\n                  mdl-button-type="icon"\n                  mdl-ripple\n                  [disabled]="machine==currentMachine || edittingMachine!=null"\n                  (click)="changeCurrentMachine(machine)"><mdl-icon>dashboard</mdl-icon>       \n                </button>\n                <button\n                  mdl-button *ngIf="machine!=edittingMachine"\n                  mdl-button-type="icon"\n                  mdl-ripple\n                  [disabled]="false"\n                  (click)="editMachine(machine)"><mdl-icon>edit</mdl-icon>       \n                </button>\n              </mdl-list-item-secondary-action>\n            </mdl-list-item>\n\n          </div>\n\n          <div *ngIf="machine==edittingMachine">\n            <mdl-list-item lines="3">\n              <mdl-list-item-primary-content>\n                <mdl-textfield #machineIDTextField\n                  type="text"\n                  label="Machine ID"\n                  [value]="machine"\n                  (keyup.enter)="finishMachineEdit(machine, machineIDTextField.value, modelTextField.value)"\n                  floating-label\n                  style="display:inline;"></mdl-textfield>\n                <mdl-textfield #modelTextField\n                  type="text"\n                  label="Model"\n                  [value]="specifications[machine].model"\n                  (keyup.enter)="finishMachineEdit(machine, machineIDTextField.value, modelTextField.value)"\n                  floating-label\n                  style="display:inline;"></mdl-textfield>\n              </mdl-list-item-primary-content>\n\n              <mdl-list-item-secondary-action>\n                <button\n                  mdl-button\n                  mdl-button-type="icon"\n                  mdl-ripple\n                  [disabled]="machine!=edittingMachine"\n                  (click)="deleteMachine(machine)"><mdl-icon>delete</mdl-icon>       \n                </button>\n                <button\n                  mdl-button\n                  mdl-button-type="icon"\n                  mdl-ripple\n                  mdl-colored="primary" \n                  [disabled]="machine==currentMachine || edittingMachine!=null"\n                  (click)="changeCurrentMachine(machine)"><mdl-icon>dashboard</mdl-icon>       \n                </button>\n                <button\n                  mdl-button\n                  mdl-button-type="icon"\n                  mdl-ripple\n                  [disabled]="false"\n                  (click)="finishMachineEdit(machine, machineIDTextField.value, modelTextField.value)"><mdl-icon>done</mdl-icon>       \n                </button>\n              </mdl-list-item-secondary-action>\n            </mdl-list-item>\n\n          </div>\n        </div>\n\n\n      </mdl-list>\n      <mdl-card-actions mdl-card-border>\n        <mdl-textfield\n          type="text"\n          label="New Machine ID"\n          [(ngModel)]="newMachineID"\n          (input)="checkNewMachineIDInput()"\n          (keyup.enter)="addMachineID()"\n          floating-label\n          style="width:100%"></mdl-textfield>\n        <mdl-textfield\n          type="text"\n          label="Machine Make and Model"\n          [(ngModel)]="newModel"\n          (input)="checkNewModelInput()"\n          (keyup.enter)="addMachineID()"\n          floating-label\n          style="width:70%"></mdl-textfield>\n        <button \n          [disabled]="!newMachineValid"\n          mdl-button \n          mdl-button-type="mini-fab"\n          mdl-ripple\n          (click)="addMachineID()">\n          <mdl-icon>add</mdl-icon>\n        </button>\n      </mdl-card-actions>\n\n    </mdl-card>\n  </div>\n\n  <div *ngIf="currentMachine" class="mdl-cell mdl-cell--4-col mdl-cell--4-col-tablet mdl-cell--6-col-phone">\n    <mdl-card mdl-shadow="6"  style="width:100%">\n      <mdl-card-title>\n        <h2 mdl-card-title-text>Energies for {{currentMachine}}</h2>\n      </mdl-card-title>\n        <mdl-list>\n          <mdl-list-item *ngFor="let energy of specifications[currentMachine].energy" lines="3">\n            <mdl-list-item-primary-content>\n              <span>{{energy}} MeV</span>\n              <mdl-list-item-text-body>R50: {{specifications[currentMachine].R50[energy]}} cm</mdl-list-item-text-body>\n            </mdl-list-item-primary-content>\n            <mdl-list-item-secondary-action>\n              <button\n                mdl-button\n                mdl-button-type="icon"\n                mdl-ripple\n                [disabled]="true"\n                (click)="null"><mdl-icon>done</mdl-icon>       \n              </button>\n              <button\n                mdl-button\n                mdl-button-type="icon"\n                mdl-ripple\n                [disabled]="true"\n                (click)="null"><mdl-icon>edit</mdl-icon>       \n              </button>\n              <button\n                mdl-button\n                mdl-button-type="icon"\n                mdl-ripple\n                [disabled]="true"\n                (click)="null"><mdl-icon>delete</mdl-icon>       \n              </button>\n            </mdl-list-item-secondary-action>\n          </mdl-list-item>\n        </mdl-list>\n\n      <mdl-card-actions mdl-card-border>\n        <mdl-textfield\n          type="text"\n          label="New Energy (MeV)"\n          [(ngModel)]="newEnergy"\n          (input)="checkNewEnergyInput()"\n          (keyup.enter)="addEnergy()"\n          floating-label\n          style="width:100%"></mdl-textfield>\n        <mdl-textfield\n          type="text"\n          label="R50 for New Energy (cm)"\n          [(ngModel)]="newR50"\n          (input)="checkNewR50Input()"\n          (keyup.enter)="addEnergy()"\n          floating-label\n          style="width:70%"></mdl-textfield>\n        <button \n          [disabled]="!newEnergySetValid" \n          mdl-button \n          mdl-button-type="mini-fab"\n          (click)="addEnergy()">\n          <mdl-icon>add</mdl-icon>\n        </button>\n      </mdl-card-actions>\n    </mdl-card>\n  </div>\n\n  <div *ngIf="currentMachine" class="mdl-cell mdl-cell--4-col mdl-cell--4-col-tablet mdl-cell--6-col-phone">\n    <mdl-card mdl-shadow="6"  style="width:100%">\n      <mdl-card-title>\n        <h2 mdl-card-title-text>Applicators for {{currentMachine}}</h2>\n      </mdl-card-title>\n        <mdl-list>\n          <mdl-list-item *ngFor="let applicator of specifications[currentMachine].applicator">\n            <mdl-list-item-primary-content>\n              <mdl-list-item-text-body>{{applicator}}</mdl-list-item-text-body>\n            </mdl-list-item-primary-content>\n            <mdl-list-item-secondary-action>\n              <button\n                mdl-button\n                mdl-button-type="icon"\n                mdl-ripple\n                [disabled]="true"\n                (click)="null"><mdl-icon>done</mdl-icon>       \n              </button>\n              <button\n                mdl-button\n                mdl-button-type="icon"\n                mdl-ripple\n                [disabled]="true"\n                (click)="null"><mdl-icon>edit</mdl-icon>       \n              </button>\n              <button\n                mdl-button\n                mdl-button-type="icon"\n                mdl-ripple\n                [disabled]="true"\n                (click)="null"><mdl-icon>delete</mdl-icon>       \n              </button>\n            </mdl-list-item-secondary-action>\n          </mdl-list-item>\n        </mdl-list>\n\n      <mdl-card-actions mdl-card-border>\n        <mdl-textfield\n          type="text"\n          label="New Applicator"\n          [(ngModel)]="newApplicator"\n          (input)="checkNewApplicatorInput()"\n          (keyup.enter)="addApplicator()"\n          floating-label\n          style="width:70%"></mdl-textfield>\n        <button \n          [disabled]="!newApplicatorValid" \n          mdl-button \n          mdl-button-type="mini-fab"\n          (click)="addApplicator()">\n          <mdl-icon>add</mdl-icon>\n        </button>\n      </mdl-card-actions>\n    </mdl-card>\n  </div>\n\n  <div *ngIf="currentMachine" class="mdl-cell mdl-cell--4-col mdl-cell--4-col-tablet mdl-cell--6-col-phone">\n    <mdl-card mdl-shadow="6"  style="width:100%">\n      <mdl-card-title>\n        <h2 mdl-card-title-text>SSDs for {{currentMachine}}</h2>\n      </mdl-card-title>\n        <mdl-list>\n          <mdl-list-item *ngFor="let ssd of specifications[currentMachine].ssd">\n            <mdl-list-item-primary-content>\n              <mdl-list-item-text-body>{{ssd}} cm</mdl-list-item-text-body>\n            </mdl-list-item-primary-content>\n            <mdl-list-item-secondary-action>\n              <button\n                mdl-button\n                mdl-button-type="icon"\n                mdl-ripple\n                [disabled]="true"\n                (click)="null"><mdl-icon>done</mdl-icon>       \n              </button>\n              <button\n                mdl-button\n                mdl-button-type="icon"\n                mdl-ripple\n                [disabled]="true"\n                (click)="null"><mdl-icon>edit</mdl-icon>       \n              </button>\n              <button\n                mdl-button\n                mdl-button-type="icon"\n                mdl-ripple\n                [disabled]="true"\n                (click)="null"><mdl-icon>delete</mdl-icon>       \n              </button>\n            </mdl-list-item-secondary-action>\n          </mdl-list-item>\n        </mdl-list>\n\n      <mdl-card-actions mdl-card-border>\n        <mdl-textfield\n          type="text"\n          label="New SSD (cm)"\n          [(ngModel)]="newSSD"\n          (input)="checkNewSSDInput()"\n          (keyup.enter)="addSSD()"\n          floating-label\n          style="width:70%"></mdl-textfield>\n        <button \n          [disabled]="!newSSDValid" \n          mdl-button \n          mdl-button-type="mini-fab"\n          (click)="addSSD()">\n          <mdl-icon>add</mdl-icon>\n        </button>\n      </mdl-card-actions>\n    </mdl-card>\n  </div>\n\n\n  <div class="mdl-cell mdl-cell--12-col mdl-cell--8-col-tablet mdl-cell--6-col-phone">\n    <h5>Raw specification data editing</h5>\n    <p>\n      Edit the raw machine specifications data below. \n      Currently error checking on this raw input is not implemented.\n      Incorrectly editing the data below may cause the web app not to function.\n      Input data above to determine the data structure required.</p>\n    <my-json-edit\n      [input]="specifications"\n      (inputUpdated)="changeSpecifications($event)"\n      buttonText="Update Specifications">\n    </my-json-edit>\n  </div>\n\n</div>\n\n'},77:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),r=n(30),l=n(63),s=n(78),c=function(){function DicomComponent(e,t){this.myTitleService=e,this.router=t,this.parameterisation={insert:{x:[0],y:[0]},width:null,length:null,circle:null,ellipse:null},this.insertData={machine:null,parameterisation:this.parameterisation,energy:null,applicator:null,ssd:null},this.dicomExitCode=1,this.reader=new FileReader}return DicomComponent.prototype.ngOnInit=function(){var e=this;window.dicomData=" ",this.reader.onload=function(){return e.onceFileIsLoaded()};var t=localStorage.getItem("dicom_insertList");t&&(this.insertList=JSON.parse(t)),Module.print=this.sendDicomDumpToGlobalVariable,this.myTitleService.setTitle("Dicom")},DicomComponent.prototype.sendDicomDumpToGlobalVariable=function(e){window.dicomData=window.dicomData+"\n"+e},DicomComponent.prototype.updateDicomWarning=function(){var e=Number(localStorage.getItem("dicomLoadStatus"));0==e?(this.getBlockDataButton.disabled=!1,this.dicomWarning=null):(this.getBlockDataButton.disabled=!0,this.dicomWarning="An error occured while trying to find the block data within the provided Dicom file.")},DicomComponent.prototype.onceFileIsLoaded=function(){var e=new Int8Array(this.reader.result);console.log(e.length);var t="dicomfile";FS.isFile(t)&&FS.unlink(t),FS.writeFile(t,e,{encoding:"binary"});var n=Module.exit;Module.exit=function(e){localStorage.setItem("dicomLoadStatus",e),n(e)},Module.callMain(["dcmdump",t,"--print-all"]),Module.exit=n,console.log(Module),this.updateDicomWarning(),FS.unlink(t)},DicomComponent.prototype.openFile=function(e){if("undefined"!=typeof e.target){console.log(e.target.files);var t=e.target.files[0];window.dicomData=" ",this.reader.readAsArrayBuffer(t)}else console.log(e)},DicomComponent.prototype.convertDicomDumpToDict=function(e){var t=e.replace(/\s*#[^#\n]*\n/g,"\n");return t=t.replace(/\s*#[^#\n]*$/g,""),t=t.replace(/^\n*/,""),t=t.replace(/(\([0-9a-f][0-9a-f][0-9a-f][0-9a-f],[0-9a-f][0-9a-f][0-9a-f][0-9a-f]\))/g,"$1:"),t=t.replace(/(\([0-9a-f][0-9a-f][0-9a-f][0-9a-f],[0-9a-f][0-9a-f][0-9a-f][0-9a-f]\):) SQ \(Sequence with undefined length #=\d+\)/g,"$1"),t=t.replace(/(\([0-9a-f][0-9a-f][0-9a-f][0-9a-f],[0-9a-f][0-9a-f][0-9a-f][0-9a-f]\):) na \(Item with undefined length #=\d+\)/g,"$1"),t=t.replace(/ *\(fffe,e00d\): na \(ItemDelimitationItem\) *\n/g,""),t=t.replace(/ *\(fffe,e0dd\): na \(SequenceDelimitationItem\)\n/g,""),t=t.replace(/(\([0-9a-f][0-9a-f][0-9a-f][0-9a-f],[0-9a-f][0-9a-f][0-9a-f][0-9a-f]\):) (.*)/g,'$1 "$2"'),t=t.replace(/\\/g,", "),t=t.replace(/\(fffe,e000\):/g," - "),t=s.safeLoad(t)},DicomComponent.prototype.convertBlockDataToCoords=function(e){for(var t=/\[[, \d\.-]*\]/.exec(e).toString(),n=JSON.parse('{ "data": '+t+"}"),i=[],o=[],a=0,r=0,l=n.data;r<l.length;r++){var s=l[r];a%2==0?i.push(parseFloat((s/10).toFixed(2))):o.push(parseFloat((s/10).toFixed(2))),a++}var c={x:i,y:o};return c},DicomComponent.prototype.dicomPullNumber=function(e){return Number(e.replace(/.*\[([\d\.-]*)\].*/,"$1"))},DicomComponent.prototype.dicomPullString=function(e){return e.replace(/.*\[(.*)\].*/,"$1")},DicomComponent.prototype.getBlockData=function(){var e=window.dicomData,t=this.convertDicomDumpToDict(e);this.insertList=[];for(var n=t["(300a,00b0)"],i=0,o=n;i<o.length;i++){var a=o[i],r=a["(300a,00f4)"][0]["(300a,0106)"],l=this.convertBlockDataToCoords(r),s=this.dicomPullString(a["(300a,0107)"][0]["(300a,0108)"]),c=this.dicomPullNumber(a["(300a,0111)"][0]["(300a,0114)"]),d=this.dicomPullNumber(a["(300a,0111)"][0]["(300a,0130)"])/10,p=this.dicomPullString(a["(300a,00b2)"]),m={machine:p,coordinates:l,applicator:s.toLowerCase(),energy:c,ssd:d};this.insertList.push(m)}localStorage.setItem("dicom_insertList",JSON.stringify(this.insertList))},DicomComponent.prototype.sendToParameterisation=function(e){this.insertUpdated(e.coordinates),this.insertData.machine=e.machine,this.insertData.parameterisation=this.parameterisation,this.insertData.energy=e.energy,this.insertData.applicator=e.applicator,this.insertData.ssd=e.ssd,localStorage.setItem("last_insertData",JSON.stringify(this.insertData)),this.router.navigate(["/parameterise"])},DicomComponent.prototype.parameterisationFromLocalStorage=function(e){var t=JSON.parse(e);this.parameterisation.insert=t.insert,this.parameterisation.width=t.width,this.parameterisation.length=t.length,this.parameterisation.circle=t.circle,this.parameterisation.ellipse=t.ellipse},DicomComponent.prototype.insertUpdated=function(e){var t=localStorage.getItem(JSON.stringify(e));t?this.parameterisationFromLocalStorage(t):(this.parameterisation.insert=e,this.parameterisation.width=null,this.parameterisation.length=null,this.parameterisation.circle=null,this.parameterisation.ellipse=null)},i([a.ViewChild("dicomOutput"),o("design:type",Object)],DicomComponent.prototype,"dicomOutputDir",void 0),i([a.ViewChild("getBlockDataButton"),o("design:type",Object)],DicomComponent.prototype,"getBlockDataButton",void 0),DicomComponent=i([a.Component({selector:"my-dicom",template:n(113),styles:["./dicom.component.css"]}),o("design:paramtypes",[l.TitleService,r.Router])],DicomComponent)}();t.DicomComponent=c},113:function(e,t){e.exports='<div class="mdl-grid">\n  <div class="mdl-cell mdl-cell--12-col">\n    <p>This Dicom loader does not send the Dicom file off to a server. The entire reading of the dicom file is done within javascript.\n    You can confirm this yourself by using the chrome web browser, pressing \'Ctrl + Shift + I\'\n    and then clicking on the network tab. When the file is chosen, then the block data is pulled and sent to parameterisation,\n    at no point in this interaction is there network traffic.</p>\n\n    <p>The only data that will be sent to the server will be on either the paremeterisation tab or the model tab, and this data will\n      just consist of x and y coordinates or widths, lengths, and factors.\n    </p>\n\n    <p>\n      Download a demo dicom file from <a href="/30x16x30_RandomElectronShapes.dcm">here</a>\n    </p>\n  <div>\n</div>\n<div class="mdl-grid">\n  <div class="mdl-cell mdl-cell--6-col">\n    <input type=\'file\' (change)=\'openFile($event)\'>\n    <div *ngIf="dicomWarning">{{dicomWarning}}</div>\n  </div>\n\n  <div class="mdl-cell mdl-cell--6-col">\n    <button #getBlockDataButton\n      mdl-button mdl-button-type="raised" \n      mdl-colored="primary" \n      mdl-ripple\n      [disabled]="true"\n      (click)="getBlockData()">Get Dicom Insert Data\n    </button>\n\n    \n  </div>\n\n  <div *ngFor="let insert of insertList" class="mdl-cell mdl-cell--6-col">\n    <mdl-card mdl-shadow="6">\n\n\n      <my-send-to-parameterisation\n        [machine]=insert.machine\n        [coordinates]=insert.coordinates\n        [applicator]=insert.applicator\n        [ssd]=insert.ssd\n        [energy]=insert.energy>\n      </my-send-to-parameterisation>\n\n      <mdl-card-actions mdl-card-border>\n        <button\n          mdl-button \n          mdl-ripple\n          (click)="sendToParameterisation(insert)">Send to parameterisation           \n        </button>\n      </mdl-card-actions>\n    </mdl-card>\n    \n\n\n    <!--<p>{{insert | json}}</p>-->\n  </div>\n\n\n\n</div>'},169:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),r=n(30),l=n(21),s=n(59),c=n(63),d=function(){function AppComponent(e,t,n,i){var o=this;this.electronApiService=e,this.myTitleService=t,this.router=n,this.title=i,n.events.filter(function(e){return e instanceof r.NavigationEnd}).subscribe(function(){o.pageTitle=o.myTitleService.getTitle(),o.title.setTitle(o.myTitleService.getTitle()+" | Electron Insert Factor Modelling")})}return AppComponent.prototype.ngOnInit=function(){var e=sessionStorage.redirect;delete sessionStorage.redirect,e&&e!=location.href&&(history.replaceState(null,null,e),this.router.navigate([e])),this.electronApiService.wakeUpServer(),this.pageTitle=this.myTitleService.getTitle(),this.title.setTitle(this.myTitleService.getTitle()+" | Electron Insert Factor Modelling")},AppComponent=i([a.Component({selector:"my-app",template:n(170)}),o("design:paramtypes",[s.ElectronApiService,c.TitleService,r.Router,l.Title])],AppComponent)}();t.AppComponent=d},170:function(e,t){e.exports='\n<!--<md-sidenav-layout>\n\n  <md-sidenav #sidenav mode="side" class="app-sidenav">\n    <nav class="mdl-navigation">\n      <a class="mdl-navigation__link" routerLink="/home" routerLinkActive="active" href>Home</a>\n      <a class="mdl-navigation__link" routerLink="/export-import" routerLinkActive="active" href>Export / Import</a>\n      <a class="mdl-navigation__link" routerLink="/specifications" routerLinkActive="active" href>Machine specifications</a>\n      <a class="mdl-navigation__link" routerLink="/dicom" routerLinkActive="active" href>Dicom shape extraction</a>\n      <a class="mdl-navigation__link" routerLink="/parameterise" routerLinkActive="active" href>Parameterise inserts</a>\n      <a class="mdl-navigation__link" routerLink="/model" routerLinkActive="active" href>Model insert factors</a>\n    </nav>\n  </md-sidenav>\n\n  <md-toolbar color="primary">\n    <button class="app-icon-button" (click)="sidenav.toggle()">\n      <i class="material-icons app-toolbar-menu">menu</i>\n    </button>\n\n    {{pageTitle}}\n\n    <span class="app-toolbar-filler"></span>\n    <button md-button (click)="isDarkTheme = !isDarkTheme">TOGGLE DARK THEME</button>\n  </md-toolbar>\n\n  <div class="app-content">\n    <router-outlet></router-outlet>\n  </div>\n\n\n</md-sidenav-layout>-->\n\n\n<mdl-layout mdl-layout-fixed-drawer mdl-layout-fixed-header>\n  <mdl-layout-header>\n    <mdl-layout-header-row>\n      <mdl-layout-title>{{pageTitle}}</mdl-layout-title>\n    </mdl-layout-header-row>\n  </mdl-layout-header>\n  <mdl-layout-drawer>\n    <mdl-layout-title>Electron Factors</mdl-layout-title>\n    <nav class="mdl-navigation">\n      <a class="mdl-navigation__link" routerLink="/home" routerLinkActive="active" href>Home</a>\n      <a class="mdl-navigation__link" routerLink="/export-import" routerLinkActive="active" href>Export / Import</a>\n      <a class="mdl-navigation__link" routerLink="/specifications" routerLinkActive="active" href>Machine specifications</a>\n      <a class="mdl-navigation__link" routerLink="/dicom" routerLinkActive="active" href>Dicom shape extraction</a>\n      <a class="mdl-navigation__link" routerLink="/parameterise" routerLinkActive="active" href>Parameterise inserts</a>\n      <a class="mdl-navigation__link" routerLink="/model" routerLinkActive="active" href>Model insert factors</a>\n    </nav>\n  </mdl-layout-drawer>\n  <mdl-layout-content>\n\n    <router-outlet></router-outlet>\n\n  </mdl-layout-content>\n</mdl-layout>'},171:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),r=n(172),l=function(){function PlotComponent(){this.insert=null,this.circle=null,this.ellipse=null,this.enabled=!0,this.jsonValid=!0,this.plt=Bokeh.Plotting,this.tools="pan,crosshair,wheel_zoom,box_zoom,reset,save",this.xrange=Bokeh.Range1d(-6,6),this.yrange=Bokeh.Range1d(-6,6),this.fig=this.plt.figure({title:"Electron Insert Plot",tools:this.tools,x_range:this.xrange,y_range:this.yrange,plot_width:300,plot_height:300}),this.source=new Bokeh.ColumnDataSource,this.doc=new Bokeh.Document}return PlotComponent.prototype.ngOnChanges=function(){this.jsonValid=!1,this.tempSource={xs:[[0],[0],[0]],ys:[[0],[0],[0]],colour:["navy","firebrick","green"]};var e=[],t=[];this.enabled&&(this.insert&&"x"in this.insert&&"y"in this.insert&&(this.tempSource.xs[0]=this.insert.x.concat(this.insert.x[0]),this.tempSource.ys[0]=this.insert.y.concat(this.insert.y[0]),e=e.concat(this.tempSource.xs[0]),t=t.concat(this.tempSource.ys[0])),this.circle&&"x"in this.circle&&"y"in this.circle&&(this.tempSource.xs[1]=this.circle.x,this.tempSource.ys[1]=this.circle.y,e=e.concat(this.tempSource.xs[1]),t=t.concat(this.tempSource.ys[1])),this.ellipse&&"x"in this.ellipse&&"y"in this.ellipse&&(this.tempSource.xs[2]=this.ellipse.x,this.tempSource.ys[2]=this.ellipse.y,e=e.concat(this.tempSource.xs[2]),t=t.concat(this.tempSource.ys[2])));var n=Math.max.apply(Math,e),i=Math.min.apply(Math,e),o=Math.max.apply(Math,t),a=Math.min.apply(Math,t),r=1.1*Math.max(n-i,o-a),l=(n+i)/2+r/2,s=(n+i)/2-r/2,c=(o+a)/2+r/2,d=(o+a)/2-r/2;this.fig.attributes.x_range.start=s,this.fig.attributes.x_range.end=l,this.fig.attributes.y_range.start=d,this.fig.attributes.y_range.end=c,this.source.data=this.tempSource},PlotComponent.prototype.ngAfterViewInit=function(){this.fig.multi_line({field:"xs"},{field:"ys"},{source:this.source,line_width:2,color:{field:"colour"}}),this.doc.add_root(this.fig),Bokeh.embed.add_document_standalone(this.doc,this.bokehplot.nativeElement)},i([a.Input(),o("design:type",r.Coordinates)],PlotComponent.prototype,"insert",void 0),i([a.Input(),o("design:type",r.Coordinates)],PlotComponent.prototype,"circle",void 0),
i([a.Input(),o("design:type",r.Coordinates)],PlotComponent.prototype,"ellipse",void 0),i([a.Input(),o("design:type",Boolean)],PlotComponent.prototype,"enabled",void 0),i([a.ViewChild("bokehplot"),o("design:type",Object)],PlotComponent.prototype,"bokehplot",void 0),PlotComponent=i([a.Component({selector:"my-plot",template:n(173),styles:[n(174)]}),o("design:paramtypes",[])],PlotComponent)}();t.PlotComponent=l},172:function(e,t){"use strict";var n=function(){function Coordinates(e,t){this.x=e,this.y=t}return Coordinates}();t.Coordinates=n},173:function(e,t){e.exports='\n  <div class="bk-root" style="height:300px">\n    <div #bokehplot></div>\n  </div>\n\n\n  <div [hidden]="jsonValid" class="alert alert-danger">\n      {{jsonErrorMessage}}\n  </div>\n'},174:function(e,t){e.exports=""},175:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),r=n(114),l=function(){function WidthLengthTableComponent(){this.tableData=[{width:null,length:null}],this.tableModel=new r.MdlDefaultTableModel([{key:"width",name:"Width",sortable:!0,numeric:!0},{key:"length",name:"Length",sortable:!0,numeric:!0}])}return WidthLengthTableComponent.prototype.ngOnChanges=function(){this.enabled?(this.tableData[0].width=this.width,this.tableData[0].length=this.length):(this.tableData[0].width=null,this.tableData[0].length=null)},WidthLengthTableComponent.prototype.ngOnInit=function(){this.tableModel.addAll(this.tableData)},i([a.Input(),o("design:type",Number)],WidthLengthTableComponent.prototype,"width",void 0),i([a.Input(),o("design:type",Number)],WidthLengthTableComponent.prototype,"length",void 0),i([a.Input(),o("design:type",Boolean)],WidthLengthTableComponent.prototype,"enabled",void 0),WidthLengthTableComponent=i([a.Component({selector:"my-width-length-table",template:n(176)}),o("design:paramtypes",[])],WidthLengthTableComponent)}();t.WidthLengthTableComponent=l},176:function(e,t){e.exports='<mdl-table mdl-shadow="2"\n  [table-model]="tableModel">\n</mdl-table>'},177:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),r=n(178),l=n(172),s=function(){function JsonInputComponent(){this.insertUpdated=new a.EventEmitter,this.jsonStatus=new a.EventEmitter,this.jsonValid=!0}return JsonInputComponent.prototype.onInput=function(e){this.parseAndCheckJSON(e),this.insertUpdated.emit(this.insert)},JsonInputComponent.prototype.ngOnChanges=function(){this.refresh&&(this.jsonInputDir.value=(new r.MyJsonPipe).transform(this.insert),this.parseAndCheckJSON(this.jsonInputDir.value),this.refresh=!1)},JsonInputComponent.prototype.parseAndCheckJSON=function(e){var t=this.jsonValid;this.jsonValid=!1;try{var n=JSON.parse(e);if("x"in n&&"y"in n)if(n.x.length===n.y.length){var i=n.x,o=n.y,a={x:i,y:o};this.insert=a,this.jsonValid=!0}else this.jsonErrorMessage="The length of x doesn't match the length of y.";else this.jsonErrorMessage="Either x or y is missing."}catch(r){this.jsonErrorMessage="Error in JSON input. "+r}finally{this.jsonValid!=t&&this.jsonStatus.emit(this.jsonValid)}},i([a.Input(),o("design:type",l.Coordinates)],JsonInputComponent.prototype,"insert",void 0),i([a.Input(),o("design:type",Boolean)],JsonInputComponent.prototype,"jsonDisabled",void 0),i([a.Input(),o("design:type",Boolean)],JsonInputComponent.prototype,"refresh",void 0),i([a.Output(),o("design:type",Object)],JsonInputComponent.prototype,"insertUpdated",void 0),i([a.Output(),o("design:type",Object)],JsonInputComponent.prototype,"jsonStatus",void 0),i([a.ViewChild("jsonInput"),o("design:type",Object)],JsonInputComponent.prototype,"jsonInputDir",void 0),JsonInputComponent=i([a.Component({selector:"my-json-input",template:n(179)}),o("design:paramtypes",[])],JsonInputComponent)}();t.JsonInputComponent=s},178:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),r=function(){function MyJsonPipe(){}return MyJsonPipe.prototype.transform=function(e){var t=JSON.stringify(e,null,4);return t=t.replace(/(-?\d+(\.\d+)?),\n\s*/g,"$1, "),t=t.replace(/null,\n\s*/g,"null, ")},MyJsonPipe=i([a.Pipe({name:"myJson",pure:!1}),o("design:paramtypes",[])],MyJsonPipe)}();t.MyJsonPipe=r},179:function(e,t){e.exports='<mdl-textfield #jsonInput\n  [value]="insert | myJson"\n  (input)="onInput($event.target.value)"\n  rows="12" \n  style="width:100%"\n  [disabled]=jsonDisabled>\n</mdl-textfield>\n<div *ngIf="!jsonValid">\n  {{jsonErrorMessage}}\n</div>'},180:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),r=function(){function NotYetImplimentedComponent(){}return NotYetImplimentedComponent=i([a.Component({selector:"my-not-yet-implimented",template:n(181)}),o("design:paramtypes",[])],NotYetImplimentedComponent)}();t.NotYetImplimentedComponent=r},181:function(e,t){e.exports='<div class="mdl-grid">\n  <div class="mdl-cell mdl-cell--12-col">\n    Due to this web app being a work in progress this page is not yet implimented.\n  </div>\n</div>'},182:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),r=n(178),l=n(22),s=function(){function JsonEditComponent(){this.buttonText="Button",this.inputUpdated=new a.EventEmitter,this.validationCheck=function(e){},this.useMyJsonPipe=!1,this.lines=10,this.jsonValid=!0}return JsonEditComponent.prototype.onInput=function(e){this.parseAndCheckJSON(e)},JsonEditComponent.prototype.ngOnInit=function(){var e="";e=this.useMyJsonPipe?(new r.MyJsonPipe).transform(this.input):(new l.JsonPipe).transform(this.input),this.lines=e.split(/\r\n|\r|\n/).length,this.editedInput=this.input},JsonEditComponent.prototype.updateInput=function(){this.input=this.editedInput,this.inputUpdated.emit(this.input)},JsonEditComponent.prototype.parseAndCheckJSON=function(e){this.jsonValid;this.jsonValid=!1;try{var t=JSON.parse(e);this.validationCheck(t),this.editedInput=t,this.jsonValid=!0}catch(n){this.jsonErrorMessage="Error in JSON input. "+n}},i([a.Input(),o("design:type",Object)],JsonEditComponent.prototype,"input",void 0),i([a.Input(),o("design:type",String)],JsonEditComponent.prototype,"buttonText",void 0),i([a.Output(),o("design:type",Object)],JsonEditComponent.prototype,"inputUpdated",void 0),i([a.Input(),o("design:type",Function)],JsonEditComponent.prototype,"validationCheck",void 0),i([a.Input(),o("design:type",Boolean)],JsonEditComponent.prototype,"useMyJsonPipe",void 0),i([a.ViewChild("jsonInput"),o("design:type",Object)],JsonEditComponent.prototype,"jsonInputDir",void 0),JsonEditComponent=i([a.Component({selector:"my-json-edit",template:n(183)}),o("design:paramtypes",[])],JsonEditComponent)}();t.JsonEditComponent=s},183:function(e,t){e.exports='<button\n  mdl-button mdl-button-type="raised" \n  mdl-colored="primary" \n  mdl-ripple\n  [disabled]="!jsonValid || input==editedInput"\n  (click)="updateInput()">{{buttonText}} \n</button>\n<div *ngIf="!jsonValid">\n  {{jsonErrorMessage}}\n</div>\n<mdl-textfield *ngIf="!useMyJsonPipe" #jsonInput\n  [value]="input | json"\n  (input)="onInput($event.target.value)"\n  [rows]="lines" \n  style="width:100%">\n</mdl-textfield>\n<mdl-textfield *ngIf="useMyJsonPipe" #jsonInput\n  [value]="input | myJson"\n  (input)="onInput($event.target.value)"\n  [rows]="lines" \n  style="width:100%">\n</mdl-textfield>'},184:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),r=n(172),l=n(114),s=function(){function SendToParameterisationComponent(){this.tableData=[{machine:null,applicator:null,energy:null,ssd:null}],this.tableModel=new l.MdlDefaultTableModel([{key:"machine",name:"Machine",sortable:!0,numeric:!1},{key:"applicator",name:"App",sortable:!0,numeric:!1},{key:"energy",name:"Eng",sortable:!0,numeric:!0},{key:"ssd",name:"SSD",sortable:!0,numeric:!0}])}return SendToParameterisationComponent.prototype.ngOnInit=function(){this.tableData[0].machine=this.machine,this.tableData[0].applicator=this.applicator,this.tableData[0].energy=this.energy,this.tableData[0].ssd=this.ssd,this.tableModel.addAll(this.tableData)},i([a.Input(),o("design:type",String)],SendToParameterisationComponent.prototype,"applicator",void 0),i([a.Input(),o("design:type",String)],SendToParameterisationComponent.prototype,"machine",void 0),i([a.Input(),o("design:type",Number)],SendToParameterisationComponent.prototype,"energy",void 0),i([a.Input(),o("design:type",Number)],SendToParameterisationComponent.prototype,"ssd",void 0),i([a.Input(),o("design:type",r.Coordinates)],SendToParameterisationComponent.prototype,"coordinates",void 0),SendToParameterisationComponent=i([a.Component({selector:"my-send-to-parameterisation",template:n(185)}),o("design:paramtypes",[])],SendToParameterisationComponent)}();t.SendToParameterisationComponent=s},185:function(e,t){e.exports='<div class="mdl-grid">\n  <div class="mdl-cell mdl-cell--12-col">\n    <my-plot \n      [insert]="coordinates">\n    </my-plot>\n  </div>\n  <div class="mdl-cell mdl-cell--12-col">\n    <mdl-table mdl-shadow="2"\n      [table-model]="tableModel">\n    </mdl-table>\n  </div>\n</div>\n\n'},186:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),r=function(){function BokehPcolourComponent(){this.title="Figure Title",this.plot_width=300,this.plot_height=300,this.scatter_z=[.5],this.enabled=!0,this.plt=Bokeh.Plotting,this.tools="pan,crosshair,wheel_zoom,box_zoom,reset,save",this.viridis_hex=["#440154","#440256","#450457","#450559","#46075a","#46085c","#460a5d","#460b5e","#470d60","#470e61","#471063","#471164","#471365","#481467","#481668","#481769","#48186a","#481a6c","#481b6d","#481c6e","#481d6f","#481f70","#482071","#482173","#482374","#482475","#482576","#482677","#482878","#482979","#472a7a","#472c7a","#472d7b","#472e7c","#472f7d","#46307e","#46327e","#46337f","#463480","#453581","#453781","#453882","#443983","#443a83","#443b84","#433d84","#433e85","#423f85","#424086","#424186","#414287","#414487","#404588","#404688","#3f4788","#3f4889","#3e4989","#3e4a89","#3e4c8a","#3d4d8a","#3d4e8a","#3c4f8a","#3c508b","#3b518b","#3b528b","#3a538b","#3a548c","#39558c","#39568c","#38588c","#38598c","#375a8c","#375b8d","#365c8d","#365d8d","#355e8d","#355f8d","#34608d","#34618d","#33628d","#33638d","#32648e","#32658e","#31668e","#31678e","#31688e","#30698e","#306a8e","#2f6b8e","#2f6c8e","#2e6d8e","#2e6e8e","#2e6f8e","#2d708e","#2d718e","#2c718e","#2c728e","#2c738e","#2b748e","#2b758e","#2a768e","#2a778e","#2a788e","#29798e","#297a8e","#297b8e","#287c8e","#287d8e","#277e8e","#277f8e","#27808e","#26818e","#26828e","#26828e","#25838e","#25848e","#25858e","#24868e","#24878e","#23888e","#23898e","#238a8d","#228b8d","#228c8d","#228d8d","#218e8d","#218f8d","#21908d","#21918c","#20928c","#20928c","#20938c","#1f948c","#1f958b","#1f968b","#1f978b","#1f988b","#1f998a","#1f9a8a","#1e9b8a","#1e9c89","#1e9d89","#1f9e89","#1f9f88","#1fa088","#1fa188","#1fa187","#1fa287","#20a386","#20a486","#21a585","#21a685","#22a785","#22a884","#23a983","#24aa83","#25ab82","#25ac82","#26ad81","#27ad81","#28ae80","#29af7f","#2ab07f","#2cb17e","#2db27d","#2eb37c","#2fb47c","#31b57b","#32b67a","#34b679","#35b779","#37b878","#38b977","#3aba76","#3bbb75","#3dbc74","#3fbc73","#40bd72","#42be71","#44bf70","#46c06f","#48c16e","#4ac16d","#4cc26c","#4ec36b","#50c46a","#52c569","#54c568","#56c667","#58c765","#5ac864","#5cc863","#5ec962","#60ca60","#63cb5f","#65cb5e","#67cc5c","#69cd5b","#6ccd5a","#6ece58","#70cf57","#73d056","#75d054","#77d153","#7ad151","#7cd250","#7fd34e","#81d34d","#84d44b","#86d549","#89d548","#8bd646","#8ed645","#90d743","#93d741","#95d840","#98d83e","#9bd93c","#9dd93b","#a0da39","#a2da37","#a5db36","#a8db34","#aadc32","#addc30","#b0dd2f","#b2dd2d","#b5de2b","#b8de29","#bade28","#bddf26","#c0df25","#c2df23","#c5e021","#c8e020","#cae11f","#cde11d","#d0e11c","#d2e21b","#d5e21a","#d8e219","#dae319","#dde318","#dfe318","#e2e418","#e5e419","#e7e419","#eae51a","#ece51b","#efe51c","#f1e51d","#f4e61e","#f6e620","#f8e621","#fbe723","#fde725"],this.viridis=function(e){return""},this.source=new Bokeh.ColumnDataSource,this.doc=new Bokeh.Document}return BokehPcolourComponent.prototype.ngOnInit=function(){this.fig=this.plt.figure({title:this.title,tools:this.tools,plot_width:this.plot_width,plot_height:this.plot_height}),this.viridis=this.interpolateArray(this.viridis_hex)},BokehPcolourComponent.prototype.ngOnChanges=function(){this.tempSource={x:[0],y:[0]},this.enabled&&this.scatter_x&&this.scatter_y&&(this.tempSource.x=this.scatter_x,this.tempSource.y=this.scatter_y),this.source.data=this.tempSource},BokehPcolourComponent.prototype.ngAfterViewInit=function(){var e=Math.min.apply(Math,this.scatter_z),t=Math.max.apply(Math,this.scatter_z),n=[],i=[];if(e==t)n=[.5];else for(var o=t-e,a=0,r=this.scatter_z;a<r.length;a++){var l=r[a];n.push((l-e)/o)}for(var s=0,c=n;s<c.length;s++){var l=c[s];i.push(this.viridis(l))}this.fig.circle({field:"x"},{field:"y"},{source:this.source,size:15,line_color:"black",fill_color:i,line_width:2}),this.doc.add_root(this.fig),Bokeh.embed.add_document_standalone(this.doc,this.bokehplot.nativeElement)},BokehPcolourComponent.prototype.hex2rgb=function(e){return{r:parseInt(e.slice(1,3),16)/255,g:parseInt(e.slice(3,5),16)/255,b:parseInt(e.slice(5,7),16)/255}},BokehPcolourComponent.prototype.zeroPadHex=function(e){return"00".slice(e.length)+e},BokehPcolourComponent.prototype.rgb2hex=function(e){return"#"+[e.r,e.g,e.b].map(function(e){return Math.round(255*e).toString(16)}).map(this.zeroPadHex).join("")},BokehPcolourComponent.prototype.interpolate=function(e,t){var n=this,i=this.hex2rgb(e),o=this.hex2rgb(t),a=i.r,r=i.g,l=i.b,s=o.r-a,c=o.g-r,d=o.b-l;return function(e){return n.rgb2hex({r:a+s*e,g:r+c*e,b:l+d*e})}},BokehPcolourComponent.prototype.interpolateArray=function(e){for(var t=e.length-2,n=1/t,i=[],o=0;o<=t;o++)i[o]=this.interpolate(e[o],e[o+1]);return function(e){if(e<0||e>1)throw new Error("Outside the allowed range of [0, 1]");var o=Math.floor(e*t),a=o*n;return i[o](e/n-a/n)}},i([a.Input(),o("design:type",String)],BokehPcolourComponent.prototype,"title",void 0),i([a.Input(),o("design:type",Number)],BokehPcolourComponent.prototype,"plot_width",void 0),i([a.Input(),o("design:type",Number)],BokehPcolourComponent.prototype,"plot_height",void 0),i([a.Input(),o("design:type",Array)],BokehPcolourComponent.prototype,"scatter_x",void 0),i([a.Input(),o("design:type",Array)],BokehPcolourComponent.prototype,"scatter_y",void 0),i([a.Input(),o("design:type",Array)],BokehPcolourComponent.prototype,"scatter_z",void 0),i([a.Input(),o("design:type",Array)],BokehPcolourComponent.prototype,"pcolour_x",void 0),i([a.Input(),o("design:type",Array)],BokehPcolourComponent.prototype,"pcolour_y",void 0),i([a.Input(),o("design:type",Array)],BokehPcolourComponent.prototype,"pcolour_z",void 0),i([a.Input(),o("design:type",Boolean)],BokehPcolourComponent.prototype,"enabled",void 0),i([a.ViewChild("bokehplot"),o("design:type",Object)],BokehPcolourComponent.prototype,"bokehplot",void 0),BokehPcolourComponent=i([a.Component({selector:"my-bokeh-pcolour",template:n(187)}),o("design:paramtypes",[])],BokehPcolourComponent)}();t.BokehPcolourComponent=r},187:function(e,t){e.exports='<div class="bk-root" style="width:600px; height:400px">\n  <div #bokehplot></div>\n</div>\n'}});
//# sourceMappingURL=app.53c9e6ac507e00ae8878.js.map