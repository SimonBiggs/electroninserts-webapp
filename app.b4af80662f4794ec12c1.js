webpackJsonp([0],{0:function(t,e,n){"use strict";var o=n(1),i=n(3),r=n(24);i.enableProdMode(),o.platformBrowserDynamic().bootstrapModule(r.AppModule)},24:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},r=n(3),a=n(22),s=n(25),l=n(29),c=n(30),p=n(71),d=n(122),u=n(124),h=n(59),m=n(69),f=n(128),y=n(130),g=n(132),v=n(64),b=n(66),C=n(60),j=function(){function AppModule(){}return AppModule=o([r.NgModule({imports:[a.BrowserModule,s.FormsModule,l.HttpModule,p.MdlModule,c.routing],declarations:[d.AppComponent,h.ParameteriseComponent,u.PlotComponent,m.PageNotFoundComponent,f.WidthLengthTableComponent,y.JsonInputComponent,g.MyJsonPipe],providers:[v.ElectronApiService,b.DataService,C.CookieService],bootstrap:[d.AppComponent]}),i("design:paramtypes",[])],AppModule)}();e.AppModule=j},30:function(t,e,n){"use strict";var o=n(31),i=n(59),r=n(69),a=[{path:"parameterise",component:i.ParameteriseComponent},{path:"",redirectTo:"/parameterise",pathMatch:"full"},{path:"**",component:r.PageNotFoundComponent}];e.appRoutingProviders=[],e.routing=o.RouterModule.forRoot(a)},59:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},r=n(3),a=n(60),s=n(64),l=n(66),c=n(67),p=function(){function ParameteriseComponent(t,e,n){this.electronApiService=t,this.dataService=e,this.cookieService=n,this.parameterisation={insert:{x:[0],y:[0]},width:null,length:null,circle:null,ellipse:null},this.jsonValid=!0,this.serverResponseValid=!0,this.dataInFlight=!1,this.submitDisabled=!1}return ParameteriseComponent.prototype.getData=function(){var t=this.cookieService.getObject("last_parameterisation");t?this.parameterisationFromCookie(t):this.loadDemoData()},ParameteriseComponent.prototype.loadDemoData=function(){var t=JSON.parse(JSON.stringify(c.DEMO_PARAMETERISE_INPUT));this.insertUpdated(t.insert)},ParameteriseComponent.prototype.onSubmit=function(){var t=this;this.dataInFlight=!0,this.checkSubmitButton(),this.electronApiService.parameteriseInsert(JSON.stringify(this.parameterisation.insert)).then(function(e){t.parameterisation.circle=e.circle,t.parameterisation.ellipse=e.ellipse,t.parameterisation.width=e.width,t.parameterisation.length=e.length,t.dataInFlight=!1,t.serverResponseValid=!0,t.checkSubmitButton(),t.cookieService.putObject(JSON.stringify(t.parameterisation.insert),t.parameterisation),t.cookieService.putObject("last_parameterisation",t.parameterisation)})},ParameteriseComponent.prototype.parameterisationFromCookie=function(t){this.parameterisation.insert=t.insert,this.parameterisation.width=t.width,this.parameterisation.length=t.length,this.parameterisation.circle=t.circle,this.parameterisation.ellipse=t.ellipse},ParameteriseComponent.prototype.insertUpdated=function(t){var e=this.cookieService.getObject(JSON.stringify(t));e?this.parameterisationFromCookie(e):(this.parameterisation.insert=t,this.parameterisation.width=null,this.parameterisation.length=null,this.parameterisation.circle=null,this.parameterisation.ellipse=null)},ParameteriseComponent.prototype.onJsonStatusChange=function(t){this.jsonValid=t,this.checkSubmitButton()},ParameteriseComponent.prototype.checkSubmitButton=function(){this.dataInFlight||!this.jsonValid?this.submitDisabled=!0:this.submitDisabled=!1},ParameteriseComponent.prototype.ngOnInit=function(){this.getData()},ParameteriseComponent=o([r.Component({selector:"my-parameterise",template:n(68)}),i("design:paramtypes",[s.ElectronApiService,l.DataService,a.CookieService])],ParameteriseComponent)}();e.ParameteriseComponent=p},64:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},r=n(3),a=n(29);n(65);var s=function(){function ElectronApiService(t){this.http=t,this.parameteriseURL="http://electronapi.simonbiggs.net/parameterise",this.wakeUpURL="http://electronapi.simonbiggs.net/wakeup"}return ElectronApiService.prototype.wakeUpServer=function(){return this.http.get(this.wakeUpURL).toPromise()},ElectronApiService.prototype.parameteriseInsert=function(t){return this.http.post(this.parameteriseURL,t).toPromise().then(function(t){return t.json()})["catch"](this.handleError)},ElectronApiService.prototype.handleError=function(t){return console.error("An error occurred",t),Promise.reject(t.message||t)},ElectronApiService=o([r.Injectable(),i("design:paramtypes",[a.Http])],ElectronApiService)}();e.ElectronApiService=s},66:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},r=n(3),a=n(67),s=function(){function DataService(){}return DataService.prototype.getParameterisationData=function(){return Promise.resolve(a.DEMO_PARAMETERISE_INPUT)},DataService=o([r.Injectable(),i("design:paramtypes",[])],DataService)}();e.DataService=s},67:function(t,e){"use strict";var n={x:[.99,-.14,-1,-1.73,-2.56,-3.17,-3.49,-3.57,-3.17,-2.52,-1.76,-1.04,-.17,.77,1.63,2.36,2.79,2.91,3.04,3.22,3.34,3.37,3.08,2.54,1.88,1.02,.99],y:[5.05,4.98,4.42,3.24,1.68,.6,-.64,-1.48,-2.38,-3.77,-4.81,-5.26,-5.51,-5.58,-5.23,-4.64,-3.77,-2.77,-1.68,-.29,1.23,2.68,3.8,4.6,5.01,5.08,5.05]};e.DEMO_PARAMETERISE_INPUT={insert:n,circle:null,ellipse:null,width:null,length:null}},68:function(t,e){t.exports='<div class="mdl-grid">\n  Parameterisations are cached within your browser\'s cookies.\n</div>\n<div class="mdl-grid">\n    <div class="mdl-cell mdl-cell--6-col">\n    <my-json-input\n      [insert]="parameterisation.insert"\n      [jsonDisabled]="dataInFlight"\n      (insertUpdated)="insertUpdated($event)"\n      (jsonStatus)="onJsonStatusChange($event)">\n    </my-json-input>\n\n    <div class="mdl-grid">\n      <div class="mdl-cell mdl-cell--6-col">\n        <button\n          mdl-button mdl-button-type="raised" \n          mdl-colored="primary" \n          mdl-ripple\n          [disabled]="dataInFlight"\n          (click)="loadDemoData()">Load Demo Data            \n        </button>\n        <button\n          mdl-button mdl-button-type="raised" \n          mdl-colored="primary" \n          mdl-ripple\n          [disabled]="submitDisabled"\n          (click)="onSubmit()">Submit            \n        </button>\n        <div [hidden]="serverResponseValid">\n          {{serverErrorMessage}}\n        </div>\n      </div>\n      <div class="mdl-cell mdl-cell--6-col">\n        <my-width-length-table\n          [width]="parameterisation.width"\n          [length]="parameterisation.length"\n          [enabled]="jsonValid">\n        </my-width-length-table>\n      </div>\n    </div>\n\n    </div>\n    <div class="mdl-cell mdl-cell--6-col">\n      <my-plot \n        [insert]="parameterisation.insert"\n        [circle]="parameterisation.circle"\n        [ellipse]="parameterisation.ellipse"\n        [enabled]="jsonValid">\n      </my-plot>\n\n    </div>\n</div>\n'},69:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},r=n(3),a=function(){function PageNotFoundComponent(){}return PageNotFoundComponent=o([r.Component({selector:"my-page-not-found",template:n(70)}),i("design:paramtypes",[])],PageNotFoundComponent)}();e.PageNotFoundComponent=a},70:function(t,e){t.exports="404"},122:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},r=n(3),a=n(64),s=function(){function AppComponent(t){this.electronApiService=t}return AppComponent.prototype.ngOnInit=function(){this.electronApiService.wakeUpServer()},AppComponent=o([r.Component({selector:"my-app",template:n(123)}),i("design:paramtypes",[a.ElectronApiService])],AppComponent)}();e.AppComponent=s},123:function(t,e){t.exports='<mdl-layout mdl-layout-fixed-drawer mdl-layout-fixed-header>\n  <mdl-layout-header>\n    <mdl-layout-header-row>\n      <mdl-layout-title>Parameterise Inserts</mdl-layout-title>\n    </mdl-layout-header-row>\n  </mdl-layout-header>\n  <mdl-layout-drawer>\n    <mdl-layout-title>Electron Factors</mdl-layout-title>\n    <nav class="mdl-navigation">\n      <a class="mdl-navigation__link" routerLink="/home" routerLinkActive="active" href>Home</a>\n      <a class="mdl-navigation__link" routerLink="/load-save" routerLinkActive="active" href>Load / Save</a>\n      <a class="mdl-navigation__link" routerLink="/specifications" routerLinkActive="active" href>Machine specifications</a>\n      <a class="mdl-navigation__link" routerLink="/dicom" routerLinkActive="active" href>Dicom shape extraction</a>\n      <a class="mdl-navigation__link" routerLink="/parameterise" routerLinkActive="active" href>Parameterise inserts</a>\n      <a class="mdl-navigation__link" routerLink="/model" routerLinkActive="active" href>Model insert factors</a>\n    </nav>\n  </mdl-layout-drawer>\n  <mdl-layout-content>\n    <router-outlet></router-outlet>\n  </mdl-layout-content>\n</mdl-layout>'},124:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},r=n(3),a=n(125),s=function(){function PlotComponent(){this.jsonValid=!0,this.plt=Bokeh.Plotting,this.tools="pan,crosshair,wheel_zoom,box_zoom,reset,save",this.xrange=Bokeh.Range1d(-6,6),this.yrange=Bokeh.Range1d(-6,6),this.fig=this.plt.figure({title:"Electron Insert Plot",tools:this.tools,plot_width:300,plot_height:300,x_range:this.xrange,y_range:this.yrange}),this.source=new Bokeh.ColumnDataSource,this.doc=new Bokeh.Document}return PlotComponent.prototype.ngOnChanges=function(){this.jsonValid=!1,this.tempSource={xs:[[0],[0],[0]],ys:[[0],[0],[0]],colour:["navy","firebrick","green"]},this.enabled&&(this.insert&&"x"in this.insert&&"y"in this.insert&&(this.tempSource.xs[0]=this.insert.x.concat(this.insert.x[0]),this.tempSource.ys[0]=this.insert.y.concat(this.insert.y[0])),this.circle&&"x"in this.circle&&"y"in this.circle&&(this.tempSource.xs[1]=this.circle.x,this.tempSource.ys[1]=this.circle.y),this.ellipse&&"x"in this.ellipse&&"y"in this.ellipse&&(this.tempSource.xs[2]=this.ellipse.x,this.tempSource.ys[2]=this.ellipse.y)),this.source.data=this.tempSource},PlotComponent.prototype.ngAfterViewInit=function(){this.ngOnChanges(),this.fig.multi_line({field:"xs"},{field:"ys"},{source:this.source,line_width:2,color:{field:"colour"}}),this.doc.add_root(this.fig),Bokeh.embed.add_document_standalone(this.doc,this.bokehplot.nativeElement)},o([r.Input(),i("design:type",a.Coordinates)],PlotComponent.prototype,"insert",void 0),o([r.Input(),i("design:type",a.Coordinates)],PlotComponent.prototype,"circle",void 0),o([r.Input(),i("design:type",a.Coordinates)],PlotComponent.prototype,"ellipse",void 0),o([r.Input(),i("design:type",Boolean)],PlotComponent.prototype,"enabled",void 0),o([r.ViewChild("bokehplot"),i("design:type",Object)],PlotComponent.prototype,"bokehplot",void 0),PlotComponent=o([r.Component({selector:"my-plot",template:n(126),styles:[n(127)]}),i("design:paramtypes",[])],PlotComponent)}();e.PlotComponent=s},125:function(t,e){"use strict";var n=function(){function Coordinates(t,e){this.x=t,this.y=e}return Coordinates}();e.Coordinates=n},126:function(t,e){t.exports='\n  <div class="bk-root" style="height:300px">\n    <div #bokehplot></div>\n  </div>\n\n\n  <div [hidden]="jsonValid" class="alert alert-danger">\n      {{jsonErrorMessage}}\n  </div>\n'},127:function(t,e){t.exports=""},128:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},r=n(3),a=n(71),s=function(){function WidthLengthTableComponent(){this.tableData=[{width:null,length:null}],this.tableModel=new a.MdlDefaultTableModel([{key:"width",name:"Width",sortable:!0,numeric:!0},{key:"length",name:"Length",sortable:!0,numeric:!0}])}return WidthLengthTableComponent.prototype.ngOnChanges=function(){this.enabled?(this.tableData[0].width=this.width,this.tableData[0].length=this.length):(this.tableData[0].width=null,this.tableData[0].length=null)},WidthLengthTableComponent.prototype.ngOnInit=function(){this.tableModel.addAll(this.tableData)},o([r.Input(),i("design:type",Number)],WidthLengthTableComponent.prototype,"width",void 0),o([r.Input(),i("design:type",Number)],WidthLengthTableComponent.prototype,"length",void 0),o([r.Input(),i("design:type",Boolean)],WidthLengthTableComponent.prototype,"enabled",void 0),WidthLengthTableComponent=o([r.Component({selector:"my-width-length-table",template:n(129)}),i("design:paramtypes",[])],WidthLengthTableComponent)}();e.WidthLengthTableComponent=s},129:function(t,e){t.exports='<mdl-table mdl-shadow="2"\n  [table-model]="tableModel">\n</mdl-table>'},130:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},r=n(3),a=n(125),s=function(){function JsonInputComponent(){this.insertUpdated=new r.EventEmitter,this.jsonStatus=new r.EventEmitter,this.jsonValid=!0}return JsonInputComponent.prototype.onInput=function(t){this.parseAndCheckJSON(t),this.insertUpdated.emit(this.insert)},JsonInputComponent.prototype.parseAndCheckJSON=function(t){var e=this.jsonValid;this.jsonValid=!1;try{var n=JSON.parse(t);if("x"in n&&"y"in n)if(n.x.length===n.y.length){var o=n.x,i=n.y,r={x:o,y:i};this.insert=r,this.jsonValid=!0}else this.jsonErrorMessage="The length of x doesn't match the length of y.";else this.jsonErrorMessage="Either x or y is missing."}catch(a){this.jsonErrorMessage="Error in JSON input. "+a}finally{this.jsonValid!=e&&this.jsonStatus.emit(this.jsonValid)}},o([r.Input(),i("design:type",a.Coordinates)],JsonInputComponent.prototype,"insert",void 0),o([r.Input(),i("design:type",Boolean)],JsonInputComponent.prototype,"jsonDisabled",void 0),o([r.Output(),i("design:type",Object)],JsonInputComponent.prototype,"insertUpdated",void 0),o([r.Output(),i("design:type",Object)],JsonInputComponent.prototype,"jsonStatus",void 0),JsonInputComponent=o([r.Component({selector:"my-json-input",template:n(131)}),i("design:paramtypes",[])],JsonInputComponent)}();e.JsonInputComponent=s},131:function(t,e){t.exports='<mdl-textfield \n  [value]="insert | myJson"\n  (input)="onInput($event.target.value)"\n  rows="7" \n  style="width:100%"\n  [disabled]=jsonDisabled>\n</mdl-textfield>\n<div [hidden]="jsonValid">\n  {{jsonErrorMessage}}\n</div>'},132:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},r=n(3),a=function(){function MyJsonPipe(){}return MyJsonPipe.prototype.transform=function(t){var e=JSON.stringify(t);return e=e.replace(/,/g,", ")},MyJsonPipe=o([r.Pipe({name:"myJson",pure:!1}),i("design:paramtypes",[])],MyJsonPipe)}();e.MyJsonPipe=a}});
//# sourceMappingURL=app.b4af80662f4794ec12c1.js.map