webpackJsonp([0],{0:function(e,t,n){"use strict";var o=n(1),i=n(3),r=n(24);i.enableProdMode(),o.platformBrowserDynamic().bootstrapModule(r.AppModule)},24:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=n(3),a=n(22),l=n(25),s=n(29),c=n(30),p=n(60),d=n(118),h=n(121),m=n(59),u=n(116),f=n(111),y=n(113),g=function(){function AppModule(){}return AppModule=o([r.NgModule({imports:[a.BrowserModule,l.FormsModule,s.HttpModule,p.MdlModule,c.routing],declarations:[d.AppComponent,m.ParameteriseComponent,h.PlotComponent,u.PageNotFoundComponent],providers:[f.ElectronApiService,y.DataService],bootstrap:[d.AppComponent]}),i("design:paramtypes",[])],AppModule)}();t.AppModule=g},30:function(e,t,n){"use strict";var o=n(31),i=n(59),r=n(116),a=[{path:"parameterise",component:i.ParameteriseComponent},{path:"",redirectTo:"/parameterise",pathMatch:"full"},{path:"**",component:r.PageNotFoundComponent}];t.appRoutingProviders=[],t.routing=o.RouterModule.forRoot(a)},59:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=n(3),a=n(60),l=n(111),s=n(113),c=function(){function ParameteriseComponent(e,t){this.electronApiService=e,this.dataService=t,this.parameterisation={insert:"",circle:null,ellipse:null},this.jsonValid=!0,this.circle={},this.ellipse={},this.dataInFlight=!1,this.tableData=[{width:NaN,length:NaN}],this.tableModel=new a.MdlDefaultTableModel([{key:"width",name:"Width",sortable:!0,numeric:!0},{key:"length",name:"Length",sortable:!0,numeric:!0}])}return ParameteriseComponent.prototype.getData=function(){var e=this;this.dataService.getParameterisationData().then(function(t){e.parameterisation=t,e.parameteriseInput=e.parameterisation.insert})},ParameteriseComponent.prototype.onSubmit=function(){var e=this;this.dataInFlight=!0,this.electronApiService.parameteriseInsert(this.parameteriseInput).then(function(t){e.parameterisationResult=t,e.addResultToTable(t),e.convertResultToDisplayCoords(t),e.dataInFlight=!1})},ParameteriseComponent.prototype.addResultToTable=function(e){this.tableData[0].width=e.width,this.tableData[0].length=e.length},ParameteriseComponent.prototype.convertResultToDisplayCoords=function(e){this.circle=e.circle,this.ellipse=e.ellipse},ParameteriseComponent.prototype.checkJSON=function(){this.jsonValid=!1;try{var e=JSON.parse(this.parameteriseInput);"x"in e&&"y"in e?(this.parsedJSON=e,this.parsedJSON.x.length===this.parsedJSON.y.length?this.jsonValid=!0:this.jsonErrorMessage="The length of x doesn't match the length of y."):this.jsonErrorMessage="Either x or y is missing."}catch(t){this.jsonErrorMessage="Error in JSON input. "+t}finally{}},ParameteriseComponent.prototype.ngOnInit=function(){this.electronApiService.wakeUpServer(),this.tableModel.addAll(this.tableData),this.getData()},ParameteriseComponent=o([r.Component({selector:"my-parameterise",template:n(115)}),i("design:paramtypes",[l.ElectronApiService,s.DataService])],ParameteriseComponent)}();t.ParameteriseComponent=c},111:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=n(3),a=n(29);n(112);var l=function(){function ElectronApiService(e){this.http=e,this.parameteriseURL="http://electronapi.simonbiggs.net/parameterise",this.wakeUpURL="http://electronapi.simonbiggs.net/wakeup"}return ElectronApiService.prototype.wakeUpServer=function(){return this.http.get(this.wakeUpURL).toPromise()},ElectronApiService.prototype.parameteriseInsert=function(e){return this.http.post(this.parameteriseURL,e).toPromise().then(function(e){return e.json()})["catch"](this.handleError)},ElectronApiService.prototype.handleError=function(e){return console.error("An error occurred",e),Promise.reject(e.message||e)},ElectronApiService=o([r.Injectable(),i("design:paramtypes",[a.Http])],ElectronApiService)}();t.ElectronApiService=l},113:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=n(3),a=n(114),l=function(){function DataService(){}return DataService.prototype.getParameterisationData=function(){return Promise.resolve(a.DEMO_PARAMETERISE_INPUT)},DataService=o([r.Injectable(),i("design:paramtypes",[])],DataService)}();t.DataService=l},114:function(e,t){"use strict";t.DEMO_PARAMETERISE_INPUT={insert:'{\n  "x": [\n    0.99, -0.14, -1.0, -1.73, -2.56, -3.17, -3.49,\n    -3.57, -3.17, -2.52, -1.76, -1.04, -0.17,\n    0.77, 1.63, 2.36, 2.79, 2.91, 3.04, 3.22,\n    3.34, 3.37, 3.08, 2.54, 1.88, 1.02, 0.99],\n  "y": [\n    5.05, 4.98, 4.42, 3.24, 1.68, 0.6, -0.64,\n    -1.48, -2.38, -3.77, -4.81,  -5.26, -5.51,\n    -5.58, -5.23, -4.64, -3.77, -2.77, -1.68,\n    -0.29, 1.23, 2.68, 3.8, 4.6, 5.01, 5.08, \n    5.05]\n}',circle:null,ellipse:null}},115:function(e,t){e.exports='<div class="mdl-grid">\n    Explanation text\n</div>\n<div class="mdl-grid">\n    <div class="mdl-cell mdl-cell--6-col">\n    \n    <mdl-textfield \n        label="Parameterisation input" \n        [(ngModel)]="parameterisation.insert" \n        rows="13" maxrows="13" \n        floating-label style="width:100%">\n    </mdl-textfield>\n\n    <div class="mdl-grid">\n        <div class="mdl-cell mdl-cell--6-col">\n        <button\n            mdl-button mdl-button-type="raised" \n            mdl-colored="primary" \n            mdl-ripple\n            [disabled]="dataInFlight"\n            (click)="onSubmit()">Submit            \n        </button>\n        </div>\n        <div class="mdl-cell mdl-cell--6-col">\n        <mdl-table mdl-shadow="2"\n            [table-model]="tableModel">\n        </mdl-table>\n        </div>\n    </div>\n\n    </div>\n    <div class="mdl-cell mdl-cell--6-col">\n    <my-plot \n        [parameteriseInput]="parameterisation.insert"\n        [circle]="circle"\n        [ellipse]="ellipse">\n    </my-plot>\n\n    </div>\n</div>\n'},116:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=n(3),a=function(){function PageNotFoundComponent(){}return PageNotFoundComponent=o([r.Component({selector:"my-page-not-found",template:n(117)}),i("design:paramtypes",[])],PageNotFoundComponent)}();t.PageNotFoundComponent=a},117:function(e,t){e.exports="404"},118:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=n(3),a=n(60),l=n(111),s=function(){function AppComponent(e){this.electronApiService=e,this.parameteriseInput='{\n  "x": [\n    0.99, -0.14, -1.0, -1.73, -2.56, -3.17, -3.49,\n    -3.57, -3.17, -2.52, -1.76, -1.04, -0.17,\n    0.77, 1.63, 2.36, 2.79, 2.91, 3.04, 3.22,\n    3.34, 3.37, 3.08, 2.54, 1.88, 1.02, 0.99],\n  "y": [\n    5.05, 4.98, 4.42, 3.24, 1.68, 0.6, -0.64,\n    -1.48, -2.38, -3.77, -4.81,  -5.26, -5.51,\n    -5.58, -5.23, -4.64, -3.77, -2.77, -1.68,\n    -0.29, 1.23, 2.68, 3.8, 4.6, 5.01, 5.08, \n    5.05]\n}',this.modelInput='{\n  "width": [\n    3.15, 3.16, 3.17, 3.17, 3.17, 3.55, 3.66, \n    3.71, 4.2, 4.21, 4.21, 4.21, 4.21, 4.38, \n    4.48, 4.59, 4.59, 4.67, 5.21, 5.25, 5.26,\n    5.26, 5.26, 5.34, 5.43, 5.72, 5.86, 6, 6.04,\n    6.08, 6.3, 6.31, 6.41, 6.53, 6.54, 6.64, 6.78,\n    6.9, 7.08, 7.18, 7.21, 7.36, 7.56, 7.6, 7.64,\n    7.82, 8.06, 8.4, 9.45], \n  "length": [\n    3.16, 5.25, 13.64, 6.83, 9.43, 7.7, 5.04, \n    4.36, 4.21, 10.51, 13.65, 6.82, 8.41, 5.47, \n    7.29, 5.67, 6.54, 6.28, 11.4, 5.26, 10.52, \n    13.66, 8.41, 9.64, 11.02, 11.6, 8.62, 7.98,\n    9.22, 6.64, 6.33, 8.24, 8.69, 10.99, 8.41, \n    9.81, 10.98, 10.25, 10.77, 11.27, 9.03, 7.37,\n    10.05, 10.26, 8.99, 10.85, 11.85, 8.42, 9.47],\n  "factor": [\n    0.9294, 0.9346, 0.9533, 0.9488, 0.9488, \n    0.9443, 0.9434, 0.9488, 0.956, 0.9709, 0.9756,\n    0.9606, 0.9709, 0.9634, 0.9606, 0.9588,\n    0.9681, 0.9737, 0.9881, 0.9709, 0.9881,\n    0.9872, 0.9833, 0.993, 0.9872, 0.999, 0.9891,\n    0.9911, 0.999, 0.993, 0.9862, 0.9921, 0.999,\n    1, 0.993, 0.999, 1.007, 0.999, 1.005, 0.999,\n    1.0101, 1.003, 1.004, 1.0142, 1.003, 1.002,\n    1.007, 1.007, 1.0081]\n}',this.jsonValid=!0,this.circle={},this.ellipse={},this.dataInFlight=!1,this.tableData=[{width:NaN,length:NaN}],this.tableModel=new a.MdlDefaultTableModel([{key:"width",name:"Width",sortable:!0,numeric:!0},{key:"length",name:"Length",sortable:!0,numeric:!0}])}return AppComponent.prototype.onSubmit=function(){var e=this;this.dataInFlight=!0,this.electronApiService.parameteriseInsert(this.parameteriseInput).then(function(t){e.parameterisationResult=t,e.addResultToTable(t),e.convertResultToDisplayCoords(t),e.dataInFlight=!1})},AppComponent.prototype.addResultToTable=function(e){this.tableData[0].width=e.width,this.tableData[0].length=e.length},AppComponent.prototype.convertResultToDisplayCoords=function(e){this.circle=e.circle,this.ellipse=e.ellipse},AppComponent.prototype.checkJSON=function(){this.jsonValid=!1;try{var e=JSON.parse(this.parameteriseInput);"x"in e&&"y"in e?(this.parsedJSON=e,this.parsedJSON.x.length===this.parsedJSON.y.length?this.jsonValid=!0:this.jsonErrorMessage="The length of x doesn't match the length of y."):this.jsonErrorMessage="Either x or y is missing."}catch(t){this.jsonErrorMessage="Error in JSON input. "+t}finally{}},AppComponent.prototype.ngOnInit=function(){this.electronApiService.wakeUpServer(),this.tableModel.addAll(this.tableData)},AppComponent=o([r.Component({selector:"my-app",styles:[n(119)],template:n(120)}),i("design:paramtypes",[l.ElectronApiService])],AppComponent)}();t.AppComponent=s},119:function(e,t){e.exports=""},120:function(e,t){e.exports='<mdl-layout mdl-layout-fixed-drawer mdl-layout-fixed-header>\n  <mdl-layout-header>\n    <mdl-layout-header-row>\n      <mdl-layout-title>Parameterise Inserts</mdl-layout-title>\n    </mdl-layout-header-row>\n  </mdl-layout-header>\n  <mdl-layout-drawer>\n    <mdl-layout-title>Electron Factors</mdl-layout-title>\n    <nav class="mdl-navigation">\n      <a class="mdl-navigation__link" routerLink="/home" routerLinkActive="active" href>Home</a>\n      <a class="mdl-navigation__link" routerLink="/load-save" routerLinkActive="active" href>Load / Save</a>\n      <a class="mdl-navigation__link" routerLink="/specifications" routerLinkActive="active" href>Machine specifications</a>\n      <a class="mdl-navigation__link" routerLink="/dicom" routerLinkActive="active" href>Dicom shape extraction</a>\n      <a class="mdl-navigation__link" routerLink="/parameterise" routerLinkActive="active" href>Parameterise inserts</a>\n      <a class="mdl-navigation__link" routerLink="/model" routerLinkActive="active" href>Model insert factors</a>\n    </nav>\n  </mdl-layout-drawer>\n  <mdl-layout-content>\n    <router-outlet></router-outlet>\n  </mdl-layout-content>\n</mdl-layout>\n\n\n\n\n<!--\n<mdl-tabs mdl-ripple mdl-tab-active-index="1">\n\n    <mdl-tab-panel mdl-tab-panel-title="Dicom">\n    </mdl-tab-panel>\n\n    <mdl-tab-panel mdl-tab-panel-title="Parameterise">\n      <div class="row">\n        <div class="col-xs-12 col-sm-6">\n          <mdl-textfield \n            label="Parameterisation input" \n            [(ngModel)]="parameteriseInput" \n            rows="13" maxrows="13" \n            floating-label style="width:100%">\n          </mdl-textfield>\n\n          <button\n            mdl-button mdl-button-type="raised" \n            mdl-colored="primary" \n            mdl-ripple\n            [disabled]="dataInFlight"\n            (click)="onSubmit()">Submit            \n          </button>\n\n          <mdl-table mdl-shadow="2"\n              [table-model]="tableModel">\n          </mdl-table>\n\n        </div>\n        <div class="col-xs-12 col-sm-6">\n          <my-plot \n            [parameteriseInput]="parameteriseInput"\n            [circle]="circle"\n            [ellipse]="ellipse">\n          </my-plot>\n\n        </div>\n\n      </div>\n    </mdl-tab-panel>\n\n    <mdl-tab-panel mdl-tab-panel-title="Model">\n    </mdl-tab-panel>\n\n </mdl-tabs>-->'},121:function(e,t,n){"use strict";var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=n(3),a=function(){function PlotComponent(){this.jsonValid=!0,this.plt=Bokeh.Plotting,this.tools="pan,crosshair,wheel_zoom,box_zoom,reset,save",this.xrange=Bokeh.Range1d(-6,6),this.yrange=Bokeh.Range1d(-6,6),this.fig=this.plt.figure({title:"Electron Insert Plot",tools:this.tools,plot_width:300,plot_height:300,x_range:this.xrange,y_range:this.yrange}),this.source=new Bokeh.ColumnDataSource,this.doc=new Bokeh.Document}return PlotComponent.prototype.ngOnChanges=function(){this.jsonValid=!1,this.tempSource={xs:[[0],[0],[0]],ys:[[0],[0],[0]],colour:["navy","firebrick","green"]};try{var e=JSON.parse(this.parameteriseInput);"x"in e&&"y"in e?(this.parsedJSON=e,this.parsedJSON.x.length===this.parsedJSON.y.length?(this.tempSource.xs[0]=this.parsedJSON.x,this.tempSource.ys[0]=this.parsedJSON.y,this.jsonValid=!0):this.jsonErrorMessage="The length of x doesn't match the length of y."):this.jsonErrorMessage="Either x or y is missing."}catch(t){this.jsonErrorMessage="Error in JSON input. "+t}finally{}"x"in this.circle&&"y"in this.circle&&(this.tempSource.xs[1]=this.circle.x,this.tempSource.ys[1]=this.circle.y),"x"in this.ellipse&&"y"in this.ellipse&&(this.tempSource.xs[2]=this.ellipse.x,this.tempSource.ys[2]=this.ellipse.y),this.source.data=this.tempSource},PlotComponent.prototype.ngAfterViewInit=function(){this.ngOnChanges(),this.fig.multi_line({field:"xs"},{field:"ys"},{source:this.source,line_width:2,color:{field:"colour"}}),this.doc.add_root(this.fig),Bokeh.embed.add_document_standalone(this.doc,this.bokehplot.nativeElement)},o([r.Input(),i("design:type",String)],PlotComponent.prototype,"parameteriseInput",void 0),o([r.Input(),i("design:type",Object)],PlotComponent.prototype,"circle",void 0),o([r.Input(),i("design:type",Object)],PlotComponent.prototype,"ellipse",void 0),o([r.ViewChild("bokehplot"),i("design:type",Object)],PlotComponent.prototype,"bokehplot",void 0),PlotComponent=o([r.Component({selector:"my-plot",template:n(122),styles:[n(123)]}),i("design:paramtypes",[])],PlotComponent)}();t.PlotComponent=a},122:function(e,t){e.exports='\n  <div class="bk-root" style="height:300px">\n    <div #bokehplot></div>\n  </div>\n\n\n  <div [hidden]="jsonValid" class="alert alert-danger">\n      {{jsonErrorMessage}}\n  </div>\n'},123:119});
//# sourceMappingURL=app.b60e0030cabff27c76e4.js.map