<div class="mdl-grid">
  <div class="mdl-cell mdl-cell--6-col mdl-cell--12-col-tablet">
    <h4>Equivalent ellipse parameterisation</h4>
    <p>Provide basic instructions here.</p>
  </div>

  <div class="mdl-cell mdl-cell--6-col mdl-cell--8-col-tablet"
    style="display: flex; align-items: center; flex-flow: row wrap;">
    <my-plot 
      [insert_x]="parameterisation.insert.x"
      [insert_y]="parameterisation.insert.y"
      [circle]="parameterisation.circle"
      [ellipse]="parameterisation.ellipse"
      [enabled]="jsonValid">
    </my-plot>

    <mdl-textfield
      type="text"
      label="X coordinates (cm)"
      [(ngModel)]="textAreaX"
      (input)="inputTextAreaX($event.target.value)"
      rows=4
      floating-label
      [style.width]="'100%'"></mdl-textfield>

    <mdl-textfield
      type="text"
      label="Y coordinates (cm)"
      [(ngModel)]="textAreaY"
      (input)="inputTextAreaY($event.target.value)"
      rows=4
      floating-label
      [style.width]="'100%'"></mdl-textfield>

    <div style="width:100%; height:30px"></div>

    <button
      mdl-button mdl-button-type="raised" 
      mdl-colored="primary" 
      mdl-ripple
      [disabled]="submitDisabled"
      (click)="onSubmit()">Parameterise Insert          
    </button>

    <div style="height:20px; width:20px;"></div>

    <my-width-length-table
      [width]="parameterisation.width"
      [length]="parameterisation.length"
      [enabled]="jsonValid">
    </my-width-length-table>

    <div [hidden]="serverResponseValid">
      {{serverErrorMessage}}
    </div>
  </div>
  <div class="mdl-cell mdl-cell--12-col mdl-cell--8-col-tablet mdl-cell--6-col-phone">

    <button
      mdl-button mdl-button-type="raised"
      mdl-colored="primary" 
      mdl-ripple
      [disabled]="!machineSettingsExist"
      (click)="changeToModel()">Predict Factor with Model        
    </button>

    <div style="height:20px; width:20px;"></div>

    <button
      mdl-button mdl-button-type="raised" 
      mdl-colored="primary" 
      mdl-ripple
      [disabled]="!machineSettingsExist || measuredFactor.value==null || measuredFactor.value==''"
      (click)="addMeasuredFactor(measuredFactor.value)">Add Measured Factor to Model            
    </button>

    <p *ngIf="!machineExists">
      This machine ID does not exist within your 
      <a routerLink="/specifications" routerLinkActive="active">
        provided machine specifications.
      </a>
    </p>

    <p *ngIf="!machineSettingsExist">
      These specific machine settings do not exist within your       
      <a routerLink="/specifications" routerLinkActive="active">
        provided machine specifications.
      </a>
    </p>
  </div>

  <div class="mdl-cell mdl-cell--3-col mdl-cell--4-col-tablet mdl-cell--6-col-phone">
    <mdl-textfield
      type="text"
      label="Machine (ID)"
      (input)="insertDataChange()"
      floating-label
      [(ngModel)]="insertData.machine"
      style="width:100%"></mdl-textfield>
    <mdl-textfield
      type="text"
      label="Energy (Nominal or MeV)"
      (input)="insertDataChange()"
      floating-label
      [(ngModel)]="insertData.energy"
      style="width:100%"></mdl-textfield>
    <mdl-textfield
      type="text"
      label="R50 Beam Quality (cm)"
      floating-label
      [value]="R50"
      [disabled]="true"
      style="width:100%"></mdl-textfield>
    <mdl-textfield
      type="text"
      label="Applicator (ID)"
      (input)="insertDataChange()"
      floating-label
      [(ngModel)]="insertData.applicator"
      style="width:100%"></mdl-textfield>
    <mdl-textfield
      type="text"
      label="SSD (cm)"
      (input)="insertDataChange()"
      floating-label
      [(ngModel)]="insertData.ssd"
      style="width:100%"></mdl-textfield>

  </div>

  <div class="mdl-cell mdl-cell--3-col mdl-cell--4-col-tablet mdl-cell--6-col-phone">
    <mdl-textfield #measuredFactor
      type="text"
      label="Measured Factor"
      (input)="insertDataChange()"
      floating-label
      [(ngModel)]="insertData.factor"
      style="width:100%"></mdl-textfield>

    <!--<mdl-textfield
      type="text"
      label="Predicted Factor"
      floating-label
      [disabled]=true
      style="width:100%"></mdl-textfield>-->

  </div>


  <div class="mdl-cell mdl-cell--6-col mdl-cell--8-col-tablet">
    <p>Change the following address to use your own
      parameterisation server. The default is: <br>
      <a>http://electronapi.simonbiggs.net/parameterise</a>       
    </p>
    <mdl-textfield
      type="text"
      label="Parameterisation Server Address"
      (input)="parameterisationServerChange($event.target.value)"
      floating-label
      [(ngModel)]="parameteriseURL"
      style="width:100%"></mdl-textfield>
  </div>

  <!--<div class="mdl-cell mdl-cell--12-col mdl-cell--8-col-tablet">
    <h5>Edit raw coordinates</h5>
    <my-json-input #jsonInput
      [insert]="parameterisation.insert"
      [jsonDisabled]="dataInFlight"
      (insertUpdated)="insertUpdated($event)"
      (jsonStatus)="onJsonStatusChange($event)">
    </my-json-input>
  </div>-->

</div>
