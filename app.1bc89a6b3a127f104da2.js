webpackJsonp([0],{0:function(e,t,n){"use strict";var i=n(1),o=n(3),a=n(23);o.enableProdMode(),i.platformBrowserDynamic().bootstrapModule(a.AppModule)},23:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),r=n(21),l=n(24),s=n(28),c=n(21),d=n(29),p=n(114),h=n(126),m=n(128),u=n(183),f=n(185),g=n(58),y=n(65),b=n(189),v=n(191),S=n(194),w=n(67),_=n(71),I=n(73),D=n(75),k=n(77),M=n(196),x=n(198),C=n(200),T=n(192),A=n(59),L=n(61),R=n(63),P=n(68),O=function(){function AppModule(){}return AppModule=i([a.NgModule({imports:[r.BrowserModule,l.FormsModule,s.HttpModule,m.MdlModule,d.routing,h.Angulartics2Module.forRoot()],declarations:[u.AppComponent,g.ParameteriseComponent,f.PlotComponent,y.PageNotFoundComponent,b.WidthLengthTableComponent,v.JsonInputComponent,T.MyJsonPipe,S.NotYetImplimentedComponent,w.HomeComponent,_.ModelComponent,I.ExportImportComponent,D.SpecificationsComponent,k.DicomComponent,x.SendToParameterisationComponent,M.JsonEditComponent,C.BokehPcolourComponent],providers:[A.ElectronApiService,L.DataService,R.TitleService,c.Title,P.LocalStorageService,p.Angulartics2GoogleAnalytics],bootstrap:[u.AppComponent]}),o("design:paramtypes",[])],AppModule)}();t.AppModule=O},29:function(e,t,n){"use strict";var i=n(30),o=n(58),a=n(65),r=n(67),l=n(71),s=n(73),c=n(75),d=n(77),p=[{path:"home",component:r.HomeComponent,data:{title:"Home"}},{path:"export-import",component:s.ExportImportComponent},{path:"specifications",component:c.SpecificationsComponent},{path:"dicom",component:d.DicomComponent},{path:"parameterise",component:o.ParameteriseComponent},{path:"model",component:l.ModelComponent},{path:"",component:r.HomeComponent},{path:"**",component:a.PageNotFoundComponent}];t.appRoutingProviders=[],t.routing=i.RouterModule.forRoot(p)},58:function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},core_1=__webpack_require__(3),router_1=__webpack_require__(30),electron_api_service_1=__webpack_require__(59),data_service_1=__webpack_require__(61),title_service_1=__webpack_require__(63),demo_data_1=__webpack_require__(62),ParameteriseComponent=function(){function ParameteriseComponent(e,t,n,i){this.electronApiService=e,this.dataService=t,this.myTitleService=n,this.router=i,this.parameterisation={insert:{x:[0],y:[0]},width:null,length:null,circle:null,ellipse:null},this.jsonValid=!0,this.xInputValid=!0,this.yInputValid=!0,this.equalLengths=!0,this.serverResponseValid=!0,this.dataInFlight=!1,this.submitDisabled=!1,this.refreshJsonInput=!1,this.insertData={machine:null,parameterisation:this.parameterisation,energy:null,applicator:null,ssd:null,factor:null},this.machineExists=!1,this.machineSettingsExist=!1,this.modelExists=!1,this.ableToAddDataToModel=!1,this.dataAlreadyExistsOnModel=!1,this.serverError=!1}return ParameteriseComponent.prototype.ngOnInit=function(){this.getData(),this.myTitleService.setTitle("Parameterisation"),this.parameteriseURL=localStorage.getItem("parameteriseURL"),null==this.parameteriseURL&&(this.parameteriseURL="http://electronapi.simonbiggs.net/parameterise"),this.machineSpecifications=JSON.parse(localStorage.getItem("specifications")),null==this.machineSpecifications&&(this.machineSpecifications={}),this.checkMachineSettings(),this.checkIfCanBeSentToModel(),this.updateTextAreaValues()},ParameteriseComponent.prototype.createKey=function(){var e='{"machine":'+JSON.stringify(String(this.insertData.machine))+',"energy":'+JSON.stringify(Number(this.insertData.energy))+',"applicator":'+JSON.stringify(String(this.insertData.applicator))+',"ssd":'+JSON.stringify(Number(this.insertData.ssd))+"}";return e},ParameteriseComponent.prototype.addMeasuredFactor=function(e){this.dataAlreadyExistsOnModel=!0,this.ableToAddDataToModel=!1;var t=this.createKey(),n=JSON.parse(localStorage.getItem(t));null==n&&(n={measurement:{width:[],length:[],factor:[]},model:{width:[],length:[],factor:[]}}),n.model.width=[],n.model.length=[],n.model.factor=[],n.measurement.width.push(Number(this.insertData.parameterisation.width)),n.measurement.length.push(Number(this.insertData.parameterisation.length)),n.measurement.factor.push(Number(e)),localStorage.setItem(t,JSON.stringify(n)),localStorage.setItem("current_machine",JSON.stringify(Number(this.insertData.machine))),localStorage.setItem("currentEnergy",JSON.stringify(Number(this.insertData.energy))),localStorage.setItem("currentApplicator",JSON.stringify(this.insertData.applicator)),localStorage.setItem("currentSSD",JSON.stringify(Number(this.insertData.ssd)))},ParameteriseComponent.prototype.changeToModel=function(){localStorage.setItem("current_machine",JSON.stringify(Number(this.insertData.machine))),localStorage.setItem("currentEnergy",JSON.stringify(Number(this.insertData.energy))),localStorage.setItem("currentApplicator",JSON.stringify(this.insertData.applicator)),localStorage.setItem("currentSSD",JSON.stringify(Number(this.insertData.ssd))),this.router.navigate(["/model"])},ParameteriseComponent.prototype.updateTextAreaValues=function(){this.textAreaX=String(this.parameterisation.insert.x).replace(/,/g,", "),this.textAreaY=String(this.parameterisation.insert.y).replace(/,/g,", ")},ParameteriseComponent.prototype.checkIfEqualLengths=function(){this.parameterisation.insert.x.length==this.parameterisation.insert.y.length?this.equalLengths=!0:this.equalLengths=!1},ParameteriseComponent.prototype.saveInsertData=function(){this.insertData.parameterisation=this.parameterisation,localStorage.setItem("last_insertData",JSON.stringify(this.insertData))},ParameteriseComponent.prototype.validateInput=function(e){return/^(-?\d*(\.\d+)?[,;\s]+)*-?\d*(\.\d+)?[,;\s]*$/.test(e)},ParameteriseComponent.prototype.inputTextAreaX=function(xInput){try{this.validateInput(xInput)?(this.parameterisation.insert.x=eval("["+xInput.replace(/[,;\s]+/g,", ")+"]"),this.insertUpdated(this.parameterisation.insert),this.xInputValid=!0,this.checkIfEqualLengths(),this.saveInsertData(),this.checkIfCanBeSentToModel()):this.xInputValid=!1}catch(err){console.log(err),this.xInputValid=!1}},ParameteriseComponent.prototype.inputTextAreaY=function(yInput){try{this.validateInput(yInput)?(this.parameterisation.insert.y=eval("["+yInput.replace(/[,;\s]+/g,", ")+"]"),this.insertUpdated(this.parameterisation.insert),this.yInputValid=!0,this.checkIfEqualLengths(),this.saveInsertData(),this.checkIfCanBeSentToModel()):this.yInputValid=!1}catch(err){console.log(err),this.yInputValid=!1}},ParameteriseComponent.prototype.getData=function(){var e=localStorage.last_insertData;if(e){this.insertData=JSON.parse(e);var t=this.insertData.parameterisation.insert;this.insertUpdated(t),this.insertData.parameterisation=this.parameterisation}},ParameteriseComponent.prototype.loadDemoData=function(){var e=JSON.parse(JSON.stringify(demo_data_1.DEMO_PARAMETERISE_INPUT));this.insertUpdated(e.insert),this.insertData={machine:null,parameterisation:this.parameterisation,energy:null,applicator:null,ssd:null,factor:null},this.updateTextAreaValues()},ParameteriseComponent.prototype.sleep=function(e){return new Promise(function(t){return setTimeout(t,e)})},ParameteriseComponent.prototype.recursiveServerSubmit=function(){var e=this;this.serverError=!1,this.electronApiService.sendToServer(this.parameteriseURL,JSON.stringify(this.parameterisation.insert)).then(function(t){e.parameterisation.circle=t.circle,e.parameterisation.ellipse=t.ellipse,e.parameterisation.width=t.width,e.parameterisation.length=t.length;var n=t.complete;n?(e.dataInFlight=!1,e.serverResponseValid=!0,e.checkSubmitButton(),localStorage.setItem(JSON.stringify(e.parameterisation.insert),JSON.stringify(e.parameterisation)),e.saveInsertData(),e.checkIfCanBeSentToModel(),null==e.parameterisation.width&&(e.serverError=!0)):e.sleep(500).then(function(){return e.recursiveServerSubmit()})})},ParameteriseComponent.prototype.checkIfCanBeSentToModel=function(){if(this.ableToAddDataToModel=!1,this.dataAlreadyExistsOnModel=!1,this.machineSettingsExist){var e=this.createKey(),t=JSON.parse(localStorage.getItem(e));null==t?this.ableToAddDataToModel=!0:null==t.measurement?this.ableToAddDataToModel=!0:null!=this.parameterisation.width&&null!=this.parameterisation.length&&null!=this.insertData.factor&&(t.measurement.width.indexOf(Number(this.parameterisation.width))>-1&&t.measurement.length.indexOf(Number(this.parameterisation.length))>-1&&t.measurement.factor.indexOf(Number(this.insertData.factor))>-1?this.dataAlreadyExistsOnModel=!0:(this.dataAlreadyExistsOnModel=!1,this.ableToAddDataToModel=!0))}},ParameteriseComponent.prototype.checkMachineSettings=function(){this.R50=null;var e=this.insertData.machine,t=this.insertData.energy,n=this.insertData.applicator,i=this.insertData.ssd;if(this.machineSpecifications[e]){var o=this.machineSpecifications[e];this.R50=o.R50[t],o.energy.indexOf(Number(t))>-1&&o.applicator.indexOf(String(n))>-1&&o.ssd.indexOf(Number(i))>-1?this.machineSettingsExist=!0:this.machineSettingsExist=!1,this.machineExists=!0}else this.machineExists=!1,this.machineSettingsExist=!1,this.modelExists=!1},ParameteriseComponent.prototype.insertDataChange=function(){localStorage.setItem("last_insertData",JSON.stringify(this.insertData)),this.checkMachineSettings()},ParameteriseComponent.prototype.onSubmit=function(){this.dataInFlight=!0,this.checkSubmitButton(),this.recursiveServerSubmit()},ParameteriseComponent.prototype.insertDataFromLocalStorage=function(e){},ParameteriseComponent.prototype.parameterisationFromLocalStorage=function(e){var t=JSON.parse(e);this.parameterisation.insert=t.insert,this.parameterisation.width=t.width,this.parameterisation.length=t.length,this.parameterisation.circle=t.circle,this.parameterisation.ellipse=t.ellipse},ParameteriseComponent.prototype.insertUpdated=function(e){var t=localStorage.getItem(JSON.stringify(e));t?this.parameterisationFromLocalStorage(t):(this.parameterisation.insert=e,this.parameterisation.width=null,this.parameterisation.length=null,this.parameterisation.circle=null,this.parameterisation.ellipse=null)},ParameteriseComponent.prototype.onJsonStatusChange=function(e){this.jsonValid=e,this.checkSubmitButton()},ParameteriseComponent.prototype.checkSubmitButton=function(){this.dataInFlight||!this.jsonValid?this.submitDisabled=!0:this.submitDisabled=!1},ParameteriseComponent.prototype.parameterisationServerChange=function(e){localStorage.setItem("parameteriseURL",e)},ParameteriseComponent=__decorate([core_1.Component({selector:"my-parameterise",template:__webpack_require__(64)}),__metadata("design:paramtypes",[electron_api_service_1.ElectronApiService,data_service_1.DataService,title_service_1.TitleService,router_1.Router])],ParameteriseComponent)}();exports.ParameteriseComponent=ParameteriseComponent},59:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),r=n(28);n(60);var l=function(){function ElectronApiService(e){this.http=e,this.wakeUpURL="http://electronapi.simonbiggs.net/wakeup"}return ElectronApiService.prototype.wakeUpServer=function(){return this.http.get(this.wakeUpURL).toPromise()},ElectronApiService.prototype.sendToServer=function(e,t){return this.http.post(e,t).toPromise().then(function(e){return e.json()})["catch"](this.handleError)},ElectronApiService.prototype.handleError=function(e){return console.error("An error occurred",e),Promise.reject(e.message||e)},ElectronApiService=i([a.Injectable(),o("design:paramtypes",[r.Http])],ElectronApiService)}();t.ElectronApiService=l},61:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),r=n(62),l=function(){function DataService(){}return DataService.prototype.getParameterisationData=function(){return Promise.resolve(r.DEMO_PARAMETERISE_INPUT)},DataService=i([a.Injectable(),o("design:paramtypes",[])],DataService)}();t.DataService=l},62:function(e,t){"use strict";var n={x:[.99,-.14,-1,-1.73,-2.56,-3.17,-3.49,-3.57,-3.17,-2.52,-1.76,-1.04,-.17,.77,1.63,2.36,2.79,2.91,3.04,3.22,3.34,3.37,3.08,2.54,1.88,1.02,.99],y:[5.05,4.98,4.42,3.24,1.68,.6,-.64,-1.48,-2.38,-3.77,-4.81,-5.26,-5.51,-5.58,-5.23,-4.64,-3.77,-2.77,-1.68,-.29,1.23,2.68,3.8,4.6,5.01,5.08,5.05]};t.DEMO_PARAMETERISE_INPUT={insert:n,circle:null,ellipse:null,width:null,length:null}},63:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),r=function(){function TitleService(){this.title="Home"}return TitleService.prototype.getTitle=function(){return this.title},TitleService.prototype.setTitle=function(e){this.title=e},TitleService=i([a.Injectable(),o("design:paramtypes",[])],TitleService)}();t.TitleService=r},64:function(e,t){e.exports='<div class="mdl-grid">\n  <div class="mdl-cell mdl-cell--6-col mdl-cell--8-col-tablet" style="display: flex; align-items: center; flex-flow: row wrap;">\n    <h5>Equivalent ellipse parameterisation</h5>\n    <p>This is for the determination of equivalent ellipse widths and lengths as defined in the paper method.</p>\n\n    <p>\n      To begin shape parameterisation you need to define your insert shape. \n      This can be done by editing the x and y coordinates within the text boxes below or by using a shape       \n      <a routerLink="/dicom" routerLinkActive="active">\n        pulled from a dicom file.\n      </a>\n    </p>\n\n    <p>\n      Coordinates can be separated by commas (,), semicolons (;), spaces, tabs, or new lines.\n      If you have multiple commas or spaces this will count as only one separator. \n      This web app should handle copying and pasting from a range of sources (including excel).\n      Number inputs can only contain the characters 0-9, a minus sign (-) and decimal points (.).\n    </p>\n\n    <mdl-textfield\n      type="text"\n      label="X coordinates (cm @iso)"\n      [(ngModel)]="textAreaX"\n      (input)="inputTextAreaX($event.target.value)"\n      rows=4\n      floating-label\n      [disabled]="dataInFlight"\n      [style.width]="\'100%\'"></mdl-textfield>\n\n    <mdl-textfield\n      type="text"\n      label="Y coordinates (cm @iso)"\n      [(ngModel)]="textAreaY"\n      (input)="inputTextAreaY($event.target.value)"\n      rows=4\n      floating-label\n      [disabled]="dataInFlight"\n      [style.width]="\'100%\'"></mdl-textfield>\n\n    <p *ngIf="!equalLengths">\n      The x and y coordinate lengths need to be the same as each other.\n    </p>\n\n    <p *ngIf="this.parameterisation.insert.x.length < 3 || this.parameterisation.insert.y.length < 3">\n      You need at least 3 data points to create an insert shape.\n    </p>\n\n    <div style="width:100%; height:30px"></div>\n\n    <button\n      mdl-button mdl-button-type="raised" \n      mdl-colored="primary" \n      mdl-ripple\n      [disabled]="submitDisabled"\n      (click)="loadDemoData()">Load Demo Data         \n    </button>\n\n    <div style="width:20px; height:30px"></div>\n\n    <button\n      mdl-button mdl-button-type="raised" \n      mdl-colored="primary" \n      mdl-ripple\n      [disabled]="submitDisabled || !xInputValid || !yInputValid || !equalLengths"\n      (click)="onSubmit()">Parameterise Insert          \n    </button>\n\n\n\n    <div [hidden]="serverResponseValid">\n      {{serverErrorMessage}}\n    </div>\n\n    <div style="height:20px; width:100%;"></div>\n\n    <my-plot \n      [insert_x]="parameterisation.insert.x"\n      [insert_y]="parameterisation.insert.y"\n      [circle]="parameterisation.circle"\n      [ellipse]="parameterisation.ellipse"\n      [enabled]="xInputValid && yInputValid && equalLengths">\n    </my-plot>\n\n    <div style="height:20px; width:20px;"></div>\n\n    <my-width-length-table\n      [width]="parameterisation.width"\n      [length]="parameterisation.length"\n      [enabled]="xInputValid && yInputValid && equalLengths">\n    </my-width-length-table>\n\n  </div>\n  <div class="mdl-cell mdl-cell--6-col mdl-cell--8-col-tablet mdl-cell--6-col-phone">\n    <h5>Send parameterisation to model</h5>\n    <p>\n      Once you have parameterised an insert shape you may either predict this insert with the model, or you may add the insert to the model.\n    </p>\n    <p>\n      To predict the insert with the model you must have filled in the correct machine ID, energy, applicator, and ssd in the text boxes below.\n      Furthermore these inputs need to correspond to one of the \n      <a routerLink="/specifications" routerLinkActive="active">\n        machine specifications you have defined.\n      </a>\n    </p>\n    <p>\n      To append the current insert shape along with its measured factor to the model you must have filled in the corresponding machine ID, energy, applicator, ssd, and measured factor in the text boxes below.\n      Once again the machine specifications given need to correspond to one of the \n      <a routerLink="/specifications" routerLinkActive="active">\n        machine specifications you have defined.\n      </a>\n    </p>\n\n\n    <mdl-textfield\n      type="text"\n      label="Machine (ID)"\n      (input)="insertDataChange()"\n      floating-label\n      [(ngModel)]="insertData.machine"\n      style="width:100%"></mdl-textfield>\n\n    <p *ngIf="!machineExists">\n      This machine ID does not exist within your \n      <a routerLink="/specifications" routerLinkActive="active">\n        provided machine specifications.\n      </a>\n    </p>\n    <mdl-textfield\n      type="text"\n      label="Energy (Nominal or MeV)"\n      (input)="insertDataChange()"\n      floating-label\n      [(ngModel)]="insertData.energy"\n      style="width:100%"></mdl-textfield>\n    <mdl-textfield\n      type="text"\n      label="Applicator (ID)"\n      (input)="insertDataChange()"\n      floating-label\n      [(ngModel)]="insertData.applicator"\n      style="width:100%"></mdl-textfield>\n    <mdl-textfield\n      type="text"\n      label="SSD (cm)"\n      (input)="insertDataChange()"\n      floating-label\n      [(ngModel)]="insertData.ssd"\n      style="width:100%"></mdl-textfield>\n\n    <p *ngIf="!machineSettingsExist">\n      These specific machine settings do not exist within your       \n      <a routerLink="/specifications" routerLinkActive="active">\n        provided machine specifications.\n      </a>\n    </p>\n\n    <mdl-textfield #measuredFactor\n      type="text"\n      label="Measured insert factor (as per TG 25)"\n      (input)="insertDataChange()"\n      floating-label\n      [(ngModel)]="insertData.factor"\n      style="width:100%"></mdl-textfield>\n\n    <button\n      mdl-button mdl-button-type="raised" \n      mdl-colored="primary" \n      mdl-ripple\n      [disabled]="!ableToAddDataToModel || !machineSettingsExist || measuredFactor.value==null || measuredFactor.value==\'\' || submitDisabled || !xInputValid || !yInputValid || !equalLengths"\n      (click)="addMeasuredFactor(measuredFactor.value)">Add Measured Factor to Model            \n    </button>\n\n    <p *ngIf="dataAlreadyExistsOnModel && !submitDisabled && xInputValid && yInputValid && equalLengths && machineSettingsExist">\n      This width, length, and measured factor combination exists within the model.       \n      <a routerLink="/model" routerLinkActive="active">\n        View the model.\n      </a>\n    </p>\n    \n    <div style="height:20px; width:20px;"></div>\n\n\n\n\n    <button\n      mdl-button mdl-button-type="raised"\n      mdl-colored="primary" \n      mdl-ripple\n      [disabled]="!machineSettingsExist || submitDisabled || !xInputValid || !yInputValid || !equalLengths || parameterisation.width == null || parameterisation.length == null"\n      (click)="changeToModel()">Predict Factor with Model        \n    </button>\n\n    \n    <p>\n      <font color="#d3d3d3">\n        Currently the "Predict Factor with Model" button just changes the active machine specifications to match that given above and then takes you to the model component.\n        A future implementation is to have this button plot your insert shape on the model plot and display the parameterisation.\n      </font>\n    </p>\n\n\n\n  </div>\n\n\n\n  <div class="mdl-cell mdl-cell--6-col mdl-cell--8-col-tablet">\n    <h5>Change parameterisation server url (optional)</h5>\n    <p>Only change the following address if you wish to use your own server. This is not required to be edited. The default server is: <br>\n      <a>http://electronapi.simonbiggs.net/parameterise</a>       \n    </p>\n    <mdl-textfield\n      type="text"\n      label="Parameterisation Server Address"\n      (input)="parameterisationServerChange($event.target.value)"\n      floating-label\n      [(ngModel)]="parameteriseURL"\n      style="width:100%"></mdl-textfield>\n  </div>\n\n  <!--<div class="mdl-cell mdl-cell--12-col mdl-cell--8-col-tablet">\n    <h5>Edit raw coordinates</h5>\n    <my-json-input #jsonInput\n      [insert]="parameterisation.insert"\n      [jsonDisabled]="dataInFlight"\n      (insertUpdated)="insertUpdated($event)"\n      (jsonStatus)="onJsonStatusChange($event)">\n    </my-json-input>\n  </div>-->\n\n</div>\n'},65:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),r=function(){function PageNotFoundComponent(){}return PageNotFoundComponent=i([a.Component({selector:"my-page-not-found",template:n(66)}),o("design:paramtypes",[])],PageNotFoundComponent)}();t.PageNotFoundComponent=r},66:function(e,t){e.exports='<div class="mdl-grid">\n  <div class="mdl-cell mdl-cell--12-col">\n    This page has not been found. Please provide feedback ...\n  </div>\n</div>'},67:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),r=n(63),l=n(68),s=function(){function HomeComponent(e,t){this.myTitleService=e,this.myLocalStorageService=t}return HomeComponent.prototype.ngOnInit=function(){this.myTitleService.setTitle("Home"),this.testLocalStorage=this.myLocalStorageService.isSupported,this.usedLocalStorageSpace=this.myLocalStorageService.getUsedSpace()},HomeComponent.prototype.testRemainingStorage=function(){this.remainingLocalStorageSpace=this.myLocalStorageService.getRemainingSpace()},HomeComponent=i([a.Component({selector:"my-home",template:n(70)}),o("design:paramtypes",[r.TitleService,l.LocalStorageService])],HomeComponent)}();t.HomeComponent=s},68:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),r=n(69),l=function(){function LocalStorageService(){this.isSupported=r.LocalStorage.isSupported,this.hasItem=r.LocalStorage.hasItem,this.getRemainingSpace=r.LocalStorage.getRemainingSpace,this.getMaximumSpace=r.LocalStorage.getMaximumSpace,this.getUsedSpace=r.LocalStorage.getUsedSpace,this.getItemUsedSpace=r.LocalStorage.getItemUsedSpace,this.getBackup=r.LocalStorage.getBackup,this.applyBackup=r.LocalStorage.applyBackup,this.consoleInfo=r.LocalStorage.consoleInfo}return LocalStorageService=i([a.Injectable(),o("design:paramtypes",[])],LocalStorageService)}();t.LocalStorageService=l},69:function(e,t){"use strict";var n;!function(e){function hasItem(e){return null!==localStorage.getItem(e)}function getRemainingSpace(){for(var e=localStorage.getItem(""),t=!0,n="1",i="",o="";;)try{o=i+n,localStorage.setItem("",o),i=o,t&&(n+=n)}catch(a){if(n.length<2)break;t=!1,n=n.substr(n.length/2)}return null===e?localStorage.removeItem(""):localStorage.setItem("",e),i.length}function getMaximumSpace(){var e=getBackup();localStorage.clear();var t=getRemainingSpace();return applyBackup(e),t}function getUsedSpace(){for(var e=0,t=0;t<localStorage.length;++t){var n=localStorage.key(t),i=localStorage.getItem(n);e+=n.length+i.length}return e}function getItemUsedSpace(e){var t=localStorage.getItem(e);return null===t?NaN:e.length+t.length}function getBackup(){for(var e={},t=0;t<localStorage.length;++t){var n=localStorage.key(t),i=localStorage.getItem(n);e[n]=i}return e}function applyBackup(e,t,n){void 0===t&&(t=!0),void 0===n&&(n=!0),1==t&&localStorage.clear();for(var i in e)if(n!==!1||void 0===e[i]){var o=e[i];localStorage.setItem(i,o)}}function consoleInfo(e){void 0===e&&(e=!1);for(var t=0,n=0,i=0;i<localStorage.length;++i){var o=localStorage.key(i),a=localStorage.getItem(o);console.log(t,o,a),n+=o.length+a.length,t++}if(console.log("Total entries:",t),console.log("Total size:",n),e===!0){var r=getMaximumSpace();console.log("Total size:",r)}}e.isSupported=function(){try{var e=localStorage.getItem("");return localStorage.removeItem(""),localStorage.setItem("",e),null===e?localStorage.removeItem(""):localStorage.setItem("",e),!0}catch(t){return!1}}(),e.hasItem=hasItem,e.getRemainingSpace=getRemainingSpace,e.getMaximumSpace=getMaximumSpace,e.getUsedSpace=getUsedSpace,e.getItemUsedSpace=getItemUsedSpace,e.getBackup=getBackup,e.applyBackup=applyBackup,e.consoleInfo=consoleInfo}(n=t.LocalStorage||(t.LocalStorage={}))},70:function(e,t){e.exports='<div itemscope itemtype="http://schema.org/SoftwareApplication" class="mdl-grid">\n  <div class="mdl-cell mdl-cell--6-col">\n    <h3 itemprop="name">Electron insert factor modelling</h3>\n    <p>\n      Web App URL: <a itemprop="url" routerLink="/home" routerLinkActive="active">http://electrons.simonbiggs.net</a><br>\n      Tags: <span itemprop="applicationCategory">Medical physics, electron inserts, electron cutouts, Python, Angular2, Bokeh, spline modelling</span><br>\n      Last update: <span itemprop="datePublished" content="2016-10-18">2016-10-19</span><br>\n      Version: <span itemprop="softwareVersion">0.1.1-beta</span><br>\n      Operating system: <span itemprop="operatingSystem">Windows, Linux, Mac, Android, and iOS</span> <br>\n      Requirements: <span itemprop="requirements">A browser that supports <a href="http://caniuse.com/#feat=namevalue-storage">local storage</a></span><br>\n      Developed by: <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a itemprop="name" href="https://github.com/SimonBiggs">Simon Biggs</a></span>\n\n    </p>\n    \n    <h4>Description</h4>\n    <p>\n      This online web app is for the modelling of the portion of the electron output factor that is dependent on the shape of the shielding insert mounted within the applicator. This allows modelling insert factors using only the measured factors already available at a centre. Should all outliers be removed from the data set the user might expect as low as 0.5% standard uncertainty for factor prediction with as little as 8 data points.\n    </p>\n\n\n    <p>If you have any issues or feedback please contact me at <a href="mailto:mail@simonbiggs.net">mail@simonbiggs.net</a>.</p>\n\n    <h4>Instructions</h4>\n    <h5>Overview</h5>\n    <p>This web app is divided into four logical components:</p>\n      <ul>\n        <li>   \n          Defining your centre specific machine specifications within the   \n          <a routerLink="/specifications" routerLinkActive="active">\n            machine specifications component\n          </a>\n        </li>\n        <li>\n          Insert shape extraction from a dicom patient plan within the\n          <a routerLink="/dicom" routerLinkActive="active">\n            dicom component\n          </a>\n        </li>\n        <li>\n          Parameterise the insert shapes into equivalent widths and lengths within the\n          <a routerLink="/parameterise" routerLinkActive="active">\n            parameterisation component\n          </a>\n        </li>\n        <li>\n          Take at least 8 widths, lengths, and measured factors for a given machine, applicator, energy, ssd combination and create an empirical model within the\n          <a routerLink="/model" routerLinkActive="active">\n            model component\n          </a>\n        </li>\n      </ul>\n\n      <p>\n        All your model and machine data is saved on your local machine within your browser. \n        Your progress will be saved as long as you do not clear your browser data.\n        In the future I plan to implement a data export and import feature, as well as the ability to sync models between browsers via a server.\n        Currently however the only place your web app data is being stored is on your local machine.\n      </p>\n\n       \n      \n      <h5>To demo</h5>\n      <p>\n        If you wish to simply demo this app these are the following steps you can take:\n      </p>\n      <ul>\n        <li>\n          Within the \n          <a routerLink="/dicom" routerLinkActive="active">\n            dicom component \n          </a>\n          download the demo dicom file, load it into the web app and see the insert shapes be pulled from the dicom file without any network traffic\n        </li>\n        <li>\n          Within the \n          <a routerLink="/parameterise" routerLinkActive="active">\n            parameterise component\n          </a>\n          press the "Load Demo Data" button and then press the "Parameteterise Insert" button to see the parameterisation algorithim in action\n        </li>\n        <li>\n          Within the \n          <a routerLink="/model" routerLinkActive="active">\n            model component\n          </a>\n          press the "Load Demo Data" button and then press the "Run Spline Model" to see the spline model being created. \n          You can then either hover over the model, or tap on the model to view the relevant values.\n        </li>\n      </ul>\n\n      <h5>To implement in your centre</h5>\n      <p>\n        To implement this web app in your centre you need to do the following:\n      </p>\n      <ul>\n        <li>  \n          Specify the machine models and the corresponding applicators, energies, and ssds within the    \n          <a routerLink="/specifications" routerLinkActive="active">\n            machine specification component.\n          </a>\n        </li>\n        <li> \n          Collate / measure your electron insert factor measuremens. These factors are to measured in accordance to TG 25.   \n        </li>\n        <li>\n          If the insert shapes are ellipses, you may directly input the ellipse widths and lengths as projected to the isocentre within the \n          <a routerLink="/model" routerLinkActive="active">\n            model component.\n          </a>\n        </li>\n        <li>\n          If the insert shape is a generic shape or you know the x and y coordinates of your insert then determine the equivalent ellipse widths and lengths by inputting x and y coordinates as defined at isocentre within the \n          <a routerLink="/parameterise" routerLinkActive="active">\n            parameterisation component.\n          </a>          \n        </li>\n        <li>\n          If the insert shape is defined within your planning system, export the patient plan to dicom and then read the insert coordinates from the dicom file using the\n          <a routerLink="/dicom" routerLinkActive="active">\n            dicom component.\n          </a>          \n        </li>\n        <li>\n          Once you have the corresponding equivalent ellipse widths and lengths for your measured factors these may be appended to the relevant machine configuration within the \n          <a routerLink="/model" routerLinkActive="active">\n            model component\n          </a>\n        </li>\n        <li>\n          Whenever a machine configuration gets at least 8 data points you may press the "Run Spline Model" on the \n          <a routerLink="/model" routerLinkActive="active">\n            model component\n          </a>\n          which will allow the prediction of insert factors for other widths and lengths.\n        </li>\n      </ul>\n\n      <h5>To use the web app after it has been implemented</h5>\n      <ul>\n        <li>\n          Export the patient plan to dicom and then read the insert coordinates from the dicom file using the\n          <a routerLink="/dicom" routerLinkActive="active">\n            dicom component.\n          </a>          \n        </li>\n        <li>\n          Press the "Parameterise Insert" button to determine the equivalent ellipse width and length\n        </li>\n        <li>\n          Press the "Predict Factor with Model" button to automatically change the machine configuration to that which matches your loaded insert\n        </li>\n        <li>\n          Hover your mouse over the relevant width and length within the model to predict your insert factor\n        </li>\n      </ul>\n\n  </div>\n  <div class="mdl-cell mdl-cell--6-col">\n\n    <h4>Paper</h4>\n    <p>The paper outlining this method:</p>\n    <p>\n      S. Biggs, M. Sobolewski, R. Murry, J. Kenny, Spline modelling electron insert factors using routine measurements. Physica Medica (2015), <a href="http://dx.doi.org/10.1016/j.ejmp.2015.11.002">doi:10.1016/j.ejmp.2015.11.002</a>.\n    </p>\n\n\n    <h4>Disclaimer</h4>\n    <p>\n      Any use of this web app or any of its code has you accepting the AGPL3+ license which includes no warranty that this code is fit for a particular purpose. Attempts have been made to make the code transparent and it is recommended that an experienced python programmer and physicist who understands the procedure outlined in the paper and the requirements of your centre identifies whether or not this method and code is fit for your use.</p>\n\n\n    <h4>Steps required to freeze your own version of this web app</h4>\n      As I make improvements to this web app I will be updating this online version. \n      You may desire to not have the web app you are using day to day change on you.\n      To achieve this you can create your own version of the server and your own version of the web app.\n      \n      For now this will require a bit of your own working out until I provide further instructions.\n\n\n\n    <h4>Source code</h4>\n    <p>\n      For the purpose of coding transparency and to enable the user to take responsibility for the code themselves any redistribution\n      or derivative works of this web app need to include the source code of any additions made and need to include a way\n      for users to easily access the source code of each of the components used or linked to.\n    </p>\n\n    <h5>Server Code</h5>\n\n    <h6>Base Electron Insert Factor Source Code</h6>\n    <p>\n      The python file which does the shape parameterisation and insert factor modelling which is used by the server is found here:\n      <a href="https://github.com/SimonBiggs/electronfactor-server/blob/master/electroninserts.py">\n              https://github.com/SimonBiggs/electronfactor-server/blob/master/electroninserts.py</a>\n    </p>\n\n    <h6>Tornado REST API</h6>\n    <p>\n      The Tornado REST API is found here:\n      <a href="https://github.com/SimonBiggs/electronfactor-server/blob/master/main.py">\n              https://github.com/SimonBiggs/electronfactor-server/blob/master/main.py</a>\n    </p>\n\n    <h6>Heroku App code</h6>\n    <p>\n      The code to make the heroku app is found here:\n      <a href="https://github.com/SimonBiggs/electronfactor-server">\n              https://github.com/SimonBiggs/electronfactor-server</a>\n    </p>\n\n    <h5>Web App Code</h5>\n    <p>\n      The source code for this web app is found here:\n      <a itemprop="downloadUrl" href="https://github.com/SimonBiggs/electroninserts-webapp">\n            https://github.com/SimonBiggs/electroninserts-webapp</a>\n    </p>\n\n    <h5>Libraries used</h5>\n    <h6>Bokehjs</h6>\n    <p>\n      The bokehjs library is used for plots. Documentation can be found here:\n      <a href="http://bokeh.pydata.org/en/latest/docs/user_guide/bokehjs.html#userguide-bokehjs">\n              http://bokeh.pydata.org/en/latest/docs/user_guide/bokehjs.html#userguide-bokehjs</a>\n    </p>\n    <p>\n      Source code can be found here:\n      <a href="https://github.com/bokeh/bokeh/tree/master/bokehjs">\n              https://github.com/bokeh/bokeh/tree/master/bokehjs</a>\n    </p>\n\n    <h6>dcmjs</h6>\n    <p>\n      The dcmjs library is used for reading dicom files within javascript. Website can be found here:\n      <a href="http://dcmjs.org/">\n              http://dcmjs.org/</a>\n    </p>\n    <p>\n      Source code can be found here:\n      <a href="https://github.com/commontk/dcmjs">\n              https://github.com/commontk/dcmjs</a>\n    </p>\n\n    <h6>Angular2</h6>\n    <p>\n      This interface was built using Angular2. Documentation can be found here:\n      <a href="https://angular.io/docs/ts/latest/">\n              https://angular.io/docs/ts/latest/</a>\n    </p>\n    <p>\n      Source code can be found here:\n      <a href="https://github.com/angular/angular">\n              https://github.com/angular/angular</a>\n    </p>\n    <h6>Remaining libraries</h6>\n    <p>\n      For all remaining libraries used please see the npm package.json file:\n      <a href="https://github.com/SimonBiggs/electroninserts-webapp/blob/master/package.json">\n              https://github.com/SimonBiggs/electroninserts-webapp/blob/master/package.json</a>\n    </p>\n    <p>\n      And the index file for various imports:\n      <a href="https://github.com/SimonBiggs/electroninserts-webapp/blob/master/src/public/index.html">\n              https://github.com/SimonBiggs/electroninserts-webapp/blob/master/src/public/index.html</a>\n    </p>\n  </div>\n\n\n</div>';
},71:function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},core_1=__webpack_require__(3),title_service_1=__webpack_require__(63),electron_api_service_1=__webpack_require__(59),ModelComponent=function(){function ModelComponent(e,t,n){var i=this;this.myTitleService=e,this.electronApiService=t,this.modelData={measurement:{width:[],length:[],factor:[]},model:{width:[],length:[],factor:[]}},this.initialMeasurementWidth="",this.initialMeasurementLength="",this.initialMeasurementFactor="",this.emptyData={width:[],length:[],factor:[]},this.plot_width=600,this.dataInFlight=!1,this.lengthSmallerThanWidth=!1,this.widthInputValid=!0,this.lengthInputValid=!0,this.factorInputValid=!0,window.onresize=function(e){n.run(function(){i.plot_width=i.plotContainer.nativeElement.clientWidth})}}return ModelComponent.prototype.ngOnInit=function(){this.myTitleService.setTitle("Model"),this.modelURL=localStorage.getItem("modelURL"),null==this.modelURL&&(this.modelURL="http://electronapi.simonbiggs.net/model"),this.plot_width=this.plotContainer.nativeElement.clientWidth,this.updateInitialMeasurementValues(),this.currentEnergy=JSON.parse(localStorage.getItem("currentEnergy")),this.currentApplicator=JSON.parse(localStorage.getItem("currentApplicator")),this.currentSSD=JSON.parse(localStorage.getItem("currentSSD")),this.machineSpecifications=JSON.parse(localStorage.getItem("specifications")),null==this.machineSpecifications?(this.machineSpecifications={},this.machineList=[]):(this.machineList=Object.keys(this.machineSpecifications).sort(),this.currentMachine=JSON.parse(localStorage.getItem("current_machine")),null!=this.currentMachine&&void 0!==this.machineSpecifications[this.currentMachine]||(this.currentMachine=this.machineList[0])),this.loadMeasuredData(),this.checkLengthSmallerThanWidth()},ModelComponent.prototype.createKey=function(){var e='{"machine":'+JSON.stringify(String(this.currentMachine))+',"energy":'+JSON.stringify(Number(this.currentEnergy))+',"applicator":'+JSON.stringify(String(this.currentApplicator))+',"ssd":'+JSON.stringify(Number(this.currentSSD))+"}";return e},ModelComponent.prototype.loadMeasuredData=function(){var e=this.createKey();this.modelData=JSON.parse(localStorage.getItem(e)),null==this.modelData&&(this.modelData={measurement:{width:[],length:[],factor:[]},model:{width:[],length:[],factor:[]}}),this.updateInitialMeasurementValues()},ModelComponent.prototype.saveModel=function(){var e=this.createKey();localStorage.setItem(e,JSON.stringify(this.modelData))},ModelComponent.prototype.updateInitialMeasurementValues=function(){this.initialMeasurementWidth=String(this.modelData.measurement.width).replace(/,/g,", "),this.initialMeasurementLength=String(this.modelData.measurement.length).replace(/,/g,", "),this.initialMeasurementFactor=String(this.modelData.measurement.factor).replace(/,/g,", ")},ModelComponent.prototype.updateMachineID=function(e){this.currentMachine=e,localStorage.setItem("current_machine",JSON.stringify(e)),e in this.machineSpecifications?(this.machineSpecifications[e].energy.length>0?this.currentEnergy=this.machineSpecifications[e].energy[0]:this.currentEnergy=null,this.machineSpecifications[e].applicator.length>0?this.currentApplicator=this.machineSpecifications[e].applicator[0]:this.currentApplicator=null,this.machineSpecifications[e].ssd.length>0?this.currentSSD=this.machineSpecifications[e].ssd[0]:this.currentSSD=null):(this.currentEnergy=null,this.currentApplicator=null,this.currentSSD=null),localStorage.setItem("currentEnergy",JSON.stringify(Number(this.currentEnergy))),localStorage.setItem("currentApplicator",JSON.stringify(this.currentApplicator)),localStorage.setItem("currentSSD",JSON.stringify(Number(this.currentSSD))),this.loadMeasuredData(),this.checkLengthSmallerThanWidth()},ModelComponent.prototype.updateEnergy=function(e){this.currentEnergy=Number(e),localStorage.setItem("currentEnergy",JSON.stringify(Number(e))),this.loadMeasuredData(),this.checkLengthSmallerThanWidth()},ModelComponent.prototype.updateApplicator=function(e){this.currentApplicator=e,localStorage.setItem("currentApplicator",JSON.stringify(e)),this.loadMeasuredData(),this.checkLengthSmallerThanWidth()},ModelComponent.prototype.updateSSD=function(e){this.currentSSD=Number(e),localStorage.setItem("currentSSD",JSON.stringify(Number(e))),this.loadMeasuredData(),this.checkLengthSmallerThanWidth()},ModelComponent.prototype.checkLengthSmallerThanWidth=function(){this.lengthSmallerThanWidth=!1;for(var e=0;e<this.modelData.measurement.width.length;e++)if(this.modelData.measurement.width[e]>this.modelData.measurement.length[e])return void(this.lengthSmallerThanWidth=!0)},ModelComponent.prototype.validateInput=function(e){return/^(-?\d*(\.\d+)?[,;\s]+)*-?\d*(\.\d+)?[,;\s]*$/.test(e)},ModelComponent.prototype.updateMeasurementWidth=function(widthInput){this.widthInputValid=!1,this.modelData.model={width:[],length:[],factor:[]};try{this.validateInput(widthInput)&&(this.modelData.measurement.width=eval("["+widthInput.replace(/[,;\s]+/g,", ")+"]"),this.saveModel(),this.widthInputValid=!0,this.checkLengthSmallerThanWidth())}catch(err){console.log(err)}},ModelComponent.prototype.updateMeasurementLength=function(lengthInput){this.lengthInputValid=!1,this.modelData.model={width:[],length:[],factor:[]};try{this.validateInput(lengthInput)&&(this.modelData.measurement.length=eval("["+lengthInput.replace(/[,;\s]+/g,", ")+"]"),this.saveModel(),this.lengthInputValid=!0,this.checkLengthSmallerThanWidth())}catch(err){console.log(err)}},ModelComponent.prototype.updateMeasurementFactor=function(factorInput){this.factorInputValid=!1,this.modelData.model={width:[],length:[],factor:[]};try{this.validateInput(factorInput)&&(this.modelData.measurement.factor=eval("["+factorInput.replace(/[,;\s]+/g,", ")+"]"),this.saveModel(),this.factorInputValid=!0)}catch(err){console.log(err)}},ModelComponent.prototype.basicServerSubmit=function(){var e=this;this.dataInFlight=!0,this.electronApiService.sendToServer(this.modelURL,JSON.stringify(this.modelData.measurement)).then(function(t){e.modelData.model.width=t.model_width,e.modelData.model.length=t.model_length,e.modelData.model.factor=t.model_factor,e.dataInFlight=!1,e.saveModel()})},ModelComponent.prototype.jsonInputUpdated=function(e){this.modelData=e},ModelComponent.prototype.modelServerChange=function(e){localStorage.setItem("modelURL",e)},ModelComponent.prototype.defaultServer=function(){this.modelURL="http://electronapi.simonbiggs.net/model",localStorage.setItem("modelURL",this.modelURL)},ModelComponent.prototype.loadDemoData=function(){this.currentMachine=null,this.currentEnergy=null,this.currentApplicator=null,this.currentSSD=null,this.modelData.model={width:[],length:[],factor:[]},this.modelData.measurement.width=[3.71,6.78,6.3,7.56,5.26,6.53,7.08,4.38,3.66,4.21,4.21,6.54,5.86,3.17,6,8.06,6.31,5.26,4.21,5.21,4.59,5.34,6.41,5.26,5.25,7.82,4.2,3.16,7.18,5.72,6.08,6.64,8.4,4.59,3.15,4.67,4.21,9.45,7.64,3.17,3.17,7.36],this.modelData.measurement.length=[4.36,10.97,6.33,10.05,13.66,10.99,10.77,5.47,5.04,8.41,13.65,8.41,8.62,9.43,7.97,11.85,8.24,10.52,6.82,11.4,5.67,9.64,8.69,8.41,5.26,10.85,4.21,5.25,11.27,11.6,6.64,9.81,8.42,6.54,3.16,6.28,10.51,9.47,8.99,13.64,6.83,7.37],this.modelData.measurement.factor=[.9489,1.0067,.9858,1.0045,.9868,1.0004,1.0052,.9634,.9437,.9708,.9757,.9931,.9896,.9492,.9911,1.0067,.9923,.9879,.9609,.9884,.9587,.9934,.9991,.9831,.9705,1.0019,.9562,.9348,.9987,.9989,.9933,.9991,1.0067,.9683,.9296,.9735,.9709,1.0084,1.0028,.953,.9484,1.0032],this.updateInitialMeasurementValues()},__decorate([core_1.ViewChild("plotContainer"),__metadata("design:type",Object)],ModelComponent.prototype,"plotContainer",void 0),ModelComponent=__decorate([core_1.Component({selector:"my-model",template:__webpack_require__(72)}),__metadata("design:paramtypes",[title_service_1.TitleService,electron_api_service_1.ElectronApiService,core_1.NgZone])],ModelComponent)}();exports.ModelComponent=ModelComponent},72:function(e,t){e.exports='<div class="mdl-grid">\n  <div class="mdl-cell mdl-cell--12-col mdl-cell--8-col-tablet mdl-cell--6-col-phone">\n    <h5>Description</h5>\n    <p>\n      Use this component to turn a set of at least 8 measured factors with corresponding equivalent widths and lengths into a spline model.\n      These widths and lengths need to be determined using the parameterisation method employed within the \n      <a routerLink="/parameterise" routerLinkActive="active">\n        parameterisation component.\n      </a>\n    </p>\n    <p>\n      You are free to edit the widths, lengths, and factors manually below, or have the       \n      <a routerLink="/parameterise" routerLinkActive="active">\n        parameterisation component\n      </a>\n      automatically add the measured factors to the correct model. Both work interchangably.\n      You may only add shapes via the \n      <a routerLink="/parameterise" routerLinkActive="active">\n        parameterisation component\n      </a>\n      if machine ID, applicator, energy, ssd, and measured factor are filled in and they match a machine configuration defined within the \n      <a routerLink="/specifications" routerLinkActive="active">\n        specifications component.\n      </a> \n    </p>\n    <p>\n      A spline model is only valid for a single machine configuration. \n      Therefore each machine, applicator, energy, ssd has its own model. \n      Using the machine configuration section below you can change between the configurations.\n      This will only work if you have already\n      <a routerLink="/specifications" routerLinkActive="active">\n        defined your machine configurations.\n      </a> \n    </p>\n\n  </div>\n  <div class="mdl-cell mdl-cell--12-col mdl-cell--8-col-tablet mdl-cell--6-col-phone">\n    <h5>Choose machine configuration</h5>\n    <p>\n      Here is where you select which machine configuration you wish to currently use / edit. \n      You will only see options here if you have actually       \n      <a routerLink="/specifications" routerLinkActive="active">\n        defined your machine configurations.\n      </a> \n    </p>\n  </div>\n\n    <div \n        *ngIf="this.machineList.length > 0" \n        class="mdl-cell mdl-cell--3-col mdl-cell--4-col-tablet mdl-cell--2-col-phone">\n      <h6>Machine ID</h6>\n      <select\n          [(ngModel)]="currentMachine"\n          (input)="updateMachineID($event.target.value)">\n        <option *ngFor="let machine of machineList">{{machine}}</option>\n      </select>\n    </div>\n\n    <div \n        *ngIf="this.machineList.length > 0 && currentMachine != null" \n        class="mdl-cell mdl-cell--3-col mdl-cell--4-col-tablet mdl-cell--2-col-phone">\n      <h6>Energy</h6>\n      <select\n          [(ngModel)]="currentEnergy"\n          (input)="updateEnergy($event.target.value)"\n          *ngIf="machineSpecifications[currentMachine].energy.length > 0">\n        <option *ngFor="let energy of machineSpecifications[currentMachine].energy" value="{{energy}}">{{energy}} MeV</option>\n      </select>\n      <p *ngIf="machineSpecifications[currentMachine].energy == 0">\n        This machine doesn\'t have any energies defined. Please \n        <a routerLink="/specifications" routerLinkActive="active">\n          define energies.\n        </a>\n      </p>\n    </div>\n\n    <div \n        *ngIf="this.machineList.length > 0 && currentMachine != null" \n        class="mdl-cell mdl-cell--3-col mdl-cell--4-col-tablet mdl-cell--2-col-phone">\n      <h6>Applicator</h6>\n      <select \n          [(ngModel)]="currentApplicator"\n          (input)="updateApplicator($event.target.value)"\n          *ngIf="machineSpecifications[currentMachine].applicator.length > 0">\n        <option *ngFor="let applicator of machineSpecifications[currentMachine].applicator">{{applicator}}</option>\n      </select>\n      <p *ngIf="machineSpecifications[currentMachine].applicator == 0">\n        This machine doesn\'t have any applicators defined. Please \n        <a routerLink="/specifications" routerLinkActive="active">\n          define applicators.\n        </a>\n      </p>\n    </div>\n\n    <div \n        *ngIf="this.machineList.length > 0 && currentMachine != null" \n        class="mdl-cell mdl-cell--3-col mdl-cell--4-col-tablet mdl-cell--2-col-phone">\n      <h6>SSD</h6>\n      <select  \n          [(ngModel)]="currentSSD"\n          (input)="updateSSD($event.target.value)"\n          *ngIf="machineSpecifications[currentMachine].ssd.length > 0">\n        <option *ngFor="let ssd of machineSpecifications[currentMachine].ssd">{{ssd}}</option>\n      </select>\n      <p *ngIf="machineSpecifications[currentMachine].ssd == 0">\n        This machine doesn\'t have an ssd defined. Please \n        <a routerLink="/specifications" routerLinkActive="active">\n          define at least one ssd.\n        </a>\n      </p>\n    </div>\n\n  \n\n  <div class="mdl-cell mdl-cell--12-col mdl-cell--8-col-tablet mdl-cell--6-col-phone">\n    <div [style.width]="\'100%\'" [style.height]="\'30px\'"></div>\n    <h5>\n      The model\n      <span *ngIf="currentMachine != null && currentEnergy != null && currentEnergy != 0 && currentApplicator != null && currentApplicator != \'\' && currentSSD != null && currentSSD != 0">\n        for machine ID {{currentMachine}}, at an energy of {{currentEnergy}} MeV, on the {{currentApplicator}} applicator at {{currentSSD}} cm SSD\n      </span>\n      </h5>    \n  </div>\n  <div class="mdl-cell mdl-cell--6-col mdl-cell--8-col-tablet mdl-cell--6-col-phone">\n  \n\n    <!--<button\n      mdl-button mdl-button-type="raised" \n      mdl-colored="primary" \n      mdl-ripple\n      [disabled]="modelData.measurement.width.length == 0 || modelData.measurement.length.length == 0|| modelData.measurement.factor.length == 0"\n      (click)="saveModel()">Save model  \n    </button>-->\n    <h6>Input widths, lengths, and factors</h6>\n    <p>\n      Use the following text boxes to directly edit the measured data used by the spline model.\n    </p>\n    <p>\n      Inputs can be separated by commas (,), semicolons (;), spaces, tabs, or new lines.\n      If you have multiple commas or spaces this will count as only one separator. \n      This web app should handle copying and pasting from a range of sources (including excel).\n      Number inputs can only contain the characters 0-9, a minus sign (-) and decimal points (.).\n    </p>\n\n    <mdl-textfield\n      type="text"\n      label="Equivalent ellipse widths (cm @iso)"\n      [(ngModel)]="this.initialMeasurementWidth"\n      (input)="updateMeasurementWidth($event.target.value)"\n      rows=4\n      floating-label\n      [disabled]="dataInFlight"\n      [style.width]="\'100%\'"></mdl-textfield>\n    <p *ngIf="!widthInputValid">\n      The width input is invalid\n    </p>\n    <mdl-textfield\n      type="text"\n      label="Equivalent ellipse lengths (cm @iso)"\n      [(ngModel)]="this.initialMeasurementLength"\n      (input)="updateMeasurementLength($event.target.value)"\n      rows=4\n      floating-label\n      [disabled]="dataInFlight"\n      [style.width]="\'100%\'"></mdl-textfield>\n    <p *ngIf="!lengthInputValid">\n      The length input is invalid\n    </p>\n\n    <p *ngIf="lengthSmallerThanWidth">\n      There exists a length value that is smaller than its corresponding width. Spline modelling is disabled as a result.\n    </p>\n    <mdl-textfield\n      type="text"\n      label="Measured insert factor (as per TG 25)"\n      [(ngModel)]="this.initialMeasurementFactor"\n      (input)="updateMeasurementFactor($event.target.value)"\n      rows=4\n      floating-label\n      [disabled]="dataInFlight"\n      [style.width]="\'100%\'"></mdl-textfield>\n    <p *ngIf="!factorInputValid">\n      The factor input is invalid\n    </p>\n\n    <p *ngIf="modelData.measurement.width.length < 8 || modelData.measurement.length.length < 8 || modelData.measurement.factor.length < 8">\n      There are currently less than 8 data points. Spline modelling is disabled as a result.\n    </p>\n\n    <p *ngIf="modelData.measurement.factor.length != modelData.measurement.width.length || modelData.measurement.factor.length != modelData.measurement.length.length || modelData.measurement.width.length != modelData.measurement.length.length">\n      The lengths of the inputs are not equal. Spline modelling is disabled as a result.\n    </p>\n\n  </div>\n\n<div class="mdl-cell mdl-cell--6-col mdl-cell--8-col-tablet mdl-cell--6-col-phone" #plotContainer>\n    <h6>The spline model</h6>\n    <button\n      mdl-button mdl-button-type="raised" \n      mdl-colored="primary" \n      mdl-ripple\n      [disabled]="dataInFlight"\n      (click)="loadDemoData()">Load demo data         \n    </button>\n      \n    <button\n      mdl-button mdl-button-type="raised" \n      mdl-colored="primary" \n      mdl-ripple\n      [disabled]="modelData.measurement.width.length < 8 || modelData.measurement.length.length < 8 || modelData.measurement.factor.length < 8 || dataInFlight || modelData.measurement.factor.length != modelData.measurement.width.length || modelData.measurement.factor.length != modelData.measurement.length.length || modelData.measurement.width.length != modelData.measurement.length.length || !widthInputValid || !lengthInputValid || !factorInputValid || lengthSmallerThanWidth"\n      (click)="basicServerSubmit()">Calculate Spline Model\n    </button>\n    \n    <div *ngIf="modelData.measurement.width.length > 0 && modelData.measurement.length.length > 0 && modelData.measurement.factor.length > 0">\n      <my-bokeh-pcolour\n        [title]="\'Model Plot\'"\n        [scatter_x]="modelData.measurement.width"\n        [scatter_y]="modelData.measurement.length"\n        [scatter_z]="modelData.measurement.factor"\n        [pcolour_x]="modelData.model.width"\n        [pcolour_y]="modelData.model.length"\n        [pcolour_z]="modelData.model.factor"\n        [plot_width]="plot_width"\n        [plot_height]="380">\n      </my-bokeh-pcolour>\n    </div>\n    <div *ngIf="modelData.measurement.width.length == 0 || modelData.measurement.length.length == 0|| modelData.measurement.factor.length == 0">\n      <p>\n        <font color="red">There is currently no data for this combination.</font> If you wish to load some demo data to see the model in action press the "load demo data" button below.\n        To set this model up with your own data follow the instructions in the description at the top of this page.\n      </p>\n    </div>\n\n  </div>\n\n  <!--<div class="mdl-cell mdl-cell--6-col mdl-cell--8-col-tablet">\n\n  </div>-->\n\n\n  <div class="mdl-cell mdl-cell--6-col mdl-cell--8-col-tablet">\n    <h5>Change modelling server url (optional)</h5>\n    <p>Only change the following address if you wish to use your own server. This is not required to be edited. The default is: <br>\n      <a (click)="defaultServer()">http://electronapi.simonbiggs.net/model</a>        \n    </p>\n    <mdl-textfield\n      type="text"\n      label="Spline model server address"\n      (input)="modelServerChange($event.target.value)"\n      floating-label\n      [(ngModel)]="modelURL"\n      style="width:100%"></mdl-textfield>\n  </div>\n\n  <!--<div class="mdl-cell mdl-cell--12-col">\n    <h5>Edit raw model data</h5>\n    <my-json-edit\n      [input]="modelData"\n      (inputUpdated)="jsonInputUpdated($event)"\n      buttonText="Update Model Data"\n      useMyJsonPipe="true">\n    </my-json-edit>\n  </div>-->\n\n\n</div>'},73:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),r=n(63),l=n(68),s=function(){function ExportImportComponent(e,t){this.myTitleService=e,this.myLocalStorageService=t}return ExportImportComponent.prototype.ngOnInit=function(){this.myTitleService.setTitle("Export / Import"),this.testLocalStorage=this.myLocalStorageService.isSupported,this.usedLocalStorageSpace=this.myLocalStorageService.getUsedSpace()},ExportImportComponent.prototype.testRemainingStorage=function(){this.remainingLocalStorageSpace=this.myLocalStorageService.getRemainingSpace()},ExportImportComponent=i([a.Component({selector:"my-export-import",template:n(74)}),o("design:paramtypes",[r.TitleService,l.LocalStorageService])],ExportImportComponent)}();t.ExportImportComponent=s},74:function(e,t){e.exports='<div class="mdl-grid">\n  <div class="mdl-cell mdl-cell--12-col">\n    <h4>Local storage tests</h4>\n    <p></p>\n\n    <div *ngIf="testLocalStorage">\n      <p>Your browser supports local storage. You currently have {{usedLocalStorageSpace}} B of used space. Most browsers support\n        5 MB.\n      </p>\n\n      <p>To check your remaining storage press the button below. Warning, this might be slow.</p>\n      <button mdl-button mdl-button-type="raised" mdl-colored="primary" mdl-ripple (click)="testRemainingStorage()">Test remaining local storage           \n      </button>\n      <div *ngIf="remainingLocalStorageSpace">\n        <p>You have {{remainingLocalStorageSpace}} B of local storage remaining which is available for use by this webapp.</p>\n      </div>\n    </div>\n    <div *ngIf="!testLocalStorage">\n      <p>\n        This webapp relies upon local storage working within your browser. Your browser does not support local storage. Please download\n        and use a modern standards compliant browser such as\n        <a href="https://www.google.com.au/chrome/browser/desktop/">Chrome</a> or\n        <a href="https://www.mozilla.org/en-GB/firefox/new/">Firefox</a> to use this webapp.\n      </p>\n    </div>\n  </div>\n</div>'},75:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),r=n(63),l=function(){function SpecificationsComponent(e){this.myTitleService=e,this.specifications={},this.newMachineIDValid=!1,this.newModelValid=!1,this.newMachineValid=!1,this.edittingMachine=null,this.newEnergyValid=!1,this.newR50Valid=!1,this.newEnergySetValid=!1,this.edittingEnergy=null,this.newApplicatorValid=!1,this.edittingApplicator=null,this.newSSDValid=!1,this.edittingSSD=null}return SpecificationsComponent.prototype.ngOnInit=function(){this.myTitleService.setTitle("Specifications"),this.changeSpecifications(JSON.parse(localStorage.getItem("specifications")))},SpecificationsComponent.prototype.changeSpecifications=function(e){this.specifications=e,null==this.specifications?(this.specifications={},this.machines=[]):(this.machines=Object.keys(this.specifications).sort(),this.currentMachine=JSON.parse(localStorage.getItem("current_machine")),null!=this.currentMachine&&void 0!==this.specifications[this.currentMachine]||(this.currentMachine=this.machines[0])),this.updateSpecifications()},SpecificationsComponent.prototype.updateSpecifications=function(){localStorage.setItem("specifications",JSON.stringify(this.specifications))},SpecificationsComponent.prototype.changeCurrentMachine=function(e){this.currentMachine=e,this.updateCurrentMachine()},SpecificationsComponent.prototype.checkNewMachineIDInput=function(){null==this.specifications[this.newMachineID]&&null!=this.newMachineID&&""!=this.newMachineID?this.newMachineIDValid=!0:this.newMachineIDValid=!1,this.checkNewMachineValid()},SpecificationsComponent.prototype.checkNewModelInput=function(){null!=this.newModel&&""!=this.newModel?this.newModelValid=!0:this.newModelValid=!1,this.checkNewMachineValid()},SpecificationsComponent.prototype.checkNewMachineValid=function(){this.newMachineValid=this.newMachineIDValid&&this.newModelValid},SpecificationsComponent.prototype.addMachineID=function(){this.newMachineValid&&(this.machines.push(this.newMachineID),this.specifications[this.newMachineID]={},this.specifications[this.newMachineID].model=this.newModel,this.specifications[this.newMachineID].energy=[],this.specifications[this.newMachineID].R50={},this.specifications[this.newMachineID].applicator=[],this.specifications[this.newMachineID].ssd=[],this.changeCurrentMachine(this.newMachineID),this.newMachineID=null,this.newModel=null,this.newMachineIDValid=!1,this.newModelValid=!1,this.newMachineValid=!1,this.updateSpecifications())},SpecificationsComponent.prototype.checkNewEnergyInput=function(){this.specifications[this.currentMachine].energy.indexOf(Number(this.newEnergy))<0&&null!=this.newEnergy&&!isNaN(Number(this.newEnergy))?this.newEnergyValid=!0:this.newEnergyValid=!1,this.checkNewEnergySetValid()},SpecificationsComponent.prototype.checkNewR50Input=function(){null==this.newR50||isNaN(Number(this.newR50))?this.newR50Valid=!1:this.newR50Valid=!0,this.checkNewEnergySetValid()},SpecificationsComponent.prototype.checkNewEnergySetValid=function(){this.newEnergySetValid=this.newEnergyValid&&this.newR50Valid},SpecificationsComponent.prototype.addEnergy=function(){this.newEnergySetValid&&(this.specifications[this.currentMachine].energy.push(Number(this.newEnergy)),this.specifications[this.currentMachine].R50[this.newEnergy]=Number(this.newR50),this.newEnergy=null,this.newR50=null,this.newEnergyValid=!1,this.newR50Valid=!1,this.newEnergySetValid=!1,this.updateSpecifications())},SpecificationsComponent.prototype.checkNewApplicatorInput=function(){this.specifications[this.currentMachine].applicator.indexOf(this.newApplicator.toLowerCase())<0&&null!=this.newApplicator&&""!=this.newApplicator?this.newApplicatorValid=!0:this.newApplicatorValid=!1},SpecificationsComponent.prototype.addApplicator=function(){this.newApplicatorValid&&(this.specifications[this.currentMachine].applicator.push(this.newApplicator.toLowerCase()),this.newApplicator=null,this.newApplicatorValid=!1,this.updateSpecifications())},SpecificationsComponent.prototype.checkNewSSDInput=function(){this.specifications[this.currentMachine].ssd.indexOf(Number(this.newSSD))<0&&null!=this.newSSD&&!isNaN(Number(this.newSSD))?this.newSSDValid=!0:this.newSSDValid=!1},SpecificationsComponent.prototype.addSSD=function(){this.newSSDValid&&(this.specifications[this.currentMachine].ssd.push(Number(this.newSSD)),this.newSSD=null,this.newSSDValid=!1,this.updateSpecifications())},SpecificationsComponent.prototype.updateCurrentMachine=function(){localStorage.setItem("current_machine",JSON.stringify(this.currentMachine))},SpecificationsComponent.prototype.editMachine=function(e){this.currentMachine=null,this.edittingMachine=e},SpecificationsComponent.prototype.finishMachineEdit=function(e,t,n){t!=e&&(this.specifications[t]=this.specifications[e],delete this.specifications[e],this.machines=Object.keys(this.specifications).sort()),this.specifications[t].model=n,this.updateSpecifications(),this.currentMachine=this.edittingMachine,this.edittingMachine=null},SpecificationsComponent.prototype.deleteMachine=function(e){var t=this.machines.indexOf(e);this.machines.splice(t,1),delete this.specifications[e],this.edittingMachine=null,this.updateSpecifications()},SpecificationsComponent=i([a.Component({selector:"my-specifications",template:n(76)}),o("design:paramtypes",[r.TitleService])],SpecificationsComponent)}();t.SpecificationsComponent=l},76:function(e,t){e.exports='<div class="mdl-grid">\n\n  <div class="mdl-cell mdl-cell--12-col mdl-cell--8-col-tablet mdl-cell--6-col-phone">\n    <h5>Machine specifications editing</h5>\n    <p>\n      Use this component to define your centre\'s machine specifications. \n      These will be used throughout this web app to silo each model into its own specific machine ID, applicator, energy, ssd combination.\n    </p>\n    <p>\n      <font color="#d3d3d3">\n        Currently the editing and deleting of energy, applicator, and SSD entries is not yet implimented.\n      </font>\n    </p>\n  </div>\n  <div class="mdl-cell mdl-cell--4-col mdl-cell--4-col-tablet mdl-cell--6-col-phone">\n    <mdl-card mdl-shadow="6" style="width:100%">\n      <mdl-card-title>\n        <h2 mdl-card-title-text>Machine IDs</h2>\n      </mdl-card-title>\n\n      <mdl-list>\n        \n        <div *ngFor="let machine of machines">\n        \n          <div *ngIf="machine!=edittingMachine">\n            <mdl-list-item lines="3">\n              <mdl-list-item-primary-content>\n                <div (click)="editMachine(machine)">\n                  <span>{{machine}}</span>\n                  <mdl-list-item-text-body>{{specifications[machine].model}}</mdl-list-item-text-body>\n                </div>\n              </mdl-list-item-primary-content>\n              <mdl-list-item-secondary-action>\n                <button\n                  mdl-button\n                  mdl-button-type="icon"\n                  mdl-ripple\n                  [disabled]="machine==currentMachine || edittingMachine!=null"\n                  (click)="changeCurrentMachine(machine)"><mdl-icon>dashboard</mdl-icon>       \n                </button>\n                <button\n                  mdl-button *ngIf="machine!=edittingMachine"\n                  mdl-button-type="icon"\n                  mdl-ripple\n                  [disabled]="false"\n                  (click)="editMachine(machine)"><mdl-icon>edit</mdl-icon>       \n                </button>\n              </mdl-list-item-secondary-action>\n            </mdl-list-item>\n\n          </div>\n\n          <div *ngIf="machine==edittingMachine">\n            <mdl-list-item lines="3">\n              <mdl-list-item-primary-content>\n                <mdl-textfield #machineIDTextField\n                  type="text"\n                  label="Machine ID"\n                  [value]="machine"\n                  (keyup.enter)="finishMachineEdit(machine, machineIDTextField.value, modelTextField.value)"\n                  floating-label\n                  style="display:inline;"></mdl-textfield>\n                <mdl-textfield #modelTextField\n                  type="text"\n                  label="Model"\n                  [value]="specifications[machine].model"\n                  (keyup.enter)="finishMachineEdit(machine, machineIDTextField.value, modelTextField.value)"\n                  floating-label\n                  style="display:inline;"></mdl-textfield>\n              </mdl-list-item-primary-content>\n\n              <mdl-list-item-secondary-action>\n                <button\n                  mdl-button\n                  mdl-button-type="icon"\n                  mdl-ripple\n                  [disabled]="machine!=edittingMachine"\n                  (click)="deleteMachine(machine)"><mdl-icon>delete</mdl-icon>       \n                </button>\n                <button\n                  mdl-button\n                  mdl-button-type="icon"\n                  mdl-ripple\n                  mdl-colored="primary" \n                  [disabled]="machine==currentMachine || edittingMachine!=null"\n                  (click)="changeCurrentMachine(machine)"><mdl-icon>dashboard</mdl-icon>       \n                </button>\n                <button\n                  mdl-button\n                  mdl-button-type="icon"\n                  mdl-ripple\n                  [disabled]="false"\n                  (click)="finishMachineEdit(machine, machineIDTextField.value, modelTextField.value)"><mdl-icon>done</mdl-icon>       \n                </button>\n              </mdl-list-item-secondary-action>\n            </mdl-list-item>\n\n          </div>\n        </div>\n\n\n      </mdl-list>\n      <mdl-card-actions mdl-card-border>\n        <mdl-textfield\n          type="text"\n          label="New Machine ID"\n          [(ngModel)]="newMachineID"\n          (input)="checkNewMachineIDInput()"\n          (keyup.enter)="addMachineID()"\n          floating-label\n          style="width:100%"></mdl-textfield>\n        <mdl-textfield\n          type="text"\n          label="Machine Make and Model"\n          [(ngModel)]="newModel"\n          (input)="checkNewModelInput()"\n          (keyup.enter)="addMachineID()"\n          floating-label\n          style="width:70%"></mdl-textfield>\n        <button \n          [disabled]="!newMachineValid"\n          mdl-button \n          mdl-button-type="mini-fab"\n          mdl-ripple\n          (click)="addMachineID()">\n          <mdl-icon>add</mdl-icon>\n        </button>\n      </mdl-card-actions>\n\n    </mdl-card>\n  </div>\n\n  <div *ngIf="currentMachine" class="mdl-cell mdl-cell--4-col mdl-cell--4-col-tablet mdl-cell--6-col-phone">\n    <mdl-card mdl-shadow="6"  style="width:100%">\n      <mdl-card-title>\n        <h2 mdl-card-title-text>Energies for {{currentMachine}}</h2>\n      </mdl-card-title>\n        <mdl-list>\n          <mdl-list-item *ngFor="let energy of specifications[currentMachine].energy" lines="3">\n            <mdl-list-item-primary-content>\n              <span>{{energy}} MeV</span>\n              <mdl-list-item-text-body>R50: {{specifications[currentMachine].R50[energy]}} cm</mdl-list-item-text-body>\n            </mdl-list-item-primary-content>\n            <mdl-list-item-secondary-action>\n              <button\n                mdl-button\n                mdl-button-type="icon"\n                mdl-ripple\n                [disabled]="true"\n                (click)="null"><mdl-icon>done</mdl-icon>       \n              </button>\n              <button\n                mdl-button\n                mdl-button-type="icon"\n                mdl-ripple\n                [disabled]="true"\n                (click)="null"><mdl-icon>edit</mdl-icon>       \n              </button>\n              <button\n                mdl-button\n                mdl-button-type="icon"\n                mdl-ripple\n                [disabled]="true"\n                (click)="null"><mdl-icon>delete</mdl-icon>       \n              </button>\n            </mdl-list-item-secondary-action>\n          </mdl-list-item>\n        </mdl-list>\n\n      <mdl-card-actions mdl-card-border>\n        <mdl-textfield\n          type="text"\n          label="New Energy (MeV)"\n          [(ngModel)]="newEnergy"\n          (input)="checkNewEnergyInput()"\n          (keyup.enter)="addEnergy()"\n          floating-label\n          style="width:100%"></mdl-textfield>\n        <mdl-textfield\n          type="text"\n          label="R50 for New Energy (cm)"\n          [(ngModel)]="newR50"\n          (input)="checkNewR50Input()"\n          (keyup.enter)="addEnergy()"\n          floating-label\n          style="width:70%"></mdl-textfield>\n        <button \n          [disabled]="!newEnergySetValid" \n          mdl-button \n          mdl-button-type="mini-fab"\n          (click)="addEnergy()">\n          <mdl-icon>add</mdl-icon>\n        </button>\n      </mdl-card-actions>\n    </mdl-card>\n  </div>\n\n  <div *ngIf="currentMachine" class="mdl-cell mdl-cell--4-col mdl-cell--4-col-tablet mdl-cell--6-col-phone">\n    <mdl-card mdl-shadow="6"  style="width:100%">\n      <mdl-card-title>\n        <h2 mdl-card-title-text>Applicators for {{currentMachine}}</h2>\n      </mdl-card-title>\n        <mdl-list>\n          <mdl-list-item *ngFor="let applicator of specifications[currentMachine].applicator">\n            <mdl-list-item-primary-content>\n              <mdl-list-item-text-body>{{applicator}}</mdl-list-item-text-body>\n            </mdl-list-item-primary-content>\n            <mdl-list-item-secondary-action>\n              <button\n                mdl-button\n                mdl-button-type="icon"\n                mdl-ripple\n                [disabled]="true"\n                (click)="null"><mdl-icon>done</mdl-icon>       \n              </button>\n              <button\n                mdl-button\n                mdl-button-type="icon"\n                mdl-ripple\n                [disabled]="true"\n                (click)="null"><mdl-icon>edit</mdl-icon>       \n              </button>\n              <button\n                mdl-button\n                mdl-button-type="icon"\n                mdl-ripple\n                [disabled]="true"\n                (click)="null"><mdl-icon>delete</mdl-icon>       \n              </button>\n            </mdl-list-item-secondary-action>\n          </mdl-list-item>\n        </mdl-list>\n\n      <mdl-card-actions mdl-card-border>\n        <mdl-textfield\n          type="text"\n          label="New Applicator"\n          [(ngModel)]="newApplicator"\n          (input)="checkNewApplicatorInput()"\n          (keyup.enter)="addApplicator()"\n          floating-label\n          style="width:70%"></mdl-textfield>\n        <button \n          [disabled]="!newApplicatorValid" \n          mdl-button \n          mdl-button-type="mini-fab"\n          (click)="addApplicator()">\n          <mdl-icon>add</mdl-icon>\n        </button>\n      </mdl-card-actions>\n    </mdl-card>\n  </div>\n\n  <div *ngIf="currentMachine" class="mdl-cell mdl-cell--4-col mdl-cell--4-col-tablet mdl-cell--6-col-phone">\n    <mdl-card mdl-shadow="6"  style="width:100%">\n      <mdl-card-title>\n        <h2 mdl-card-title-text>SSDs for {{currentMachine}}</h2>\n      </mdl-card-title>\n        <mdl-list>\n          <mdl-list-item *ngFor="let ssd of specifications[currentMachine].ssd">\n            <mdl-list-item-primary-content>\n              <mdl-list-item-text-body>{{ssd}} cm</mdl-list-item-text-body>\n            </mdl-list-item-primary-content>\n            <mdl-list-item-secondary-action>\n              <button\n                mdl-button\n                mdl-button-type="icon"\n                mdl-ripple\n                [disabled]="true"\n                (click)="null"><mdl-icon>done</mdl-icon>       \n              </button>\n              <button\n                mdl-button\n                mdl-button-type="icon"\n                mdl-ripple\n                [disabled]="true"\n                (click)="null"><mdl-icon>edit</mdl-icon>       \n              </button>\n              <button\n                mdl-button\n                mdl-button-type="icon"\n                mdl-ripple\n                [disabled]="true"\n                (click)="null"><mdl-icon>delete</mdl-icon>       \n              </button>\n            </mdl-list-item-secondary-action>\n          </mdl-list-item>\n        </mdl-list>\n\n      <mdl-card-actions mdl-card-border>\n        <mdl-textfield\n          type="text"\n          label="New SSD (cm)"\n          [(ngModel)]="newSSD"\n          (input)="checkNewSSDInput()"\n          (keyup.enter)="addSSD()"\n          floating-label\n          style="width:70%"></mdl-textfield>\n        <button \n          [disabled]="!newSSDValid" \n          mdl-button \n          mdl-button-type="mini-fab"\n          (click)="addSSD()">\n          <mdl-icon>add</mdl-icon>\n        </button>\n      </mdl-card-actions>\n    </mdl-card>\n  </div>\n\n\n  <div class="mdl-cell mdl-cell--12-col mdl-cell--8-col-tablet mdl-cell--6-col-phone">\n    <h5>Raw specification data editing (optional)</h5>\n    <p>\n      If you desire you may edit the raw machine specifications in its raw format below. \n      Currently error checking on this raw input is not implemented.\n      Incorrectly editing the data below may cause the web app not to function.\n      Input data above to determine the data structure required.</p>\n    <my-json-edit\n      [input]="specifications"\n      (inputUpdated)="changeSpecifications($event)"\n      buttonText="Update Specifications">\n    </my-json-edit>\n  </div>\n\n</div>\n\n';
},77:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),r=n(30),l=n(63),s=n(78),c=function(){function DicomComponent(e,t){this.myTitleService=e,this.router=t,this.parameterisation={insert:{x:[0],y:[0]},width:null,length:null,circle:null,ellipse:null},this.insertData={machine:null,parameterisation:this.parameterisation,energy:null,applicator:null,ssd:null,factor:null},this.dicomExitCode=1,this.reader=new FileReader}return DicomComponent.prototype.ngOnInit=function(){var e=this;window.dicomData=" ",this.reader.onload=function(){return e.onceFileIsLoaded()};var t=localStorage.getItem("dicom_insertList");t?this.insertList=JSON.parse(t):this.insertList=[],Module.print=this.sendDicomDumpToGlobalVariable,this.myTitleService.setTitle("Dicom")},DicomComponent.prototype.sendDicomDumpToGlobalVariable=function(e){window.dicomData=window.dicomData+"\n"+e},DicomComponent.prototype.updateDicomWarning=function(){var e=Number(localStorage.getItem("dicomLoadStatus"));0==e?(this.getBlockDataButton.disabled=!1,this.dicomWarning=null):(this.getBlockDataButton.disabled=!0,this.dicomWarning="An error occured while trying to find the block data within the provided Dicom file.")},DicomComponent.prototype.onceFileIsLoaded=function(){var e=new Int8Array(this.reader.result);console.log(e.length);var t="dicomfile";FS.isFile(t)&&FS.unlink(t),FS.writeFile(t,e,{encoding:"binary"});var n=Module.exit;Module.exit=function(e){localStorage.setItem("dicomLoadStatus",e),n(e)},Module.callMain(["dcmdump",t,"--print-all"]),Module.exit=n,console.log(Module),this.updateDicomWarning(),FS.unlink(t)},DicomComponent.prototype.openFile=function(e){if("undefined"!=typeof e.target){console.log(e.target.files);var t=e.target.files[0];window.dicomData=" ",this.reader.readAsArrayBuffer(t)}else console.log(e)},DicomComponent.prototype.convertDicomDumpToDict=function(e){var t=e.replace(/\s*#[^#\n]*\n/g,"\n");return t=t.replace(/\s*#[^#\n]*$/g,""),t=t.replace(/^\n*/,""),t=t.replace(/(\([0-9a-f][0-9a-f][0-9a-f][0-9a-f],[0-9a-f][0-9a-f][0-9a-f][0-9a-f]\))/g,"$1:"),t=t.replace(/(\([0-9a-f][0-9a-f][0-9a-f][0-9a-f],[0-9a-f][0-9a-f][0-9a-f][0-9a-f]\):) SQ \(Sequence with undefined length #=\d+\)/g,"$1"),t=t.replace(/(\([0-9a-f][0-9a-f][0-9a-f][0-9a-f],[0-9a-f][0-9a-f][0-9a-f][0-9a-f]\):) na \(Item with undefined length #=\d+\)/g,"$1"),t=t.replace(/ *\(fffe,e00d\): na \(ItemDelimitationItem\) *\n/g,""),t=t.replace(/ *\(fffe,e0dd\): na \(SequenceDelimitationItem\)\n/g,""),t=t.replace(/(\([0-9a-f][0-9a-f][0-9a-f][0-9a-f],[0-9a-f][0-9a-f][0-9a-f][0-9a-f]\):) (.*)/g,'$1 "$2"'),t=t.replace(/\\/g,", "),t=t.replace(/\(fffe,e000\):/g," - "),t=s.safeLoad(t)},DicomComponent.prototype.convertBlockDataToCoords=function(e){for(var t=/\[[, \d\.-]*\]/.exec(e).toString(),n=JSON.parse('{ "data": '+t+"}"),i=[],o=[],a=0,r=0,l=n.data;r<l.length;r++){var s=l[r];a%2==0?i.push(parseFloat((s/10).toFixed(2))):o.push(parseFloat((s/10).toFixed(2))),a++}var c={x:i,y:o};return c},DicomComponent.prototype.dicomPullNumber=function(e){return Number(e.replace(/.*\[([\d\.-]*)\].*/,"$1"))},DicomComponent.prototype.dicomPullString=function(e){return e.replace(/.*\[(.*)\].*/,"$1")},DicomComponent.prototype.getBlockData=function(){var e=window.dicomData,t=this.convertDicomDumpToDict(e);this.insertList=[];for(var n=t["(300a,00b0)"],i=0,o=n;i<o.length;i++){var a=o[i],r=a["(300a,00f4)"];if(void 0!=r){var l=a["(300a,00f4)"][0]["(300a,0106)"],s=this.convertBlockDataToCoords(l),c=null;try{c=this.dicomPullString(a["(300a,0107)"][0]["(300a,0108)"])}catch(d){c=null,console.log(d)}var p=null;try{p=this.dicomPullNumber(a["(300a,0111)"][0]["(300a,0114)"])}catch(d){p=null,console.log(d)}var h=null;try{h=this.dicomPullNumber(a["(300a,0111)"][0]["(300a,0130)"])/10}catch(d){h=null,console.log(d)}var m=null;try{m=this.dicomPullString(a["(300a,00b2)"])}catch(d){m=null,console.log(d)}var u={machine:m,coordinates:s,applicator:c.toLowerCase(),energy:p,ssd:h};this.insertList.push(u)}}localStorage.setItem("dicom_insertList",JSON.stringify(this.insertList))},DicomComponent.prototype.sendToParameterisation=function(e){this.insertUpdated(e.coordinates),this.insertData.machine=e.machine,this.insertData.parameterisation=this.parameterisation,this.insertData.energy=e.energy,this.insertData.applicator=e.applicator,this.insertData.ssd=e.ssd,localStorage.setItem("last_insertData",JSON.stringify(this.insertData)),this.router.navigate(["/parameterise"])},DicomComponent.prototype.parameterisationFromLocalStorage=function(e){var t=JSON.parse(e);this.parameterisation.insert=t.insert,this.parameterisation.width=t.width,this.parameterisation.length=t.length,this.parameterisation.circle=t.circle,this.parameterisation.ellipse=t.ellipse},DicomComponent.prototype.insertUpdated=function(e){var t=localStorage.getItem(JSON.stringify(e));t?this.parameterisationFromLocalStorage(t):(this.parameterisation.insert=e,this.parameterisation.width=null,this.parameterisation.length=null,this.parameterisation.circle=null,this.parameterisation.ellipse=null)},i([a.ViewChild("dicomOutput"),o("design:type",Object)],DicomComponent.prototype,"dicomOutputDir",void 0),i([a.ViewChild("getBlockDataButton"),o("design:type",Object)],DicomComponent.prototype,"getBlockDataButton",void 0),DicomComponent=i([a.Component({selector:"my-dicom",template:n(113),styles:["./dicom.component.css"]}),o("design:paramtypes",[l.TitleService,r.Router])],DicomComponent)}();t.DicomComponent=c},113:function(e,t){e.exports='<div class="mdl-grid">\n  <div class="mdl-cell mdl-cell--12-col">\n    <h5>Locally reading Dicom patient plan files</h5>\n    <p>\n      Use this component to read a dicom patient plan file and extract the electron insert shape. \n      Export a dicom patient plan file that containts an electron plan from your planning system then open it using the file input box below.\n    </p>\n    <p>\n      For testing purposes you can download a demo dicom file from <a href="/30x16x30_RandomElectronShapes.dcm">here</a>.\n    </p>\n  </div>\n\n  <div class="mdl-cell mdl-cell--6-col">\n    <input type=\'file\' (change)=\'openFile($event)\'>\n    <div *ngIf="dicomWarning">{{dicomWarning}}</div>\n  </div>\n\n  <div class="mdl-cell mdl-cell--6-col">\n    <button #getBlockDataButton\n      mdl-button mdl-button-type="raised" \n      mdl-colored="primary" \n      mdl-ripple\n      [disabled]="true"\n      (click)="getBlockData()">Get Dicom Insert Data\n    </button>\n\n    \n  </div>\n\n  <div *ngFor="let insert of insertList" class="mdl-cell mdl-cell--6-col">\n    <mdl-card mdl-shadow="6">\n\n\n      <my-send-to-parameterisation\n        [machine]=insert.machine\n        [coordinates]=insert.coordinates\n        [applicator]=insert.applicator\n        [ssd]=insert.ssd\n        [energy]=insert.energy>\n      </my-send-to-parameterisation>\n\n      <mdl-card-actions mdl-card-border>\n        <button\n          mdl-button \n          mdl-ripple\n          (click)="sendToParameterisation(insert)">Send to parameterisation           \n        </button>\n      </mdl-card-actions>\n    </mdl-card>\n    \n\n\n    <!--<p>{{insert | json}}</p>-->\n  </div>\n\n  <div class="mdl-cell mdl-cell--12-col">\n    <h5>Further information</h5>\n    <p>This Dicom loader does not send the Dicom file off to a server. The entire reading of the dicom file is done within javascript.\n    You can confirm this yourself by using the chrome web browser, pressing \'Ctrl + Shift + I\'\n    and then clicking on the network tab. When the file is chosen, then the block data is pulled and sent to parameterisation,\n    at no point in this interaction is there network traffic.</p>\n\n    <p>The only data that will be sent to the server will be on either the paremeterisation tab or the model tab, and this data will\n      just consist of x and y coordinates or widths, lengths, and factors.\n    </p>\n  </div>\n</div>'},114:function(e,t,n){"use strict";var i=n(3),o=n(115),a=function(){function Angulartics2GoogleAnalytics(e){var t=this;this.angulartics2=e,this.angulartics2.settings.pageTracking.trackRelativePath=!0,this.angulartics2.settings.ga={additionalAccountNames:[],userId:null},this.angulartics2.pageTrack.subscribe(function(e){return t.pageTrack(e.path)}),this.angulartics2.eventTrack.subscribe(function(e){return t.eventTrack(e.action,e.properties)}),this.angulartics2.exceptionTrack.subscribe(function(e){return t.exceptionTrack(e)}),this.angulartics2.setUsername.subscribe(function(e){return t.setUsername(e)}),this.angulartics2.setUserProperties.subscribe(function(e){return t.setUserProperties(e)}),this.angulartics2.userTimings.subscribe(function(e){return t.userTimings(e)})}return Angulartics2GoogleAnalytics.prototype.pageTrack=function(e){if("undefined"!=typeof _gaq&&_gaq){_gaq.push(["_trackPageview",e]);for(var t=0,n=this.angulartics2.settings.ga.additionalAccountNames;t<n.length;t++){var i=n[t];_gaq.push([i+"._trackPageview",e])}}if("undefined"!=typeof ga&&ga){this.angulartics2.settings.ga.userId&&ga("set","&uid",this.angulartics2.settings.ga.userId),ga("send","pageview",e);for(var o=0,a=this.angulartics2.settings.ga.additionalAccountNames;o<a.length;o++){var i=a[o];ga(i+".send","pageview",e)}}},Angulartics2GoogleAnalytics.prototype.eventTrack=function(e,t){if(t&&t.category||(t=t||{},t.category="Event"),t.value){var n=parseInt(t.value,10);t.value=isNaN(n)?0:n}if(ga){var i={eventCategory:t.category,eventAction:e,eventLabel:t.label,eventValue:t.value,nonInteraction:t.noninteraction,page:t.page||location.hash.substring(1)||location.pathname,userId:this.angulartics2.settings.ga.userId};this.setDimensionsAndMetrics(t),this.angulartics2.settings.ga.transport?ga("send","event",i,{transport:this.angulartics2.settings.ga.transport}):ga("send","event",i);for(var o=0,a=this.angulartics2.settings.ga.additionalAccountNames;o<a.length;o++){var r=a[o];ga(r+".send","event",i)}}else _gaq&&_gaq.push(["_trackEvent",t.category,e,t.label,t.value,t.noninteraction])},Angulartics2GoogleAnalytics.prototype.exceptionTrack=function(e){return e&&e.appId&&e.appName&&e.appVersion?(void 0===e.fatal&&(console.log('No "fatal" provided, sending with fatal=true'),e.exFatal=!0),e.exDescription=e.description,void ga("send","exception",e)):void console.error("Must be setted appId, appName and appVersion.")},Angulartics2GoogleAnalytics.prototype.setUsername=function(e){this.angulartics2.settings.ga.userId=e},Angulartics2GoogleAnalytics.prototype.setUserProperties=function(e){this.setDimensionsAndMetrics(e)},Angulartics2GoogleAnalytics.prototype.userTimings=function(e){return e&&e.timingCategory&&e.timingVar&&e.timingValue?void(ga&&ga("send","timing",e)):void console.error("Properties timingCategory, timingVar, and timingValue are required to be set.")},Angulartics2GoogleAnalytics.prototype.setDimensionsAndMetrics=function(e){if(ga)for(var t=1;t<=200;t++)e["dimension"+t.toString()]&&ga("set","dimension"+t.toString(),e["dimension"+t.toString()]),e["metric"+t.toString()]&&ga("set","metric"+t.toString(),e["metric"+t.toString()])},Angulartics2GoogleAnalytics.decorators=[{type:i.Injectable}],Angulartics2GoogleAnalytics.ctorParameters=[{type:o.Angulartics2}],Angulartics2GoogleAnalytics}();t.Angulartics2GoogleAnalytics=a},183:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),r=n(30),l=n(21),s=n(126),c=n(114),d=n(59),p=n(63),h=function(){function AppComponent(e,t,n,i,o,a){var l=this;this.electronApiService=e,this.myTitleService=t,this.router=n,this.title=i,n.events.filter(function(e){return e instanceof r.NavigationEnd}).subscribe(function(){l.pageTitle=l.myTitleService.getTitle(),l.title.setTitle(l.myTitleService.getTitle()+" | Electron Insert Factor Modelling")})}return AppComponent.prototype.ngOnInit=function(){var e=sessionStorage.redirect;delete sessionStorage.redirect,e&&e!=location.href&&(history.replaceState(null,null,e),this.router.navigate([e])),this.electronApiService.wakeUpServer(),this.pageTitle=this.myTitleService.getTitle(),this.title.setTitle(this.myTitleService.getTitle()+" | Electron Insert Factor Modelling")},AppComponent=i([a.Component({selector:"my-app",template:n(184)}),o("design:paramtypes",[d.ElectronApiService,p.TitleService,r.Router,l.Title,s.Angulartics2,c.Angulartics2GoogleAnalytics])],AppComponent)}();t.AppComponent=h},184:function(e,t){e.exports='\n<!--<md-sidenav-layout>\n\n  <md-sidenav #sidenav mode="side" class="app-sidenav">\n    <nav class="mdl-navigation">\n      <a class="mdl-navigation__link" routerLink="/home" routerLinkActive="active" href>Home</a>\n      <a class="mdl-navigation__link" routerLink="/export-import" routerLinkActive="active" href>Export / Import</a>\n      <a class="mdl-navigation__link" routerLink="/specifications" routerLinkActive="active" href>Machine specifications</a>\n      <a class="mdl-navigation__link" routerLink="/dicom" routerLinkActive="active" href>Dicom shape extraction</a>\n      <a class="mdl-navigation__link" routerLink="/parameterise" routerLinkActive="active" href>Parameterise inserts</a>\n      <a class="mdl-navigation__link" routerLink="/model" routerLinkActive="active" href>Model insert factors</a>\n    </nav>\n  </md-sidenav>\n\n  <md-toolbar color="primary">\n    <button class="app-icon-button" (click)="sidenav.toggle()">\n      <i class="material-icons app-toolbar-menu">menu</i>\n    </button>\n\n    {{pageTitle}}\n\n    <span class="app-toolbar-filler"></span>\n    <button md-button (click)="isDarkTheme = !isDarkTheme">TOGGLE DARK THEME</button>\n  </md-toolbar>\n\n  <div class="app-content">\n    <router-outlet></router-outlet>\n  </div>\n\n\n</md-sidenav-layout>-->\n\n\n<mdl-layout mdl-layout-fixed-drawer mdl-layout-fixed-header>\n  <mdl-layout-header>\n    <mdl-layout-header-row>\n      <mdl-layout-title>{{pageTitle}}</mdl-layout-title>\n    </mdl-layout-header-row>\n  </mdl-layout-header>\n  <mdl-layout-drawer>\n    <mdl-layout-title>Electron Factors</mdl-layout-title>\n    <nav class="mdl-navigation">\n      <a class="mdl-navigation__link" routerLink="/home" routerLinkActive="active" href>Home</a>\n      <!--<a class="mdl-navigation__link" routerLink="/export-import" routerLinkActive="active" href>Export / Import</a>-->\n      <a class="mdl-navigation__link" routerLink="/specifications" routerLinkActive="active" href>Machine specifications</a>\n      <a class="mdl-navigation__link" routerLink="/dicom" routerLinkActive="active" href>Dicom shape extraction</a>\n      <a class="mdl-navigation__link" routerLink="/parameterise" routerLinkActive="active" href>Parameterise inserts</a>\n      <a class="mdl-navigation__link" routerLink="/model" routerLinkActive="active" href>Model insert factors</a>\n    </nav>\n  </mdl-layout-drawer>\n  <mdl-layout-content>\n\n    <router-outlet></router-outlet>\n\n  </mdl-layout-content>\n</mdl-layout>'},185:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),r=n(186),l=function(){function PlotComponent(){this.insert_x=null,this.insert_y=null,this.circle=null,this.ellipse=null,this.enabled=!0,this.jsonValid=!0,this.plt=Bokeh.Plotting,this.tools="pan,crosshair,wheel_zoom,box_zoom,reset,save",this.xrange=Bokeh.Range1d(-6,6),this.yrange=Bokeh.Range1d(-6,6),this.fig=this.plt.figure({title:"Electron Insert Plot",tools:this.tools,x_range:this.xrange,y_range:this.yrange,plot_width:300,plot_height:300}),this.source=new Bokeh.ColumnDataSource,this.doc=new Bokeh.Document}return PlotComponent.prototype.ngOnChanges=function(){this.jsonValid=!1,this.tempSource={xs:[[0],[0],[0]],ys:[[0],[0],[0]],colour:["navy","firebrick","green"]};var e=[],t=[];this.enabled&&(null!=this.insert_x&&null!=this.insert_y&&(this.tempSource.xs[0]=this.insert_x.concat(this.insert_x[0]),this.tempSource.ys[0]=this.insert_y.concat(this.insert_y[0]),e=e.concat(this.tempSource.xs[0]),t=t.concat(this.tempSource.ys[0])),this.circle&&"x"in this.circle&&"y"in this.circle&&(this.tempSource.xs[1]=this.circle.x,this.tempSource.ys[1]=this.circle.y,e=e.concat(this.tempSource.xs[1]),t=t.concat(this.tempSource.ys[1])),this.ellipse&&"x"in this.ellipse&&"y"in this.ellipse&&(this.tempSource.xs[2]=this.ellipse.x,this.tempSource.ys[2]=this.ellipse.y,e=e.concat(this.tempSource.xs[2]),t=t.concat(this.tempSource.ys[2])));var n=Math.max.apply(Math,e),i=Math.min.apply(Math,e),o=Math.max.apply(Math,t),a=Math.min.apply(Math,t),r=1.1*Math.max(n-i,o-a),l=(n+i)/2+r/2,s=(n+i)/2-r/2,c=(o+a)/2+r/2,d=(o+a)/2-r/2;this.fig.attributes.x_range.start=s,this.fig.attributes.x_range.end=l,this.fig.attributes.y_range.start=d,this.fig.attributes.y_range.end=c,this.source.data=this.tempSource},PlotComponent.prototype.ngAfterViewInit=function(){this.fig.multi_line({field:"xs"},{field:"ys"},{source:this.source,line_width:2,color:{field:"colour"}}),this.doc.add_root(this.fig),Bokeh.embed.add_document_standalone(this.doc,this.bokehplot.nativeElement)},i([a.Input(),o("design:type",Array)],PlotComponent.prototype,"insert_x",void 0),i([a.Input(),o("design:type",Array)],PlotComponent.prototype,"insert_y",void 0),i([a.Input(),o("design:type",r.Coordinates)],PlotComponent.prototype,"circle",void 0),i([a.Input(),o("design:type",r.Coordinates)],PlotComponent.prototype,"ellipse",void 0),i([a.Input(),o("design:type",Boolean)],PlotComponent.prototype,"enabled",void 0),i([a.ViewChild("bokehplot"),o("design:type",Object)],PlotComponent.prototype,"bokehplot",void 0),PlotComponent=i([a.Component({selector:"my-plot",template:n(187),styles:[n(188)]}),o("design:paramtypes",[])],PlotComponent)}();t.PlotComponent=l},186:function(e,t){"use strict";var n=function(){function Coordinates(e,t){this.x=e,this.y=t}return Coordinates}();t.Coordinates=n},187:function(e,t){e.exports='\n  <div class="bk-root" style="height:300px">\n    <div #bokehplot></div>\n  </div>\n\n\n  <div [hidden]="jsonValid" class="alert alert-danger">\n      {{jsonErrorMessage}}\n  </div>\n'},188:function(e,t){e.exports=""},189:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),r=n(128),l=function(){function WidthLengthTableComponent(){this.tableData=[{width:null,length:null}],this.tableModel=new r.MdlDefaultTableModel([{key:"width",name:"Width",sortable:!0,numeric:!0},{key:"length",name:"Length",sortable:!0,numeric:!0}])}return WidthLengthTableComponent.prototype.ngOnChanges=function(){this.enabled?(this.tableData[0].width=this.width,this.tableData[0].length=this.length):(this.tableData[0].width=null,this.tableData[0].length=null)},WidthLengthTableComponent.prototype.ngOnInit=function(){this.tableModel.addAll(this.tableData)},i([a.Input(),o("design:type",Number)],WidthLengthTableComponent.prototype,"width",void 0),i([a.Input(),o("design:type",Number)],WidthLengthTableComponent.prototype,"length",void 0),i([a.Input(),o("design:type",Boolean)],WidthLengthTableComponent.prototype,"enabled",void 0),WidthLengthTableComponent=i([a.Component({selector:"my-width-length-table",template:n(190)}),o("design:paramtypes",[])],WidthLengthTableComponent)}();t.WidthLengthTableComponent=l},190:function(e,t){e.exports='<mdl-table mdl-shadow="2"\n  [table-model]="tableModel">\n</mdl-table>'},191:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),r=n(192),l=n(186),s=function(){function JsonInputComponent(){this.insertUpdated=new a.EventEmitter,this.jsonStatus=new a.EventEmitter,this.jsonValid=!0}return JsonInputComponent.prototype.onInput=function(e){this.parseAndCheckJSON(e),this.insertUpdated.emit(this.insert)},JsonInputComponent.prototype.ngOnChanges=function(){this.refresh&&(this.jsonInputDir.value=(new r.MyJsonPipe).transform(this.insert),this.parseAndCheckJSON(this.jsonInputDir.value),this.refresh=!1)},JsonInputComponent.prototype.parseAndCheckJSON=function(e){var t=this.jsonValid;this.jsonValid=!1;try{var n=JSON.parse(e);if("x"in n&&"y"in n)if(n.x.length===n.y.length){var i=n.x,o=n.y,a={x:i,y:o};this.insert=a,this.jsonValid=!0}else this.jsonErrorMessage="The length of x doesn't match the length of y.";else this.jsonErrorMessage="Either x or y is missing."}catch(r){this.jsonErrorMessage="Error in JSON input. "+r}finally{this.jsonValid!=t&&this.jsonStatus.emit(this.jsonValid)}},i([a.Input(),o("design:type",l.Coordinates)],JsonInputComponent.prototype,"insert",void 0),i([a.Input(),o("design:type",Boolean)],JsonInputComponent.prototype,"jsonDisabled",void 0),i([a.Input(),o("design:type",Boolean)],JsonInputComponent.prototype,"refresh",void 0),i([a.Output(),o("design:type",Object)],JsonInputComponent.prototype,"insertUpdated",void 0),i([a.Output(),o("design:type",Object)],JsonInputComponent.prototype,"jsonStatus",void 0),i([a.ViewChild("jsonInput"),o("design:type",Object)],JsonInputComponent.prototype,"jsonInputDir",void 0),JsonInputComponent=i([a.Component({selector:"my-json-input",template:n(193)}),o("design:paramtypes",[])],JsonInputComponent)}();t.JsonInputComponent=s},192:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),r=function(){function MyJsonPipe(){}return MyJsonPipe.prototype.transform=function(e){var t=JSON.stringify(e,null,4);return t=t.replace(/(-?\d+(\.\d+)?),\n\s*/g,"$1, "),t=t.replace(/null,\n\s*/g,"null, ")},MyJsonPipe=i([a.Pipe({name:"myJson",pure:!1}),o("design:paramtypes",[])],MyJsonPipe)}();t.MyJsonPipe=r},193:function(e,t){e.exports='<mdl-textfield #jsonInput\n  [value]="insert | myJson"\n  (input)="onInput($event.target.value)"\n  rows="12" \n  style="width:100%"\n  [disabled]=jsonDisabled>\n</mdl-textfield>\n<div *ngIf="!jsonValid">\n  {{jsonErrorMessage}}\n</div>'},194:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),r=function(){function NotYetImplimentedComponent(){}return NotYetImplimentedComponent=i([a.Component({selector:"my-not-yet-implimented",template:n(195)}),o("design:paramtypes",[])],NotYetImplimentedComponent)}();t.NotYetImplimentedComponent=r},195:function(e,t){e.exports='<div class="mdl-grid">\n  <div class="mdl-cell mdl-cell--12-col">\n    Due to this web app being a work in progress this page is not yet implimented.\n  </div>\n</div>'},196:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),r=n(192),l=n(22),s=function(){function JsonEditComponent(){this.buttonText="Button",this.inputUpdated=new a.EventEmitter,this.validationCheck=function(e){},this.useMyJsonPipe=!1,this.lines=10,this.jsonValid=!0}return JsonEditComponent.prototype.onInput=function(e){this.parseAndCheckJSON(e)},JsonEditComponent.prototype.ngOnInit=function(){var e="";e=this.useMyJsonPipe?(new r.MyJsonPipe).transform(this.input):(new l.JsonPipe).transform(this.input),this.lines=e.split(/\r\n|\r|\n/).length,this.editedInput=this.input},JsonEditComponent.prototype.updateInput=function(){this.input=this.editedInput,this.inputUpdated.emit(this.input)},JsonEditComponent.prototype.parseAndCheckJSON=function(e){this.jsonValid;this.jsonValid=!1;try{var t=JSON.parse(e);this.validationCheck(t),this.editedInput=t,this.jsonValid=!0}catch(n){this.jsonErrorMessage="Error in JSON input. "+n}},i([a.Input(),o("design:type",Object)],JsonEditComponent.prototype,"input",void 0),i([a.Input(),o("design:type",String)],JsonEditComponent.prototype,"buttonText",void 0),i([a.Output(),o("design:type",Object)],JsonEditComponent.prototype,"inputUpdated",void 0),i([a.Input(),o("design:type",Function)],JsonEditComponent.prototype,"validationCheck",void 0),i([a.Input(),o("design:type",Boolean)],JsonEditComponent.prototype,"useMyJsonPipe",void 0),i([a.ViewChild("jsonInput"),o("design:type",Object)],JsonEditComponent.prototype,"jsonInputDir",void 0),JsonEditComponent=i([a.Component({selector:"my-json-edit",template:n(197)}),o("design:paramtypes",[])],JsonEditComponent)}();t.JsonEditComponent=s},197:function(e,t){e.exports='<button\n  mdl-button mdl-button-type="raised" \n  mdl-colored="primary" \n  mdl-ripple\n  [disabled]="!jsonValid || input==editedInput"\n  (click)="updateInput()">{{buttonText}} \n</button>\n<div *ngIf="!jsonValid">\n  {{jsonErrorMessage}}\n</div>\n<mdl-textfield *ngIf="!useMyJsonPipe" #jsonInput\n  [value]="input | json"\n  (input)="onInput($event.target.value)"\n  [rows]="20" \n  style="width:100%">\n</mdl-textfield>\n<mdl-textfield *ngIf="useMyJsonPipe" #jsonInput\n  [value]="input | myJson"\n  (input)="onInput($event.target.value)"\n  [rows]="20" \n  style="width:100%">\n</mdl-textfield>'},198:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),r=n(186),l=n(128),s=function(){function SendToParameterisationComponent(){this.tableData=[{machine:null,applicator:null,energy:null,ssd:null}],this.tableModel=new l.MdlDefaultTableModel([{key:"machine",name:"Machine",sortable:!0,numeric:!1},{key:"applicator",name:"App",sortable:!0,numeric:!1},{key:"energy",name:"Eng",sortable:!0,numeric:!0},{key:"ssd",name:"SSD",sortable:!0,numeric:!0}])}return SendToParameterisationComponent.prototype.ngOnInit=function(){this.tableData[0].machine=this.machine,this.tableData[0].applicator=this.applicator,this.tableData[0].energy=this.energy,this.tableData[0].ssd=this.ssd,this.tableModel.addAll(this.tableData)},i([a.Input(),o("design:type",String)],SendToParameterisationComponent.prototype,"applicator",void 0),i([a.Input(),o("design:type",String)],SendToParameterisationComponent.prototype,"machine",void 0),i([a.Input(),o("design:type",Number)],SendToParameterisationComponent.prototype,"energy",void 0),i([a.Input(),o("design:type",Number)],SendToParameterisationComponent.prototype,"ssd",void 0),i([a.Input(),o("design:type",r.Coordinates)],SendToParameterisationComponent.prototype,"coordinates",void 0),SendToParameterisationComponent=i([a.Component({selector:"my-send-to-parameterisation",template:n(199)}),o("design:paramtypes",[])],SendToParameterisationComponent)}();t.SendToParameterisationComponent=s},199:function(e,t){e.exports='<div class="mdl-grid">\n  <div class="mdl-cell mdl-cell--12-col">\n    <my-plot \n      [insert_x]="coordinates.x"\n      [insert_y]="coordinates.y">\n    </my-plot>\n  </div>\n  <div class="mdl-cell mdl-cell--12-col">\n    <mdl-table mdl-shadow="2"\n      [table-model]="tableModel">\n    </mdl-table>\n  </div>\n</div>\n\n'},200:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),r=function(){function BokehPcolourComponent(){this.title="Figure Title",this.plot_width=300,this.plot_height=300,this.scatter_z=[.5],this.enabled=!0,this.plt=Bokeh.Plotting,this.tools="pan,crosshair,wheel_zoom,box_zoom,reset,save",this.old_scatter_z=[],this.old_pcolour_z=[],this.scatter_c=[],this.pcolour_c=[],this.scatter_data={x:[],y:[],z:[],c:[]},this.scatter_source=new Bokeh.ColumnDataSource({data:this.scatter_data}),this.hover_width=[],this.hover_length=[],this.hover_factor=[],this.pcolour_data={x:[],y:[],z:[],hover_width:[],hover_length:[],hover_factor:[],c:[]},this.pcolour_source=new Bokeh.ColumnDataSource({data:this.pcolour_data}),this.doc=new Bokeh.Document,this.viridis_hex=["#440154","#440256","#450457","#450559","#46075a","#46085c","#460a5d","#460b5e","#470d60","#470e61","#471063","#471164","#471365","#481467","#481668","#481769","#48186a","#481a6c","#481b6d","#481c6e","#481d6f","#481f70","#482071","#482173","#482374","#482475","#482576","#482677","#482878","#482979","#472a7a","#472c7a","#472d7b","#472e7c","#472f7d","#46307e","#46327e","#46337f","#463480","#453581","#453781","#453882","#443983","#443a83","#443b84","#433d84","#433e85","#423f85","#424086","#424186","#414287","#414487","#404588","#404688","#3f4788","#3f4889","#3e4989","#3e4a89","#3e4c8a","#3d4d8a","#3d4e8a","#3c4f8a","#3c508b","#3b518b","#3b528b","#3a538b","#3a548c","#39558c","#39568c","#38588c","#38598c","#375a8c","#375b8d","#365c8d","#365d8d","#355e8d","#355f8d","#34608d","#34618d","#33628d","#33638d","#32648e","#32658e","#31668e","#31678e","#31688e","#30698e","#306a8e","#2f6b8e","#2f6c8e","#2e6d8e","#2e6e8e","#2e6f8e","#2d708e","#2d718e","#2c718e","#2c728e","#2c738e","#2b748e","#2b758e","#2a768e","#2a778e","#2a788e","#29798e","#297a8e","#297b8e","#287c8e","#287d8e","#277e8e","#277f8e","#27808e","#26818e","#26828e","#26828e","#25838e","#25848e","#25858e","#24868e","#24878e","#23888e","#23898e","#238a8d","#228b8d","#228c8d","#228d8d","#218e8d","#218f8d","#21908d","#21918c","#20928c","#20928c","#20938c","#1f948c","#1f958b","#1f968b","#1f978b","#1f988b","#1f998a","#1f9a8a","#1e9b8a","#1e9c89","#1e9d89","#1f9e89","#1f9f88","#1fa088","#1fa188","#1fa187","#1fa287","#20a386","#20a486","#21a585","#21a685","#22a785","#22a884","#23a983","#24aa83","#25ab82","#25ac82","#26ad81","#27ad81","#28ae80","#29af7f","#2ab07f","#2cb17e","#2db27d","#2eb37c","#2fb47c","#31b57b","#32b67a","#34b679","#35b779","#37b878","#38b977","#3aba76","#3bbb75","#3dbc74","#3fbc73","#40bd72","#42be71","#44bf70","#46c06f","#48c16e","#4ac16d","#4cc26c","#4ec36b","#50c46a","#52c569","#54c568","#56c667","#58c765","#5ac864","#5cc863","#5ec962","#60ca60","#63cb5f","#65cb5e","#67cc5c","#69cd5b","#6ccd5a","#6ece58","#70cf57","#73d056","#75d054","#77d153","#7ad151","#7cd250","#7fd34e","#81d34d","#84d44b","#86d549","#89d548","#8bd646","#8ed645","#90d743","#93d741","#95d840","#98d83e","#9bd93c","#9dd93b","#a0da39","#a2da37","#a5db36","#a8db34","#aadc32","#addc30","#b0dd2f","#b2dd2d","#b5de2b","#b8de29","#bade28","#bddf26","#c0df25","#c2df23","#c5e021","#c8e020","#cae11f","#cde11d","#d0e11c","#d2e21b","#d5e21a","#d8e219","#dae319","#dde318","#dfe318","#e2e418","#e5e419","#e7e419","#eae51a","#ece51b","#efe51c","#f1e51d","#f4e61e","#f6e620","#f8e621","#fbe723","#fde725"],
this.colour_mapper=new Bokeh.LinearColorMapper({palette:this.viridis_hex}),this.ticker=new Bokeh.BasicTicker,this.colour_bar=new Bokeh.ColorBar({ticker:this.ticker,label_standoff:7,location:[-6,0]})}return BokehPcolourComponent.prototype.ngOnChanges=function(){if(this.scatter_data={x:this.scatter_x,y:this.scatter_y,z:this.scatter_z,c:this.scatter_c},this.pcolour_data.x!=this.pcolour_x){this.hover_width=[];for(var e=0,t=this.pcolour_x;e<t.length;e++){var n=t[e];this.hover_width.push(n.toFixed(1))}}if(this.pcolour_data.y!=this.pcolour_y){this.hover_length=[];for(var i=0,o=this.pcolour_y;i<o.length;i++){var a=o[i];this.hover_length.push(a.toFixed(1))}}if(this.pcolour_data.z!=this.pcolour_z){this.hover_factor=[];for(var r=0,l=this.pcolour_z;r<l.length;r++){var s=l[r];this.hover_factor.push((Math.round(1e4*s)/1e4).toFixed(4))}}if(this.pcolour_data={x:this.pcolour_x,y:this.pcolour_y,z:this.pcolour_z,hover_width:this.hover_width,hover_length:this.hover_length,hover_factor:this.hover_factor,c:this.pcolour_c},this.old_scatter_z!=this.scatter_z||this.old_pcolour_z!=this.pcolour_z){var c=this.scatter_z.concat(this.pcolour_z);this.vmin=Math.min.apply(Math,c),this.vmax=Math.max.apply(Math,c),this.colour_mapper.low=this.vmin,this.colour_mapper.high=this.vmax,this.colour_bar.color_mapper=this.colour_mapper,this.scatter_c=this.colour_mapper.v_compute(this.scatter_z),this.pcolour_c=this.colour_mapper.v_compute(this.pcolour_z),this.scatter_data.c=this.scatter_c,this.pcolour_data.c=this.pcolour_c,this.old_scatter_z=this.scatter_z,this.old_pcolour_z=this.pcolour_z}this.scatter_source.data!=this.scatter_data&&(this.scatter_source.data=this.scatter_data),this.pcolour_source.data!=this.pcolour_data&&(this.pcolour_source.data=this.pcolour_data),null!=this.fig&&(this.fig.width!=this.plot_width&&(this.plot_width<200?this.fig.width=200:this.fig.width=this.plot_width),this.fig.height!=this.plot_height&&(this.fig.height=this.plot_height))},BokehPcolourComponent.prototype.ngOnInit=function(){this.fig=this.plt.figure({title:this.title,tools:this.tools,plot_width:this.plot_width,plot_height:this.plot_height})},BokehPcolourComponent.prototype.ngAfterViewInit=function(){var e=this.fig.rect({field:"x"},{field:"y"},.1,.1,{source:this.pcolour_source,color:{field:"c"}}),t=new Bokeh.HoverTool({tooltips:[["Width"," @hover_width cm"],["Length"," @hover_length cm"],["Factor"," @hover_factor"]],renderers:[e]});this.fig.add_tools(t),this.fig.circle({field:"x"},{field:"y"},{source:this.scatter_source,size:15,line_color:"black",fill_color:{field:"c"},line_width:2}),this.fig.add_layout(this.colour_bar,"left"),this.doc.add_root(this.fig),Bokeh.embed.add_document_standalone(this.doc,this.bokehplot.nativeElement)},i([a.Input(),o("design:type",String)],BokehPcolourComponent.prototype,"title",void 0),i([a.Input(),o("design:type",Number)],BokehPcolourComponent.prototype,"plot_width",void 0),i([a.Input(),o("design:type",Number)],BokehPcolourComponent.prototype,"plot_height",void 0),i([a.Input(),o("design:type",Array)],BokehPcolourComponent.prototype,"scatter_x",void 0),i([a.Input(),o("design:type",Array)],BokehPcolourComponent.prototype,"scatter_y",void 0),i([a.Input(),o("design:type",Array)],BokehPcolourComponent.prototype,"scatter_z",void 0),i([a.Input(),o("design:type",Array)],BokehPcolourComponent.prototype,"pcolour_x",void 0),i([a.Input(),o("design:type",Array)],BokehPcolourComponent.prototype,"pcolour_y",void 0),i([a.Input(),o("design:type",Array)],BokehPcolourComponent.prototype,"pcolour_z",void 0),i([a.Input(),o("design:type",Boolean)],BokehPcolourComponent.prototype,"enabled",void 0),i([a.ViewChild("bokehplot"),o("design:type",Object)],BokehPcolourComponent.prototype,"bokehplot",void 0),BokehPcolourComponent=i([a.Component({selector:"my-bokeh-pcolour",template:n(201)}),o("design:paramtypes",[])],BokehPcolourComponent)}();t.BokehPcolourComponent=r},201:function(e,t){e.exports='<div class="bk-root" [style.width]="plot_width + \'px\'" style="height:400px">\n  <div #bokehplot></div>\n</div>\n'}});
//# sourceMappingURL=app.1bc89a6b3a127f104da2.js.map